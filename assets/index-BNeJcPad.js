function aw(e,t){for(var r=0;r<t.length;r++){const s=t[r];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in e)){const o=Object.getOwnPropertyDescriptor(s,a);o&&Object.defineProperty(e,a,o.get?o:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();function xd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Kh={exports:{}},Ei={},Qh={exports:{}},ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ha=Symbol.for("react.element"),ow=Symbol.for("react.portal"),iw=Symbol.for("react.fragment"),lw=Symbol.for("react.strict_mode"),cw=Symbol.for("react.profiler"),dw=Symbol.for("react.provider"),uw=Symbol.for("react.context"),mw=Symbol.for("react.forward_ref"),fw=Symbol.for("react.suspense"),hw=Symbol.for("react.memo"),pw=Symbol.for("react.lazy"),hm=Symbol.iterator;function xw(e){return e===null||typeof e!="object"?null:(e=hm&&e[hm]||e["@@iterator"],typeof e=="function"?e:null)}var Zh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Xh=Object.assign,Jh={};function Rs(e,t,r){this.props=e,this.context=t,this.refs=Jh,this.updater=r||Zh}Rs.prototype.isReactComponent={};Rs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Rs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ep(){}ep.prototype=Rs.prototype;function gd(e,t,r){this.props=e,this.context=t,this.refs=Jh,this.updater=r||Zh}var vd=gd.prototype=new ep;vd.constructor=gd;Xh(vd,Rs.prototype);vd.isPureReactComponent=!0;var pm=Array.isArray,tp=Object.prototype.hasOwnProperty,yd={current:null},np={key:!0,ref:!0,__self:!0,__source:!0};function rp(e,t,r){var s,a={},o=null,i=null;if(t!=null)for(s in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(o=""+t.key),t)tp.call(t,s)&&!np.hasOwnProperty(s)&&(a[s]=t[s]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps,l)a[s]===void 0&&(a[s]=l[s]);return{$$typeof:Ha,type:e,key:o,ref:i,props:a,_owner:yd.current}}function gw(e,t){return{$$typeof:Ha,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function jd(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ha}function vw(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var xm=/\/+/g;function pl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?vw(""+e.key):t.toString(36)}function Mo(e,t,r,s,a){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Ha:case ow:i=!0}}if(i)return i=e,a=a(i),e=s===""?"."+pl(i,0):s,pm(a)?(r="",e!=null&&(r=e.replace(xm,"$&/")+"/"),Mo(a,t,r,"",function(u){return u})):a!=null&&(jd(a)&&(a=gw(a,r+(!a.key||i&&i.key===a.key?"":(""+a.key).replace(xm,"$&/")+"/")+e)),t.push(a)),1;if(i=0,s=s===""?".":s+":",pm(e))for(var l=0;l<e.length;l++){o=e[l];var c=s+pl(o,l);i+=Mo(o,t,r,c,a)}else if(c=xw(e),typeof c=="function")for(e=c.call(e),l=0;!(o=e.next()).done;)o=o.value,c=s+pl(o,l++),i+=Mo(o,t,r,c,a);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function ao(e,t,r){if(e==null)return e;var s=[],a=0;return Mo(e,s,"","",function(o){return t.call(r,o,a++)}),s}function yw(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var mt={current:null},Ro={transition:null},jw={ReactCurrentDispatcher:mt,ReactCurrentBatchConfig:Ro,ReactCurrentOwner:yd};function sp(){throw Error("act(...) is not supported in production builds of React.")}ae.Children={map:ao,forEach:function(e,t,r){ao(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return ao(e,function(){t++}),t},toArray:function(e){return ao(e,function(t){return t})||[]},only:function(e){if(!jd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ae.Component=Rs;ae.Fragment=iw;ae.Profiler=cw;ae.PureComponent=gd;ae.StrictMode=lw;ae.Suspense=fw;ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jw;ae.act=sp;ae.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=Xh({},e.props),a=e.key,o=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,i=yd.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)tp.call(t,c)&&!np.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:Ha,type:e.type,key:a,ref:o,props:s,_owner:i}};ae.createContext=function(e){return e={$$typeof:uw,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:dw,_context:e},e.Consumer=e};ae.createElement=rp;ae.createFactory=function(e){var t=rp.bind(null,e);return t.type=e,t};ae.createRef=function(){return{current:null}};ae.forwardRef=function(e){return{$$typeof:mw,render:e}};ae.isValidElement=jd;ae.lazy=function(e){return{$$typeof:pw,_payload:{_status:-1,_result:e},_init:yw}};ae.memo=function(e,t){return{$$typeof:hw,type:e,compare:t===void 0?null:t}};ae.startTransition=function(e){var t=Ro.transition;Ro.transition={};try{e()}finally{Ro.transition=t}};ae.unstable_act=sp;ae.useCallback=function(e,t){return mt.current.useCallback(e,t)};ae.useContext=function(e){return mt.current.useContext(e)};ae.useDebugValue=function(){};ae.useDeferredValue=function(e){return mt.current.useDeferredValue(e)};ae.useEffect=function(e,t){return mt.current.useEffect(e,t)};ae.useId=function(){return mt.current.useId()};ae.useImperativeHandle=function(e,t,r){return mt.current.useImperativeHandle(e,t,r)};ae.useInsertionEffect=function(e,t){return mt.current.useInsertionEffect(e,t)};ae.useLayoutEffect=function(e,t){return mt.current.useLayoutEffect(e,t)};ae.useMemo=function(e,t){return mt.current.useMemo(e,t)};ae.useReducer=function(e,t,r){return mt.current.useReducer(e,t,r)};ae.useRef=function(e){return mt.current.useRef(e)};ae.useState=function(e){return mt.current.useState(e)};ae.useSyncExternalStore=function(e,t,r){return mt.current.useSyncExternalStore(e,t,r)};ae.useTransition=function(){return mt.current.useTransition()};ae.version="18.3.1";Qh.exports=ae;var d=Qh.exports;const on=xd(d),Va=aw({__proto__:null,default:on},[d]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ww=d,Nw=Symbol.for("react.element"),bw=Symbol.for("react.fragment"),Sw=Object.prototype.hasOwnProperty,Cw=ww.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,kw={key:!0,ref:!0,__self:!0,__source:!0};function ap(e,t,r){var s,a={},o=null,i=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(i=t.ref);for(s in t)Sw.call(t,s)&&!kw.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)a[s]===void 0&&(a[s]=t[s]);return{$$typeof:Nw,type:e,key:o,ref:i,props:a,_owner:Cw.current}}Ei.Fragment=bw;Ei.jsx=ap;Ei.jsxs=ap;Kh.exports=Ei;var n=Kh.exports,dc={},op={exports:{}},Dt={},ip={exports:{}},lp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(A,F){var W=A.length;A.push(F);e:for(;0<W;){var L=W-1>>>1,O=A[L];if(0<a(O,F))A[L]=F,A[W]=O,W=L;else break e}}function r(A){return A.length===0?null:A[0]}function s(A){if(A.length===0)return null;var F=A[0],W=A.pop();if(W!==F){A[0]=W;e:for(var L=0,O=A.length,H=O>>>1;L<H;){var J=2*(L+1)-1,me=A[J],he=J+1,ye=A[he];if(0>a(me,W))he<O&&0>a(ye,me)?(A[L]=ye,A[he]=W,L=he):(A[L]=me,A[J]=W,L=J);else if(he<O&&0>a(ye,W))A[L]=ye,A[he]=W,L=he;else break e}}return F}function a(A,F){var W=A.sortIndex-F.sortIndex;return W!==0?W:A.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var c=[],u=[],h=1,m=null,g=3,j=!1,w=!1,v=!1,p=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(A){for(var F=r(u);F!==null;){if(F.callback===null)s(u);else if(F.startTime<=A)s(u),F.sortIndex=F.expirationTime,t(c,F);else break;F=r(u)}}function N(A){if(v=!1,y(A),!w)if(r(c)!==null)w=!0,B(b);else{var F=r(u);F!==null&&z(N,F.startTime-A)}}function b(A,F){w=!1,v&&(v=!1,f(E),E=-1),j=!0;var W=g;try{for(y(F),m=r(c);m!==null&&(!(m.expirationTime>F)||A&&!R());){var L=m.callback;if(typeof L=="function"){m.callback=null,g=m.priorityLevel;var O=L(m.expirationTime<=F);F=e.unstable_now(),typeof O=="function"?m.callback=O:m===r(c)&&s(c),y(F)}else s(c);m=r(c)}if(m!==null)var H=!0;else{var J=r(u);J!==null&&z(N,J.startTime-F),H=!1}return H}finally{m=null,g=W,j=!1}}var T=!1,D=null,E=-1,S=5,C=-1;function R(){return!(e.unstable_now()-C<S)}function k(){if(D!==null){var A=e.unstable_now();C=A;var F=!0;try{F=D(!0,A)}finally{F?M():(T=!1,D=null)}}else T=!1}var M;if(typeof x=="function")M=function(){x(k)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,I=$.port2;$.port1.onmessage=k,M=function(){I.postMessage(null)}}else M=function(){p(k,0)};function B(A){D=A,T||(T=!0,M())}function z(A,F){E=p(function(){A(e.unstable_now())},F)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_continueExecution=function(){w||j||(w=!0,B(b))},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<A?Math.floor(1e3/A):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(A){switch(g){case 1:case 2:case 3:var F=3;break;default:F=g}var W=g;g=F;try{return A()}finally{g=W}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(A,F){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var W=g;g=A;try{return F()}finally{g=W}},e.unstable_scheduleCallback=function(A,F,W){var L=e.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?L+W:L):W=L,A){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=W+O,A={id:h++,callback:F,priorityLevel:A,startTime:W,expirationTime:O,sortIndex:-1},W>L?(A.sortIndex=W,t(u,A),r(c)===null&&A===r(u)&&(v?(f(E),E=-1):v=!0,z(N,W-L))):(A.sortIndex=O,t(c,A),w||j||(w=!0,B(b))),A},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(A){var F=g;return function(){var W=g;g=F;try{return A.apply(this,arguments)}finally{g=W}}}})(lp);ip.exports=lp;var Dw=ip.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tw=d,kt=Dw;function U(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var cp=new Set,va={};function $r(e,t){js(e,t),js(e+"Capture",t)}function js(e,t){for(va[e]=t,e=0;e<t.length;e++)cp.add(t[e])}var Tn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),uc=Object.prototype.hasOwnProperty,Ew=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,gm={},vm={};function Mw(e){return uc.call(vm,e)?!0:uc.call(gm,e)?!1:Ew.test(e)?vm[e]=!0:(gm[e]=!0,!1)}function Rw(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Pw(e,t,r,s){if(t===null||typeof t>"u"||Rw(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ft(e,t,r,s,a,o,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var Qe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Qe[e]=new ft(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Qe[t]=new ft(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Qe[e]=new ft(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Qe[e]=new ft(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Qe[e]=new ft(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Qe[e]=new ft(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Qe[e]=new ft(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Qe[e]=new ft(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Qe[e]=new ft(e,5,!1,e.toLowerCase(),null,!1,!1)});var wd=/[\-:]([a-z])/g;function Nd(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(wd,Nd);Qe[t]=new ft(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(wd,Nd);Qe[t]=new ft(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(wd,Nd);Qe[t]=new ft(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Qe[e]=new ft(e,1,!1,e.toLowerCase(),null,!1,!1)});Qe.xlinkHref=new ft("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Qe[e]=new ft(e,1,!1,e.toLowerCase(),null,!0,!0)});function bd(e,t,r,s){var a=Qe.hasOwnProperty(t)?Qe[t]:null;(a!==null?a.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Pw(t,r,a,s)&&(r=null),s||a===null?Mw(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,s=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var In=Tw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,oo=Symbol.for("react.element"),Kr=Symbol.for("react.portal"),Qr=Symbol.for("react.fragment"),Sd=Symbol.for("react.strict_mode"),mc=Symbol.for("react.profiler"),dp=Symbol.for("react.provider"),up=Symbol.for("react.context"),Cd=Symbol.for("react.forward_ref"),fc=Symbol.for("react.suspense"),hc=Symbol.for("react.suspense_list"),kd=Symbol.for("react.memo"),Yn=Symbol.for("react.lazy"),mp=Symbol.for("react.offscreen"),ym=Symbol.iterator;function Bs(e){return e===null||typeof e!="object"?null:(e=ym&&e[ym]||e["@@iterator"],typeof e=="function"?e:null)}var Ne=Object.assign,xl;function Js(e){if(xl===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);xl=t&&t[1]||""}return`
`+xl+e}var gl=!1;function vl(e,t){if(!e||gl)return"";gl=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var s=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){s=u}e.call(t.prototype)}else{try{throw Error()}catch(u){s=u}e()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),o=s.stack.split(`
`),i=a.length-1,l=o.length-1;1<=i&&0<=l&&a[i]!==o[l];)l--;for(;1<=i&&0<=l;i--,l--)if(a[i]!==o[l]){if(i!==1||l!==1)do if(i--,l--,0>l||a[i]!==o[l]){var c=`
`+a[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=l);break}}}finally{gl=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Js(e):""}function Aw(e){switch(e.tag){case 5:return Js(e.type);case 16:return Js("Lazy");case 13:return Js("Suspense");case 19:return Js("SuspenseList");case 0:case 2:case 15:return e=vl(e.type,!1),e;case 11:return e=vl(e.type.render,!1),e;case 1:return e=vl(e.type,!0),e;default:return""}}function pc(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Qr:return"Fragment";case Kr:return"Portal";case mc:return"Profiler";case Sd:return"StrictMode";case fc:return"Suspense";case hc:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case up:return(e.displayName||"Context")+".Consumer";case dp:return(e._context.displayName||"Context")+".Provider";case Cd:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case kd:return t=e.displayName||null,t!==null?t:pc(e.type)||"Memo";case Yn:t=e._payload,e=e._init;try{return pc(e(t))}catch{}}return null}function Ow(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pc(t);case 8:return t===Sd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function lr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function fp(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Iw(e){var t=fp(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(i){s=""+i,o.call(this,i)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(i){s=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function io(e){e._valueTracker||(e._valueTracker=Iw(e))}function hp(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=fp(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function Ho(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function xc(e,t){var r=t.checked;return Ne({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function jm(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=lr(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function pp(e,t){t=t.checked,t!=null&&bd(e,"checked",t,!1)}function gc(e,t){pp(e,t);var r=lr(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?vc(e,t.type,r):t.hasOwnProperty("defaultValue")&&vc(e,t.type,lr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function wm(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function vc(e,t,r){(t!=="number"||Ho(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var ea=Array.isArray;function is(e,t,r,s){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&s&&(e[r].defaultSelected=!0)}else{for(r=""+lr(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,s&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function yc(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(U(91));return Ne({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Nm(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(U(92));if(ea(r)){if(1<r.length)throw Error(U(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:lr(r)}}function xp(e,t){var r=lr(t.value),s=lr(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function bm(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function gp(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jc(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?gp(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var lo,vp=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(lo=lo||document.createElement("div"),lo.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=lo.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ya(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var oa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Fw=["Webkit","ms","Moz","O"];Object.keys(oa).forEach(function(e){Fw.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),oa[t]=oa[e]})});function yp(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||oa.hasOwnProperty(e)&&oa[e]?(""+t).trim():t+"px"}function jp(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,a=yp(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,a):e[r]=a}}var _w=Ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wc(e,t){if(t){if(_w[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(U(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(U(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(U(61))}if(t.style!=null&&typeof t.style!="object")throw Error(U(62))}}function Nc(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bc=null;function Dd(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Sc=null,ls=null,cs=null;function Sm(e){if(e=Qa(e)){if(typeof Sc!="function")throw Error(U(280));var t=e.stateNode;t&&(t=Oi(t),Sc(e.stateNode,e.type,t))}}function wp(e){ls?cs?cs.push(e):cs=[e]:ls=e}function Np(){if(ls){var e=ls,t=cs;if(cs=ls=null,Sm(e),t)for(e=0;e<t.length;e++)Sm(t[e])}}function bp(e,t){return e(t)}function Sp(){}var yl=!1;function Cp(e,t,r){if(yl)return e(t,r);yl=!0;try{return bp(e,t,r)}finally{yl=!1,(ls!==null||cs!==null)&&(Sp(),Np())}}function ja(e,t){var r=e.stateNode;if(r===null)return null;var s=Oi(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(U(231,t,typeof r));return r}var Cc=!1;if(Tn)try{var zs={};Object.defineProperty(zs,"passive",{get:function(){Cc=!0}}),window.addEventListener("test",zs,zs),window.removeEventListener("test",zs,zs)}catch{Cc=!1}function Lw(e,t,r,s,a,o,i,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(h){this.onError(h)}}var ia=!1,Vo=null,qo=!1,kc=null,$w={onError:function(e){ia=!0,Vo=e}};function Bw(e,t,r,s,a,o,i,l,c){ia=!1,Vo=null,Lw.apply($w,arguments)}function zw(e,t,r,s,a,o,i,l,c){if(Bw.apply(this,arguments),ia){if(ia){var u=Vo;ia=!1,Vo=null}else throw Error(U(198));qo||(qo=!0,kc=u)}}function Br(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function kp(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Cm(e){if(Br(e)!==e)throw Error(U(188))}function Ww(e){var t=e.alternate;if(!t){if(t=Br(e),t===null)throw Error(U(188));return t!==e?null:e}for(var r=e,s=t;;){var a=r.return;if(a===null)break;var o=a.alternate;if(o===null){if(s=a.return,s!==null){r=s;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===r)return Cm(a),e;if(o===s)return Cm(a),t;o=o.sibling}throw Error(U(188))}if(r.return!==s.return)r=a,s=o;else{for(var i=!1,l=a.child;l;){if(l===r){i=!0,r=a,s=o;break}if(l===s){i=!0,s=a,r=o;break}l=l.sibling}if(!i){for(l=o.child;l;){if(l===r){i=!0,r=o,s=a;break}if(l===s){i=!0,s=o,r=a;break}l=l.sibling}if(!i)throw Error(U(189))}}if(r.alternate!==s)throw Error(U(190))}if(r.tag!==3)throw Error(U(188));return r.stateNode.current===r?e:t}function Dp(e){return e=Ww(e),e!==null?Tp(e):null}function Tp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Tp(e);if(t!==null)return t;e=e.sibling}return null}var Ep=kt.unstable_scheduleCallback,km=kt.unstable_cancelCallback,Uw=kt.unstable_shouldYield,Yw=kt.unstable_requestPaint,Me=kt.unstable_now,Gw=kt.unstable_getCurrentPriorityLevel,Td=kt.unstable_ImmediatePriority,Mp=kt.unstable_UserBlockingPriority,Ko=kt.unstable_NormalPriority,Hw=kt.unstable_LowPriority,Rp=kt.unstable_IdlePriority,Mi=null,un=null;function Vw(e){if(un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(Mi,e,void 0,(e.current.flags&128)===128)}catch{}}var Kt=Math.clz32?Math.clz32:Qw,qw=Math.log,Kw=Math.LN2;function Qw(e){return e>>>=0,e===0?32:31-(qw(e)/Kw|0)|0}var co=64,uo=4194304;function ta(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Qo(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,a=e.suspendedLanes,o=e.pingedLanes,i=r&268435455;if(i!==0){var l=i&~a;l!==0?s=ta(l):(o&=i,o!==0&&(s=ta(o)))}else i=r&~a,i!==0?s=ta(i):o!==0&&(s=ta(o));if(s===0)return 0;if(t!==0&&t!==s&&!(t&a)&&(a=s&-s,o=t&-t,a>=o||a===16&&(o&4194240)!==0))return t;if(s&4&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-Kt(t),a=1<<r,s|=e[r],t&=~a;return s}function Zw(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xw(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-Kt(o),l=1<<i,c=a[i];c===-1?(!(l&r)||l&s)&&(a[i]=Zw(l,t)):c<=t&&(e.expiredLanes|=l),o&=~l}}function Dc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Pp(){var e=co;return co<<=1,!(co&4194240)&&(co=64),e}function jl(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function qa(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Kt(t),e[t]=r}function Jw(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Kt(r),o=1<<a;t[a]=0,s[a]=-1,e[a]=-1,r&=~o}}function Ed(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-Kt(r),a=1<<s;a&t|e[s]&t&&(e[s]|=t),r&=~a}}var ue=0;function Ap(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Op,Md,Ip,Fp,_p,Tc=!1,mo=[],Xn=null,Jn=null,er=null,wa=new Map,Na=new Map,Hn=[],eN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dm(e,t){switch(e){case"focusin":case"focusout":Xn=null;break;case"dragenter":case"dragleave":Jn=null;break;case"mouseover":case"mouseout":er=null;break;case"pointerover":case"pointerout":wa.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Na.delete(t.pointerId)}}function Ws(e,t,r,s,a,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:o,targetContainers:[a]},t!==null&&(t=Qa(t),t!==null&&Md(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function tN(e,t,r,s,a){switch(t){case"focusin":return Xn=Ws(Xn,e,t,r,s,a),!0;case"dragenter":return Jn=Ws(Jn,e,t,r,s,a),!0;case"mouseover":return er=Ws(er,e,t,r,s,a),!0;case"pointerover":var o=a.pointerId;return wa.set(o,Ws(wa.get(o)||null,e,t,r,s,a)),!0;case"gotpointercapture":return o=a.pointerId,Na.set(o,Ws(Na.get(o)||null,e,t,r,s,a)),!0}return!1}function Lp(e){var t=br(e.target);if(t!==null){var r=Br(t);if(r!==null){if(t=r.tag,t===13){if(t=kp(r),t!==null){e.blockedOn=t,_p(e.priority,function(){Ip(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Po(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Ec(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);bc=s,r.target.dispatchEvent(s),bc=null}else return t=Qa(r),t!==null&&Md(t),e.blockedOn=r,!1;t.shift()}return!0}function Tm(e,t,r){Po(e)&&r.delete(t)}function nN(){Tc=!1,Xn!==null&&Po(Xn)&&(Xn=null),Jn!==null&&Po(Jn)&&(Jn=null),er!==null&&Po(er)&&(er=null),wa.forEach(Tm),Na.forEach(Tm)}function Us(e,t){e.blockedOn===t&&(e.blockedOn=null,Tc||(Tc=!0,kt.unstable_scheduleCallback(kt.unstable_NormalPriority,nN)))}function ba(e){function t(a){return Us(a,e)}if(0<mo.length){Us(mo[0],e);for(var r=1;r<mo.length;r++){var s=mo[r];s.blockedOn===e&&(s.blockedOn=null)}}for(Xn!==null&&Us(Xn,e),Jn!==null&&Us(Jn,e),er!==null&&Us(er,e),wa.forEach(t),Na.forEach(t),r=0;r<Hn.length;r++)s=Hn[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<Hn.length&&(r=Hn[0],r.blockedOn===null);)Lp(r),r.blockedOn===null&&Hn.shift()}var ds=In.ReactCurrentBatchConfig,Zo=!0;function rN(e,t,r,s){var a=ue,o=ds.transition;ds.transition=null;try{ue=1,Rd(e,t,r,s)}finally{ue=a,ds.transition=o}}function sN(e,t,r,s){var a=ue,o=ds.transition;ds.transition=null;try{ue=4,Rd(e,t,r,s)}finally{ue=a,ds.transition=o}}function Rd(e,t,r,s){if(Zo){var a=Ec(e,t,r,s);if(a===null)Ml(e,t,s,Xo,r),Dm(e,s);else if(tN(a,e,t,r,s))s.stopPropagation();else if(Dm(e,s),t&4&&-1<eN.indexOf(e)){for(;a!==null;){var o=Qa(a);if(o!==null&&Op(o),o=Ec(e,t,r,s),o===null&&Ml(e,t,s,Xo,r),o===a)break;a=o}a!==null&&s.stopPropagation()}else Ml(e,t,s,null,r)}}var Xo=null;function Ec(e,t,r,s){if(Xo=null,e=Dd(s),e=br(e),e!==null)if(t=Br(e),t===null)e=null;else if(r=t.tag,r===13){if(e=kp(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xo=e,null}function $p(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Gw()){case Td:return 1;case Mp:return 4;case Ko:case Hw:return 16;case Rp:return 536870912;default:return 16}default:return 16}}var qn=null,Pd=null,Ao=null;function Bp(){if(Ao)return Ao;var e,t=Pd,r=t.length,s,a="value"in qn?qn.value:qn.textContent,o=a.length;for(e=0;e<r&&t[e]===a[e];e++);var i=r-e;for(s=1;s<=i&&t[r-s]===a[o-s];s++);return Ao=a.slice(e,1<s?1-s:void 0)}function Oo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function fo(){return!0}function Em(){return!1}function Tt(e){function t(r,s,a,o,i){this._reactName=r,this._targetInst=a,this.type=s,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?fo:Em,this.isPropagationStopped=Em,this}return Ne(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=fo)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=fo)},persist:function(){},isPersistent:fo}),t}var Ps={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ad=Tt(Ps),Ka=Ne({},Ps,{view:0,detail:0}),aN=Tt(Ka),wl,Nl,Ys,Ri=Ne({},Ka,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Od,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ys&&(Ys&&e.type==="mousemove"?(wl=e.screenX-Ys.screenX,Nl=e.screenY-Ys.screenY):Nl=wl=0,Ys=e),wl)},movementY:function(e){return"movementY"in e?e.movementY:Nl}}),Mm=Tt(Ri),oN=Ne({},Ri,{dataTransfer:0}),iN=Tt(oN),lN=Ne({},Ka,{relatedTarget:0}),bl=Tt(lN),cN=Ne({},Ps,{animationName:0,elapsedTime:0,pseudoElement:0}),dN=Tt(cN),uN=Ne({},Ps,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),mN=Tt(uN),fN=Ne({},Ps,{data:0}),Rm=Tt(fN),hN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gN(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=xN[e])?!!t[e]:!1}function Od(){return gN}var vN=Ne({},Ka,{key:function(e){if(e.key){var t=hN[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Oo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?pN[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Od,charCode:function(e){return e.type==="keypress"?Oo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Oo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),yN=Tt(vN),jN=Ne({},Ri,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pm=Tt(jN),wN=Ne({},Ka,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Od}),NN=Tt(wN),bN=Ne({},Ps,{propertyName:0,elapsedTime:0,pseudoElement:0}),SN=Tt(bN),CN=Ne({},Ri,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),kN=Tt(CN),DN=[9,13,27,32],Id=Tn&&"CompositionEvent"in window,la=null;Tn&&"documentMode"in document&&(la=document.documentMode);var TN=Tn&&"TextEvent"in window&&!la,zp=Tn&&(!Id||la&&8<la&&11>=la),Am=" ",Om=!1;function Wp(e,t){switch(e){case"keyup":return DN.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Up(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Zr=!1;function EN(e,t){switch(e){case"compositionend":return Up(t);case"keypress":return t.which!==32?null:(Om=!0,Am);case"textInput":return e=t.data,e===Am&&Om?null:e;default:return null}}function MN(e,t){if(Zr)return e==="compositionend"||!Id&&Wp(e,t)?(e=Bp(),Ao=Pd=qn=null,Zr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return zp&&t.locale!=="ko"?null:t.data;default:return null}}var RN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Im(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!RN[e.type]:t==="textarea"}function Yp(e,t,r,s){wp(s),t=Jo(t,"onChange"),0<t.length&&(r=new Ad("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var ca=null,Sa=null;function PN(e){tx(e,0)}function Pi(e){var t=es(e);if(hp(t))return e}function AN(e,t){if(e==="change")return t}var Gp=!1;if(Tn){var Sl;if(Tn){var Cl="oninput"in document;if(!Cl){var Fm=document.createElement("div");Fm.setAttribute("oninput","return;"),Cl=typeof Fm.oninput=="function"}Sl=Cl}else Sl=!1;Gp=Sl&&(!document.documentMode||9<document.documentMode)}function _m(){ca&&(ca.detachEvent("onpropertychange",Hp),Sa=ca=null)}function Hp(e){if(e.propertyName==="value"&&Pi(Sa)){var t=[];Yp(t,Sa,e,Dd(e)),Cp(PN,t)}}function ON(e,t,r){e==="focusin"?(_m(),ca=t,Sa=r,ca.attachEvent("onpropertychange",Hp)):e==="focusout"&&_m()}function IN(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Pi(Sa)}function FN(e,t){if(e==="click")return Pi(t)}function _N(e,t){if(e==="input"||e==="change")return Pi(t)}function LN(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Xt=typeof Object.is=="function"?Object.is:LN;function Ca(e,t){if(Xt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var a=r[s];if(!uc.call(t,a)||!Xt(e[a],t[a]))return!1}return!0}function Lm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function $m(e,t){var r=Lm(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Lm(r)}}function Vp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Vp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function qp(){for(var e=window,t=Ho();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Ho(e.document)}return t}function Fd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function $N(e){var t=qp(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Vp(r.ownerDocument.documentElement,r)){if(s!==null&&Fd(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,o=Math.min(s.start,a);s=s.end===void 0?o:Math.min(s.end,a),!e.extend&&o>s&&(a=s,s=o,o=a),a=$m(r,o);var i=$m(r,s);a&&i&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),o>s?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var BN=Tn&&"documentMode"in document&&11>=document.documentMode,Xr=null,Mc=null,da=null,Rc=!1;function Bm(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Rc||Xr==null||Xr!==Ho(s)||(s=Xr,"selectionStart"in s&&Fd(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),da&&Ca(da,s)||(da=s,s=Jo(Mc,"onSelect"),0<s.length&&(t=new Ad("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=Xr)))}function ho(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Jr={animationend:ho("Animation","AnimationEnd"),animationiteration:ho("Animation","AnimationIteration"),animationstart:ho("Animation","AnimationStart"),transitionend:ho("Transition","TransitionEnd")},kl={},Kp={};Tn&&(Kp=document.createElement("div").style,"AnimationEvent"in window||(delete Jr.animationend.animation,delete Jr.animationiteration.animation,delete Jr.animationstart.animation),"TransitionEvent"in window||delete Jr.transitionend.transition);function Ai(e){if(kl[e])return kl[e];if(!Jr[e])return e;var t=Jr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Kp)return kl[e]=t[r];return e}var Qp=Ai("animationend"),Zp=Ai("animationiteration"),Xp=Ai("animationstart"),Jp=Ai("transitionend"),ex=new Map,zm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fr(e,t){ex.set(e,t),$r(t,[e])}for(var Dl=0;Dl<zm.length;Dl++){var Tl=zm[Dl],zN=Tl.toLowerCase(),WN=Tl[0].toUpperCase()+Tl.slice(1);fr(zN,"on"+WN)}fr(Qp,"onAnimationEnd");fr(Zp,"onAnimationIteration");fr(Xp,"onAnimationStart");fr("dblclick","onDoubleClick");fr("focusin","onFocus");fr("focusout","onBlur");fr(Jp,"onTransitionEnd");js("onMouseEnter",["mouseout","mouseover"]);js("onMouseLeave",["mouseout","mouseover"]);js("onPointerEnter",["pointerout","pointerover"]);js("onPointerLeave",["pointerout","pointerover"]);$r("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$r("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$r("onBeforeInput",["compositionend","keypress","textInput","paste"]);$r("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$r("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$r("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var na="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),UN=new Set("cancel close invalid load scroll toggle".split(" ").concat(na));function Wm(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,zw(s,t,void 0,e),e.currentTarget=null}function tx(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],a=s.event;s=s.listeners;e:{var o=void 0;if(t)for(var i=s.length-1;0<=i;i--){var l=s[i],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==o&&a.isPropagationStopped())break e;Wm(a,l,u),o=c}else for(i=0;i<s.length;i++){if(l=s[i],c=l.instance,u=l.currentTarget,l=l.listener,c!==o&&a.isPropagationStopped())break e;Wm(a,l,u),o=c}}}if(qo)throw e=kc,qo=!1,kc=null,e}function xe(e,t){var r=t[Fc];r===void 0&&(r=t[Fc]=new Set);var s=e+"__bubble";r.has(s)||(nx(t,e,2,!1),r.add(s))}function El(e,t,r){var s=0;t&&(s|=4),nx(r,e,s,t)}var po="_reactListening"+Math.random().toString(36).slice(2);function ka(e){if(!e[po]){e[po]=!0,cp.forEach(function(r){r!=="selectionchange"&&(UN.has(r)||El(r,!1,e),El(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[po]||(t[po]=!0,El("selectionchange",!1,t))}}function nx(e,t,r,s){switch($p(t)){case 1:var a=rN;break;case 4:a=sN;break;default:a=Rd}r=a.bind(null,t,r,e),a=void 0,!Cc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),s?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Ml(e,t,r,s,a){var o=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var i=s.tag;if(i===3||i===4){var l=s.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(i===4)for(i=s.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;i=i.return}for(;l!==null;){if(i=br(l),i===null)return;if(c=i.tag,c===5||c===6){s=o=i;continue e}l=l.parentNode}}s=s.return}Cp(function(){var u=o,h=Dd(r),m=[];e:{var g=ex.get(e);if(g!==void 0){var j=Ad,w=e;switch(e){case"keypress":if(Oo(r)===0)break e;case"keydown":case"keyup":j=yN;break;case"focusin":w="focus",j=bl;break;case"focusout":w="blur",j=bl;break;case"beforeblur":case"afterblur":j=bl;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=Mm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=iN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=NN;break;case Qp:case Zp:case Xp:j=dN;break;case Jp:j=SN;break;case"scroll":j=aN;break;case"wheel":j=kN;break;case"copy":case"cut":case"paste":j=mN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=Pm}var v=(t&4)!==0,p=!v&&e==="scroll",f=v?g!==null?g+"Capture":null:g;v=[];for(var x=u,y;x!==null;){y=x;var N=y.stateNode;if(y.tag===5&&N!==null&&(y=N,f!==null&&(N=ja(x,f),N!=null&&v.push(Da(x,N,y)))),p)break;x=x.return}0<v.length&&(g=new j(g,w,null,r,h),m.push({event:g,listeners:v}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",j=e==="mouseout"||e==="pointerout",g&&r!==bc&&(w=r.relatedTarget||r.fromElement)&&(br(w)||w[En]))break e;if((j||g)&&(g=h.window===h?h:(g=h.ownerDocument)?g.defaultView||g.parentWindow:window,j?(w=r.relatedTarget||r.toElement,j=u,w=w?br(w):null,w!==null&&(p=Br(w),w!==p||w.tag!==5&&w.tag!==6)&&(w=null)):(j=null,w=u),j!==w)){if(v=Mm,N="onMouseLeave",f="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(v=Pm,N="onPointerLeave",f="onPointerEnter",x="pointer"),p=j==null?g:es(j),y=w==null?g:es(w),g=new v(N,x+"leave",j,r,h),g.target=p,g.relatedTarget=y,N=null,br(h)===u&&(v=new v(f,x+"enter",w,r,h),v.target=y,v.relatedTarget=p,N=v),p=N,j&&w)t:{for(v=j,f=w,x=0,y=v;y;y=Yr(y))x++;for(y=0,N=f;N;N=Yr(N))y++;for(;0<x-y;)v=Yr(v),x--;for(;0<y-x;)f=Yr(f),y--;for(;x--;){if(v===f||f!==null&&v===f.alternate)break t;v=Yr(v),f=Yr(f)}v=null}else v=null;j!==null&&Um(m,g,j,v,!1),w!==null&&p!==null&&Um(m,p,w,v,!0)}}e:{if(g=u?es(u):window,j=g.nodeName&&g.nodeName.toLowerCase(),j==="select"||j==="input"&&g.type==="file")var b=AN;else if(Im(g))if(Gp)b=_N;else{b=IN;var T=ON}else(j=g.nodeName)&&j.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(b=FN);if(b&&(b=b(e,u))){Yp(m,b,r,h);break e}T&&T(e,g,u),e==="focusout"&&(T=g._wrapperState)&&T.controlled&&g.type==="number"&&vc(g,"number",g.value)}switch(T=u?es(u):window,e){case"focusin":(Im(T)||T.contentEditable==="true")&&(Xr=T,Mc=u,da=null);break;case"focusout":da=Mc=Xr=null;break;case"mousedown":Rc=!0;break;case"contextmenu":case"mouseup":case"dragend":Rc=!1,Bm(m,r,h);break;case"selectionchange":if(BN)break;case"keydown":case"keyup":Bm(m,r,h)}var D;if(Id)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Zr?Wp(e,r)&&(E="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(zp&&r.locale!=="ko"&&(Zr||E!=="onCompositionStart"?E==="onCompositionEnd"&&Zr&&(D=Bp()):(qn=h,Pd="value"in qn?qn.value:qn.textContent,Zr=!0)),T=Jo(u,E),0<T.length&&(E=new Rm(E,e,null,r,h),m.push({event:E,listeners:T}),D?E.data=D:(D=Up(r),D!==null&&(E.data=D)))),(D=TN?EN(e,r):MN(e,r))&&(u=Jo(u,"onBeforeInput"),0<u.length&&(h=new Rm("onBeforeInput","beforeinput",null,r,h),m.push({event:h,listeners:u}),h.data=D))}tx(m,t)})}function Da(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Jo(e,t){for(var r=t+"Capture",s=[];e!==null;){var a=e,o=a.stateNode;a.tag===5&&o!==null&&(a=o,o=ja(e,r),o!=null&&s.unshift(Da(e,o,a)),o=ja(e,t),o!=null&&s.push(Da(e,o,a))),e=e.return}return s}function Yr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Um(e,t,r,s,a){for(var o=t._reactName,i=[];r!==null&&r!==s;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&u!==null&&(l=u,a?(c=ja(r,o),c!=null&&i.unshift(Da(r,c,l))):a||(c=ja(r,o),c!=null&&i.push(Da(r,c,l)))),r=r.return}i.length!==0&&e.push({event:t,listeners:i})}var YN=/\r\n?/g,GN=/\u0000|\uFFFD/g;function Ym(e){return(typeof e=="string"?e:""+e).replace(YN,`
`).replace(GN,"")}function xo(e,t,r){if(t=Ym(t),Ym(e)!==t&&r)throw Error(U(425))}function ei(){}var Pc=null,Ac=null;function Oc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ic=typeof setTimeout=="function"?setTimeout:void 0,HN=typeof clearTimeout=="function"?clearTimeout:void 0,Gm=typeof Promise=="function"?Promise:void 0,VN=typeof queueMicrotask=="function"?queueMicrotask:typeof Gm<"u"?function(e){return Gm.resolve(null).then(e).catch(qN)}:Ic;function qN(e){setTimeout(function(){throw e})}function Rl(e,t){var r=t,s=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(s===0){e.removeChild(a),ba(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=a}while(r);ba(t)}function tr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Hm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var As=Math.random().toString(36).slice(2),ln="__reactFiber$"+As,Ta="__reactProps$"+As,En="__reactContainer$"+As,Fc="__reactEvents$"+As,KN="__reactListeners$"+As,QN="__reactHandles$"+As;function br(e){var t=e[ln];if(t)return t;for(var r=e.parentNode;r;){if(t=r[En]||r[ln]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Hm(e);e!==null;){if(r=e[ln])return r;e=Hm(e)}return t}e=r,r=e.parentNode}return null}function Qa(e){return e=e[ln]||e[En],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function es(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(U(33))}function Oi(e){return e[Ta]||null}var _c=[],ts=-1;function hr(e){return{current:e}}function ge(e){0>ts||(e.current=_c[ts],_c[ts]=null,ts--)}function fe(e,t){ts++,_c[ts]=e.current,e.current=t}var cr={},et=hr(cr),gt=hr(!1),Rr=cr;function ws(e,t){var r=e.type.contextTypes;if(!r)return cr;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var a={},o;for(o in r)a[o]=t[o];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function vt(e){return e=e.childContextTypes,e!=null}function ti(){ge(gt),ge(et)}function Vm(e,t,r){if(et.current!==cr)throw Error(U(168));fe(et,t),fe(gt,r)}function rx(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var a in s)if(!(a in t))throw Error(U(108,Ow(e)||"Unknown",a));return Ne({},r,s)}function ni(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||cr,Rr=et.current,fe(et,e),fe(gt,gt.current),!0}function qm(e,t,r){var s=e.stateNode;if(!s)throw Error(U(169));r?(e=rx(e,t,Rr),s.__reactInternalMemoizedMergedChildContext=e,ge(gt),ge(et),fe(et,e)):ge(gt),fe(gt,r)}var Nn=null,Ii=!1,Pl=!1;function sx(e){Nn===null?Nn=[e]:Nn.push(e)}function ZN(e){Ii=!0,sx(e)}function pr(){if(!Pl&&Nn!==null){Pl=!0;var e=0,t=ue;try{var r=Nn;for(ue=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}Nn=null,Ii=!1}catch(a){throw Nn!==null&&(Nn=Nn.slice(e+1)),Ep(Td,pr),a}finally{ue=t,Pl=!1}}return null}var ns=[],rs=0,ri=null,si=0,Rt=[],Pt=0,Pr=null,bn=1,Sn="";function jr(e,t){ns[rs++]=si,ns[rs++]=ri,ri=e,si=t}function ax(e,t,r){Rt[Pt++]=bn,Rt[Pt++]=Sn,Rt[Pt++]=Pr,Pr=e;var s=bn;e=Sn;var a=32-Kt(s)-1;s&=~(1<<a),r+=1;var o=32-Kt(t)+a;if(30<o){var i=a-a%5;o=(s&(1<<i)-1).toString(32),s>>=i,a-=i,bn=1<<32-Kt(t)+a|r<<a|s,Sn=o+e}else bn=1<<o|r<<a|s,Sn=e}function _d(e){e.return!==null&&(jr(e,1),ax(e,1,0))}function Ld(e){for(;e===ri;)ri=ns[--rs],ns[rs]=null,si=ns[--rs],ns[rs]=null;for(;e===Pr;)Pr=Rt[--Pt],Rt[Pt]=null,Sn=Rt[--Pt],Rt[Pt]=null,bn=Rt[--Pt],Rt[Pt]=null}var St=null,bt=null,ve=!1,Vt=null;function ox(e,t){var r=At(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Km(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,St=e,bt=tr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,St=e,bt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Pr!==null?{id:bn,overflow:Sn}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=At(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,St=e,bt=null,!0):!1;default:return!1}}function Lc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function $c(e){if(ve){var t=bt;if(t){var r=t;if(!Km(e,t)){if(Lc(e))throw Error(U(418));t=tr(r.nextSibling);var s=St;t&&Km(e,t)?ox(s,r):(e.flags=e.flags&-4097|2,ve=!1,St=e)}}else{if(Lc(e))throw Error(U(418));e.flags=e.flags&-4097|2,ve=!1,St=e}}}function Qm(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;St=e}function go(e){if(e!==St)return!1;if(!ve)return Qm(e),ve=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Oc(e.type,e.memoizedProps)),t&&(t=bt)){if(Lc(e))throw ix(),Error(U(418));for(;t;)ox(e,t),t=tr(t.nextSibling)}if(Qm(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(U(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){bt=tr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}bt=null}}else bt=St?tr(e.stateNode.nextSibling):null;return!0}function ix(){for(var e=bt;e;)e=tr(e.nextSibling)}function Ns(){bt=St=null,ve=!1}function $d(e){Vt===null?Vt=[e]:Vt.push(e)}var XN=In.ReactCurrentBatchConfig;function Gs(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(U(309));var s=r.stateNode}if(!s)throw Error(U(147,e));var a=s,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(i){var l=a.refs;i===null?delete l[o]:l[o]=i},t._stringRef=o,t)}if(typeof e!="string")throw Error(U(284));if(!r._owner)throw Error(U(290,e))}return e}function vo(e,t){throw e=Object.prototype.toString.call(t),Error(U(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Zm(e){var t=e._init;return t(e._payload)}function lx(e){function t(f,x){if(e){var y=f.deletions;y===null?(f.deletions=[x],f.flags|=16):y.push(x)}}function r(f,x){if(!e)return null;for(;x!==null;)t(f,x),x=x.sibling;return null}function s(f,x){for(f=new Map;x!==null;)x.key!==null?f.set(x.key,x):f.set(x.index,x),x=x.sibling;return f}function a(f,x){return f=ar(f,x),f.index=0,f.sibling=null,f}function o(f,x,y){return f.index=y,e?(y=f.alternate,y!==null?(y=y.index,y<x?(f.flags|=2,x):y):(f.flags|=2,x)):(f.flags|=1048576,x)}function i(f){return e&&f.alternate===null&&(f.flags|=2),f}function l(f,x,y,N){return x===null||x.tag!==6?(x=$l(y,f.mode,N),x.return=f,x):(x=a(x,y),x.return=f,x)}function c(f,x,y,N){var b=y.type;return b===Qr?h(f,x,y.props.children,N,y.key):x!==null&&(x.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Yn&&Zm(b)===x.type)?(N=a(x,y.props),N.ref=Gs(f,x,y),N.return=f,N):(N=zo(y.type,y.key,y.props,null,f.mode,N),N.ref=Gs(f,x,y),N.return=f,N)}function u(f,x,y,N){return x===null||x.tag!==4||x.stateNode.containerInfo!==y.containerInfo||x.stateNode.implementation!==y.implementation?(x=Bl(y,f.mode,N),x.return=f,x):(x=a(x,y.children||[]),x.return=f,x)}function h(f,x,y,N,b){return x===null||x.tag!==7?(x=Dr(y,f.mode,N,b),x.return=f,x):(x=a(x,y),x.return=f,x)}function m(f,x,y){if(typeof x=="string"&&x!==""||typeof x=="number")return x=$l(""+x,f.mode,y),x.return=f,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case oo:return y=zo(x.type,x.key,x.props,null,f.mode,y),y.ref=Gs(f,null,x),y.return=f,y;case Kr:return x=Bl(x,f.mode,y),x.return=f,x;case Yn:var N=x._init;return m(f,N(x._payload),y)}if(ea(x)||Bs(x))return x=Dr(x,f.mode,y,null),x.return=f,x;vo(f,x)}return null}function g(f,x,y,N){var b=x!==null?x.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return b!==null?null:l(f,x,""+y,N);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case oo:return y.key===b?c(f,x,y,N):null;case Kr:return y.key===b?u(f,x,y,N):null;case Yn:return b=y._init,g(f,x,b(y._payload),N)}if(ea(y)||Bs(y))return b!==null?null:h(f,x,y,N,null);vo(f,y)}return null}function j(f,x,y,N,b){if(typeof N=="string"&&N!==""||typeof N=="number")return f=f.get(y)||null,l(x,f,""+N,b);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case oo:return f=f.get(N.key===null?y:N.key)||null,c(x,f,N,b);case Kr:return f=f.get(N.key===null?y:N.key)||null,u(x,f,N,b);case Yn:var T=N._init;return j(f,x,y,T(N._payload),b)}if(ea(N)||Bs(N))return f=f.get(y)||null,h(x,f,N,b,null);vo(x,N)}return null}function w(f,x,y,N){for(var b=null,T=null,D=x,E=x=0,S=null;D!==null&&E<y.length;E++){D.index>E?(S=D,D=null):S=D.sibling;var C=g(f,D,y[E],N);if(C===null){D===null&&(D=S);break}e&&D&&C.alternate===null&&t(f,D),x=o(C,x,E),T===null?b=C:T.sibling=C,T=C,D=S}if(E===y.length)return r(f,D),ve&&jr(f,E),b;if(D===null){for(;E<y.length;E++)D=m(f,y[E],N),D!==null&&(x=o(D,x,E),T===null?b=D:T.sibling=D,T=D);return ve&&jr(f,E),b}for(D=s(f,D);E<y.length;E++)S=j(D,f,E,y[E],N),S!==null&&(e&&S.alternate!==null&&D.delete(S.key===null?E:S.key),x=o(S,x,E),T===null?b=S:T.sibling=S,T=S);return e&&D.forEach(function(R){return t(f,R)}),ve&&jr(f,E),b}function v(f,x,y,N){var b=Bs(y);if(typeof b!="function")throw Error(U(150));if(y=b.call(y),y==null)throw Error(U(151));for(var T=b=null,D=x,E=x=0,S=null,C=y.next();D!==null&&!C.done;E++,C=y.next()){D.index>E?(S=D,D=null):S=D.sibling;var R=g(f,D,C.value,N);if(R===null){D===null&&(D=S);break}e&&D&&R.alternate===null&&t(f,D),x=o(R,x,E),T===null?b=R:T.sibling=R,T=R,D=S}if(C.done)return r(f,D),ve&&jr(f,E),b;if(D===null){for(;!C.done;E++,C=y.next())C=m(f,C.value,N),C!==null&&(x=o(C,x,E),T===null?b=C:T.sibling=C,T=C);return ve&&jr(f,E),b}for(D=s(f,D);!C.done;E++,C=y.next())C=j(D,f,E,C.value,N),C!==null&&(e&&C.alternate!==null&&D.delete(C.key===null?E:C.key),x=o(C,x,E),T===null?b=C:T.sibling=C,T=C);return e&&D.forEach(function(k){return t(f,k)}),ve&&jr(f,E),b}function p(f,x,y,N){if(typeof y=="object"&&y!==null&&y.type===Qr&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case oo:e:{for(var b=y.key,T=x;T!==null;){if(T.key===b){if(b=y.type,b===Qr){if(T.tag===7){r(f,T.sibling),x=a(T,y.props.children),x.return=f,f=x;break e}}else if(T.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Yn&&Zm(b)===T.type){r(f,T.sibling),x=a(T,y.props),x.ref=Gs(f,T,y),x.return=f,f=x;break e}r(f,T);break}else t(f,T);T=T.sibling}y.type===Qr?(x=Dr(y.props.children,f.mode,N,y.key),x.return=f,f=x):(N=zo(y.type,y.key,y.props,null,f.mode,N),N.ref=Gs(f,x,y),N.return=f,f=N)}return i(f);case Kr:e:{for(T=y.key;x!==null;){if(x.key===T)if(x.tag===4&&x.stateNode.containerInfo===y.containerInfo&&x.stateNode.implementation===y.implementation){r(f,x.sibling),x=a(x,y.children||[]),x.return=f,f=x;break e}else{r(f,x);break}else t(f,x);x=x.sibling}x=Bl(y,f.mode,N),x.return=f,f=x}return i(f);case Yn:return T=y._init,p(f,x,T(y._payload),N)}if(ea(y))return w(f,x,y,N);if(Bs(y))return v(f,x,y,N);vo(f,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,x!==null&&x.tag===6?(r(f,x.sibling),x=a(x,y),x.return=f,f=x):(r(f,x),x=$l(y,f.mode,N),x.return=f,f=x),i(f)):r(f,x)}return p}var bs=lx(!0),cx=lx(!1),ai=hr(null),oi=null,ss=null,Bd=null;function zd(){Bd=ss=oi=null}function Wd(e){var t=ai.current;ge(ai),e._currentValue=t}function Bc(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function us(e,t){oi=e,Bd=ss=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(xt=!0),e.firstContext=null)}function Ft(e){var t=e._currentValue;if(Bd!==e)if(e={context:e,memoizedValue:t,next:null},ss===null){if(oi===null)throw Error(U(308));ss=e,oi.dependencies={lanes:0,firstContext:e}}else ss=ss.next=e;return t}var Sr=null;function Ud(e){Sr===null?Sr=[e]:Sr.push(e)}function dx(e,t,r,s){var a=t.interleaved;return a===null?(r.next=r,Ud(t)):(r.next=a.next,a.next=r),t.interleaved=r,Mn(e,s)}function Mn(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Gn=!1;function Yd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ux(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function kn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function nr(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,le&2){var a=s.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),s.pending=t,Mn(e,r)}return a=s.interleaved,a===null?(t.next=t,Ud(s)):(t.next=a.next,a.next=t),s.interleaved=t,Mn(e,r)}function Io(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,Ed(e,r)}}function Xm(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var a=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?a=o=i:o=o.next=i,r=r.next}while(r!==null);o===null?a=o=t:o=o.next=t}else a=o=t;r={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function ii(e,t,r,s){var a=e.updateQueue;Gn=!1;var o=a.firstBaseUpdate,i=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,i===null?o=u:i.next=u,i=c;var h=e.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==i&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(o!==null){var m=a.baseState;i=0,h=u=c=null,l=o;do{var g=l.lane,j=l.eventTime;if((s&g)===g){h!==null&&(h=h.next={eventTime:j,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=e,v=l;switch(g=t,j=r,v.tag){case 1:if(w=v.payload,typeof w=="function"){m=w.call(j,m,g);break e}m=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=v.payload,g=typeof w=="function"?w.call(j,m,g):w,g==null)break e;m=Ne({},m,g);break e;case 2:Gn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,g=a.effects,g===null?a.effects=[l]:g.push(l))}else j={eventTime:j,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=j,c=m):h=h.next=j,i|=g;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;g=l,l=g.next,g.next=null,a.lastBaseUpdate=g,a.shared.pending=null}}while(!0);if(h===null&&(c=m),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=h,t=a.shared.interleaved,t!==null){a=t;do i|=a.lane,a=a.next;while(a!==t)}else o===null&&(a.shared.lanes=0);Or|=i,e.lanes=i,e.memoizedState=m}}function Jm(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],a=s.callback;if(a!==null){if(s.callback=null,s=r,typeof a!="function")throw Error(U(191,a));a.call(s)}}}var Za={},mn=hr(Za),Ea=hr(Za),Ma=hr(Za);function Cr(e){if(e===Za)throw Error(U(174));return e}function Gd(e,t){switch(fe(Ma,t),fe(Ea,e),fe(mn,Za),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:jc(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=jc(t,e)}ge(mn),fe(mn,t)}function Ss(){ge(mn),ge(Ea),ge(Ma)}function mx(e){Cr(Ma.current);var t=Cr(mn.current),r=jc(t,e.type);t!==r&&(fe(Ea,e),fe(mn,r))}function Hd(e){Ea.current===e&&(ge(mn),ge(Ea))}var je=hr(0);function li(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Al=[];function Vd(){for(var e=0;e<Al.length;e++)Al[e]._workInProgressVersionPrimary=null;Al.length=0}var Fo=In.ReactCurrentDispatcher,Ol=In.ReactCurrentBatchConfig,Ar=0,we=null,Be=null,Ye=null,ci=!1,ua=!1,Ra=0,JN=0;function Ze(){throw Error(U(321))}function qd(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Xt(e[r],t[r]))return!1;return!0}function Kd(e,t,r,s,a,o){if(Ar=o,we=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Fo.current=e===null||e.memoizedState===null?r0:s0,e=r(s,a),ua){o=0;do{if(ua=!1,Ra=0,25<=o)throw Error(U(301));o+=1,Ye=Be=null,t.updateQueue=null,Fo.current=a0,e=r(s,a)}while(ua)}if(Fo.current=di,t=Be!==null&&Be.next!==null,Ar=0,Ye=Be=we=null,ci=!1,t)throw Error(U(300));return e}function Qd(){var e=Ra!==0;return Ra=0,e}function an(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ye===null?we.memoizedState=Ye=e:Ye=Ye.next=e,Ye}function _t(){if(Be===null){var e=we.alternate;e=e!==null?e.memoizedState:null}else e=Be.next;var t=Ye===null?we.memoizedState:Ye.next;if(t!==null)Ye=t,Be=e;else{if(e===null)throw Error(U(310));Be=e,e={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},Ye===null?we.memoizedState=Ye=e:Ye=Ye.next=e}return Ye}function Pa(e,t){return typeof t=="function"?t(e):t}function Il(e){var t=_t(),r=t.queue;if(r===null)throw Error(U(311));r.lastRenderedReducer=e;var s=Be,a=s.baseQueue,o=r.pending;if(o!==null){if(a!==null){var i=a.next;a.next=o.next,o.next=i}s.baseQueue=a=o,r.pending=null}if(a!==null){o=a.next,s=s.baseState;var l=i=null,c=null,u=o;do{var h=u.lane;if((Ar&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:e(s,u.action);else{var m={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=m,i=s):c=c.next=m,we.lanes|=h,Or|=h}u=u.next}while(u!==null&&u!==o);c===null?i=s:c.next=l,Xt(s,t.memoizedState)||(xt=!0),t.memoizedState=s,t.baseState=i,t.baseQueue=c,r.lastRenderedState=s}if(e=r.interleaved,e!==null){a=e;do o=a.lane,we.lanes|=o,Or|=o,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Fl(e){var t=_t(),r=t.queue;if(r===null)throw Error(U(311));r.lastRenderedReducer=e;var s=r.dispatch,a=r.pending,o=t.memoizedState;if(a!==null){r.pending=null;var i=a=a.next;do o=e(o,i.action),i=i.next;while(i!==a);Xt(o,t.memoizedState)||(xt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,s]}function fx(){}function hx(e,t){var r=we,s=_t(),a=t(),o=!Xt(s.memoizedState,a);if(o&&(s.memoizedState=a,xt=!0),s=s.queue,Zd(gx.bind(null,r,s,e),[e]),s.getSnapshot!==t||o||Ye!==null&&Ye.memoizedState.tag&1){if(r.flags|=2048,Aa(9,xx.bind(null,r,s,a,t),void 0,null),Ge===null)throw Error(U(349));Ar&30||px(r,t,a)}return a}function px(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=we.updateQueue,t===null?(t={lastEffect:null,stores:null},we.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function xx(e,t,r,s){t.value=r,t.getSnapshot=s,vx(t)&&yx(e)}function gx(e,t,r){return r(function(){vx(t)&&yx(e)})}function vx(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Xt(e,r)}catch{return!0}}function yx(e){var t=Mn(e,1);t!==null&&Qt(t,e,1,-1)}function ef(e){var t=an();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pa,lastRenderedState:e},t.queue=e,e=e.dispatch=n0.bind(null,we,e),[t.memoizedState,e]}function Aa(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=we.updateQueue,t===null?(t={lastEffect:null,stores:null},we.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function jx(){return _t().memoizedState}function _o(e,t,r,s){var a=an();we.flags|=e,a.memoizedState=Aa(1|t,r,void 0,s===void 0?null:s)}function Fi(e,t,r,s){var a=_t();s=s===void 0?null:s;var o=void 0;if(Be!==null){var i=Be.memoizedState;if(o=i.destroy,s!==null&&qd(s,i.deps)){a.memoizedState=Aa(t,r,o,s);return}}we.flags|=e,a.memoizedState=Aa(1|t,r,o,s)}function tf(e,t){return _o(8390656,8,e,t)}function Zd(e,t){return Fi(2048,8,e,t)}function wx(e,t){return Fi(4,2,e,t)}function Nx(e,t){return Fi(4,4,e,t)}function bx(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Sx(e,t,r){return r=r!=null?r.concat([e]):null,Fi(4,4,bx.bind(null,t,e),r)}function Xd(){}function Cx(e,t){var r=_t();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&qd(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function kx(e,t){var r=_t();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&qd(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function Dx(e,t,r){return Ar&21?(Xt(r,t)||(r=Pp(),we.lanes|=r,Or|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,xt=!0),e.memoizedState=r)}function e0(e,t){var r=ue;ue=r!==0&&4>r?r:4,e(!0);var s=Ol.transition;Ol.transition={};try{e(!1),t()}finally{ue=r,Ol.transition=s}}function Tx(){return _t().memoizedState}function t0(e,t,r){var s=sr(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},Ex(e))Mx(t,r);else if(r=dx(e,t,r,s),r!==null){var a=st();Qt(r,e,s,a),Rx(r,t,s)}}function n0(e,t,r){var s=sr(e),a={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ex(e))Mx(t,a);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var i=t.lastRenderedState,l=o(i,r);if(a.hasEagerState=!0,a.eagerState=l,Xt(l,i)){var c=t.interleaved;c===null?(a.next=a,Ud(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=dx(e,t,a,s),r!==null&&(a=st(),Qt(r,e,s,a),Rx(r,t,s))}}function Ex(e){var t=e.alternate;return e===we||t!==null&&t===we}function Mx(e,t){ua=ci=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Rx(e,t,r){if(r&4194240){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,Ed(e,r)}}var di={readContext:Ft,useCallback:Ze,useContext:Ze,useEffect:Ze,useImperativeHandle:Ze,useInsertionEffect:Ze,useLayoutEffect:Ze,useMemo:Ze,useReducer:Ze,useRef:Ze,useState:Ze,useDebugValue:Ze,useDeferredValue:Ze,useTransition:Ze,useMutableSource:Ze,useSyncExternalStore:Ze,useId:Ze,unstable_isNewReconciler:!1},r0={readContext:Ft,useCallback:function(e,t){return an().memoizedState=[e,t===void 0?null:t],e},useContext:Ft,useEffect:tf,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,_o(4194308,4,bx.bind(null,t,e),r)},useLayoutEffect:function(e,t){return _o(4194308,4,e,t)},useInsertionEffect:function(e,t){return _o(4,2,e,t)},useMemo:function(e,t){var r=an();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=an();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=t0.bind(null,we,e),[s.memoizedState,e]},useRef:function(e){var t=an();return e={current:e},t.memoizedState=e},useState:ef,useDebugValue:Xd,useDeferredValue:function(e){return an().memoizedState=e},useTransition:function(){var e=ef(!1),t=e[0];return e=e0.bind(null,e[1]),an().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=we,a=an();if(ve){if(r===void 0)throw Error(U(407));r=r()}else{if(r=t(),Ge===null)throw Error(U(349));Ar&30||px(s,t,r)}a.memoizedState=r;var o={value:r,getSnapshot:t};return a.queue=o,tf(gx.bind(null,s,o,e),[e]),s.flags|=2048,Aa(9,xx.bind(null,s,o,r,t),void 0,null),r},useId:function(){var e=an(),t=Ge.identifierPrefix;if(ve){var r=Sn,s=bn;r=(s&~(1<<32-Kt(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=Ra++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=JN++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},s0={readContext:Ft,useCallback:Cx,useContext:Ft,useEffect:Zd,useImperativeHandle:Sx,useInsertionEffect:wx,useLayoutEffect:Nx,useMemo:kx,useReducer:Il,useRef:jx,useState:function(){return Il(Pa)},useDebugValue:Xd,useDeferredValue:function(e){var t=_t();return Dx(t,Be.memoizedState,e)},useTransition:function(){var e=Il(Pa)[0],t=_t().memoizedState;return[e,t]},useMutableSource:fx,useSyncExternalStore:hx,useId:Tx,unstable_isNewReconciler:!1},a0={readContext:Ft,useCallback:Cx,useContext:Ft,useEffect:Zd,useImperativeHandle:Sx,useInsertionEffect:wx,useLayoutEffect:Nx,useMemo:kx,useReducer:Fl,useRef:jx,useState:function(){return Fl(Pa)},useDebugValue:Xd,useDeferredValue:function(e){var t=_t();return Be===null?t.memoizedState=e:Dx(t,Be.memoizedState,e)},useTransition:function(){var e=Fl(Pa)[0],t=_t().memoizedState;return[e,t]},useMutableSource:fx,useSyncExternalStore:hx,useId:Tx,unstable_isNewReconciler:!1};function Gt(e,t){if(e&&e.defaultProps){t=Ne({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function zc(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:Ne({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var _i={isMounted:function(e){return(e=e._reactInternals)?Br(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=st(),a=sr(e),o=kn(s,a);o.payload=t,r!=null&&(o.callback=r),t=nr(e,o,a),t!==null&&(Qt(t,e,a,s),Io(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=st(),a=sr(e),o=kn(s,a);o.tag=1,o.payload=t,r!=null&&(o.callback=r),t=nr(e,o,a),t!==null&&(Qt(t,e,a,s),Io(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=st(),s=sr(e),a=kn(r,s);a.tag=2,t!=null&&(a.callback=t),t=nr(e,a,s),t!==null&&(Qt(t,e,s,r),Io(t,e,s))}};function nf(e,t,r,s,a,o,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,o,i):t.prototype&&t.prototype.isPureReactComponent?!Ca(r,s)||!Ca(a,o):!0}function Px(e,t,r){var s=!1,a=cr,o=t.contextType;return typeof o=="object"&&o!==null?o=Ft(o):(a=vt(t)?Rr:et.current,s=t.contextTypes,o=(s=s!=null)?ws(e,a):cr),t=new t(r,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=_i,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=o),t}function rf(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&_i.enqueueReplaceState(t,t.state,null)}function Wc(e,t,r,s){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Yd(e);var o=t.contextType;typeof o=="object"&&o!==null?a.context=Ft(o):(o=vt(t)?Rr:et.current,a.context=ws(e,o)),a.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(zc(e,t,o,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&_i.enqueueReplaceState(a,a.state,null),ii(e,r,a,s),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Cs(e,t){try{var r="",s=t;do r+=Aw(s),s=s.return;while(s);var a=r}catch(o){a=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:a,digest:null}}function _l(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Uc(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var o0=typeof WeakMap=="function"?WeakMap:Map;function Ax(e,t,r){r=kn(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){mi||(mi=!0,Jc=s),Uc(e,t)},r}function Ox(e,t,r){r=kn(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var a=t.value;r.payload=function(){return s(a)},r.callback=function(){Uc(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){Uc(e,t),typeof s!="function"&&(rr===null?rr=new Set([this]):rr.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),r}function sf(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new o0;var a=new Set;s.set(t,a)}else a=s.get(t),a===void 0&&(a=new Set,s.set(t,a));a.has(r)||(a.add(r),e=j0.bind(null,e,t,r),t.then(e,e))}function af(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function of(e,t,r,s,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=kn(-1,1),t.tag=2,nr(r,t,1))),r.lanes|=1),e)}var i0=In.ReactCurrentOwner,xt=!1;function nt(e,t,r,s){t.child=e===null?cx(t,null,r,s):bs(t,e.child,r,s)}function lf(e,t,r,s,a){r=r.render;var o=t.ref;return us(t,a),s=Kd(e,t,r,s,o,a),r=Qd(),e!==null&&!xt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Rn(e,t,a)):(ve&&r&&_d(t),t.flags|=1,nt(e,t,s,a),t.child)}function cf(e,t,r,s,a){if(e===null){var o=r.type;return typeof o=="function"&&!ou(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=o,Ix(e,t,o,s,a)):(e=zo(r.type,null,s,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&a)){var i=o.memoizedProps;if(r=r.compare,r=r!==null?r:Ca,r(i,s)&&e.ref===t.ref)return Rn(e,t,a)}return t.flags|=1,e=ar(o,s),e.ref=t.ref,e.return=t,t.child=e}function Ix(e,t,r,s,a){if(e!==null){var o=e.memoizedProps;if(Ca(o,s)&&e.ref===t.ref)if(xt=!1,t.pendingProps=s=o,(e.lanes&a)!==0)e.flags&131072&&(xt=!0);else return t.lanes=e.lanes,Rn(e,t,a)}return Yc(e,t,r,s,a)}function Fx(e,t,r){var s=t.pendingProps,a=s.children,o=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},fe(os,wt),wt|=r;else{if(!(r&1073741824))return e=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,fe(os,wt),wt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=o!==null?o.baseLanes:r,fe(os,wt),wt|=s}else o!==null?(s=o.baseLanes|r,t.memoizedState=null):s=r,fe(os,wt),wt|=s;return nt(e,t,a,r),t.child}function _x(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Yc(e,t,r,s,a){var o=vt(r)?Rr:et.current;return o=ws(t,o),us(t,a),r=Kd(e,t,r,s,o,a),s=Qd(),e!==null&&!xt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Rn(e,t,a)):(ve&&s&&_d(t),t.flags|=1,nt(e,t,r,a),t.child)}function df(e,t,r,s,a){if(vt(r)){var o=!0;ni(t)}else o=!1;if(us(t,a),t.stateNode===null)Lo(e,t),Px(t,r,s),Wc(t,r,s,a),s=!0;else if(e===null){var i=t.stateNode,l=t.memoizedProps;i.props=l;var c=i.context,u=r.contextType;typeof u=="object"&&u!==null?u=Ft(u):(u=vt(r)?Rr:et.current,u=ws(t,u));var h=r.getDerivedStateFromProps,m=typeof h=="function"||typeof i.getSnapshotBeforeUpdate=="function";m||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==s||c!==u)&&rf(t,i,s,u),Gn=!1;var g=t.memoizedState;i.state=g,ii(t,s,i,a),c=t.memoizedState,l!==s||g!==c||gt.current||Gn?(typeof h=="function"&&(zc(t,r,h,s),c=t.memoizedState),(l=Gn||nf(t,r,l,s,g,c,u))?(m||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),i.props=s,i.state=c,i.context=u,s=l):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{i=t.stateNode,ux(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Gt(t.type,l),i.props=u,m=t.pendingProps,g=i.context,c=r.contextType,typeof c=="object"&&c!==null?c=Ft(c):(c=vt(r)?Rr:et.current,c=ws(t,c));var j=r.getDerivedStateFromProps;(h=typeof j=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==m||g!==c)&&rf(t,i,s,c),Gn=!1,g=t.memoizedState,i.state=g,ii(t,s,i,a);var w=t.memoizedState;l!==m||g!==w||gt.current||Gn?(typeof j=="function"&&(zc(t,r,j,s),w=t.memoizedState),(u=Gn||nf(t,r,u,s,g,w,c)||!1)?(h||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(s,w,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(s,w,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=w),i.props=s,i.state=w,i.context=c,s=u):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),s=!1)}return Gc(e,t,r,s,o,a)}function Gc(e,t,r,s,a,o){_x(e,t);var i=(t.flags&128)!==0;if(!s&&!i)return a&&qm(t,r,!1),Rn(e,t,o);s=t.stateNode,i0.current=t;var l=i&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&i?(t.child=bs(t,e.child,null,o),t.child=bs(t,null,l,o)):nt(e,t,l,o),t.memoizedState=s.state,a&&qm(t,r,!0),t.child}function Lx(e){var t=e.stateNode;t.pendingContext?Vm(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Vm(e,t.context,!1),Gd(e,t.containerInfo)}function uf(e,t,r,s,a){return Ns(),$d(a),t.flags|=256,nt(e,t,r,s),t.child}var Hc={dehydrated:null,treeContext:null,retryLane:0};function Vc(e){return{baseLanes:e,cachePool:null,transitions:null}}function $x(e,t,r){var s=t.pendingProps,a=je.current,o=!1,i=(t.flags&128)!==0,l;if((l=i)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),fe(je,a&1),e===null)return $c(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=s.children,e=s.fallback,o?(s=t.mode,o=t.child,i={mode:"hidden",children:i},!(s&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=Bi(i,s,0,null),e=Dr(e,s,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Vc(r),t.memoizedState=Hc,e):Jd(t,i));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return l0(e,t,i,s,l,a,r);if(o){o=s.fallback,i=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:s.children};return!(i&1)&&t.child!==a?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=ar(a,c),s.subtreeFlags=a.subtreeFlags&14680064),l!==null?o=ar(l,o):(o=Dr(o,i,r,null),o.flags|=2),o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,i=e.child.memoizedState,i=i===null?Vc(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=e.childLanes&~r,t.memoizedState=Hc,s}return o=e.child,e=o.sibling,s=ar(o,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function Jd(e,t){return t=Bi({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function yo(e,t,r,s){return s!==null&&$d(s),bs(t,e.child,null,r),e=Jd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function l0(e,t,r,s,a,o,i){if(r)return t.flags&256?(t.flags&=-257,s=_l(Error(U(422))),yo(e,t,i,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=s.fallback,a=t.mode,s=Bi({mode:"visible",children:s.children},a,0,null),o=Dr(o,a,i,null),o.flags|=2,s.return=t,o.return=t,s.sibling=o,t.child=s,t.mode&1&&bs(t,e.child,null,i),t.child.memoizedState=Vc(i),t.memoizedState=Hc,o);if(!(t.mode&1))return yo(e,t,i,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var l=s.dgst;return s=l,o=Error(U(419)),s=_l(o,s,void 0),yo(e,t,i,s)}if(l=(i&e.childLanes)!==0,xt||l){if(s=Ge,s!==null){switch(i&-i){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|i)?0:a,a!==0&&a!==o.retryLane&&(o.retryLane=a,Mn(e,a),Qt(s,e,a,-1))}return au(),s=_l(Error(U(421))),yo(e,t,i,s)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=w0.bind(null,e),a._reactRetry=t,null):(e=o.treeContext,bt=tr(a.nextSibling),St=t,ve=!0,Vt=null,e!==null&&(Rt[Pt++]=bn,Rt[Pt++]=Sn,Rt[Pt++]=Pr,bn=e.id,Sn=e.overflow,Pr=t),t=Jd(t,s.children),t.flags|=4096,t)}function mf(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Bc(e.return,t,r)}function Ll(e,t,r,s,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=s,o.tail=r,o.tailMode=a)}function Bx(e,t,r){var s=t.pendingProps,a=s.revealOrder,o=s.tail;if(nt(e,t,s.children,r),s=je.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&mf(e,r,t);else if(e.tag===19)mf(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(fe(je,s),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&li(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Ll(t,!1,a,r,o);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&li(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Ll(t,!0,r,null,o);break;case"together":Ll(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Lo(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Rn(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Or|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(U(153));if(t.child!==null){for(e=t.child,r=ar(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=ar(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function c0(e,t,r){switch(t.tag){case 3:Lx(t),Ns();break;case 5:mx(t);break;case 1:vt(t.type)&&ni(t);break;case 4:Gd(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,a=t.memoizedProps.value;fe(ai,s._currentValue),s._currentValue=a;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(fe(je,je.current&1),t.flags|=128,null):r&t.child.childLanes?$x(e,t,r):(fe(je,je.current&1),e=Rn(e,t,r),e!==null?e.sibling:null);fe(je,je.current&1);break;case 19:if(s=(r&t.childLanes)!==0,e.flags&128){if(s)return Bx(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),fe(je,je.current),s)break;return null;case 22:case 23:return t.lanes=0,Fx(e,t,r)}return Rn(e,t,r)}var zx,qc,Wx,Ux;zx=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};qc=function(){};Wx=function(e,t,r,s){var a=e.memoizedProps;if(a!==s){e=t.stateNode,Cr(mn.current);var o=null;switch(r){case"input":a=xc(e,a),s=xc(e,s),o=[];break;case"select":a=Ne({},a,{value:void 0}),s=Ne({},s,{value:void 0}),o=[];break;case"textarea":a=yc(e,a),s=yc(e,s),o=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=ei)}wc(r,s);var i;r=null;for(u in a)if(!s.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(i in l)l.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(va.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in s){var c=s[u];if(l=a!=null?a[u]:void 0,s.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(o||(o=[]),o.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(va.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&xe("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}r&&(o=o||[]).push("style",r);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};Ux=function(e,t,r,s){r!==s&&(t.flags|=4)};function Hs(e,t){if(!ve)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Xe(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function d0(e,t,r){var s=t.pendingProps;switch(Ld(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xe(t),null;case 1:return vt(t.type)&&ti(),Xe(t),null;case 3:return s=t.stateNode,Ss(),ge(gt),ge(et),Vd(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(go(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Vt!==null&&(nd(Vt),Vt=null))),qc(e,t),Xe(t),null;case 5:Hd(t);var a=Cr(Ma.current);if(r=t.type,e!==null&&t.stateNode!=null)Wx(e,t,r,s,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(U(166));return Xe(t),null}if(e=Cr(mn.current),go(t)){s=t.stateNode,r=t.type;var o=t.memoizedProps;switch(s[ln]=t,s[Ta]=o,e=(t.mode&1)!==0,r){case"dialog":xe("cancel",s),xe("close",s);break;case"iframe":case"object":case"embed":xe("load",s);break;case"video":case"audio":for(a=0;a<na.length;a++)xe(na[a],s);break;case"source":xe("error",s);break;case"img":case"image":case"link":xe("error",s),xe("load",s);break;case"details":xe("toggle",s);break;case"input":jm(s,o),xe("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!o.multiple},xe("invalid",s);break;case"textarea":Nm(s,o),xe("invalid",s)}wc(r,o),a=null;for(var i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="children"?typeof l=="string"?s.textContent!==l&&(o.suppressHydrationWarning!==!0&&xo(s.textContent,l,e),a=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&xo(s.textContent,l,e),a=["children",""+l]):va.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&xe("scroll",s)}switch(r){case"input":io(s),wm(s,o,!0);break;case"textarea":io(s),bm(s);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(s.onclick=ei)}s=a,t.updateQueue=s,s!==null&&(t.flags|=4)}else{i=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=gp(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=i.createElement(r,{is:s.is}):(e=i.createElement(r),r==="select"&&(i=e,s.multiple?i.multiple=!0:s.size&&(i.size=s.size))):e=i.createElementNS(e,r),e[ln]=t,e[Ta]=s,zx(e,t,!1,!1),t.stateNode=e;e:{switch(i=Nc(r,s),r){case"dialog":xe("cancel",e),xe("close",e),a=s;break;case"iframe":case"object":case"embed":xe("load",e),a=s;break;case"video":case"audio":for(a=0;a<na.length;a++)xe(na[a],e);a=s;break;case"source":xe("error",e),a=s;break;case"img":case"image":case"link":xe("error",e),xe("load",e),a=s;break;case"details":xe("toggle",e),a=s;break;case"input":jm(e,s),a=xc(e,s),xe("invalid",e);break;case"option":a=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},a=Ne({},s,{value:void 0}),xe("invalid",e);break;case"textarea":Nm(e,s),a=yc(e,s),xe("invalid",e);break;default:a=s}wc(r,a),l=a;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?jp(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&vp(e,c)):o==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&ya(e,c):typeof c=="number"&&ya(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(va.hasOwnProperty(o)?c!=null&&o==="onScroll"&&xe("scroll",e):c!=null&&bd(e,o,c,i))}switch(r){case"input":io(e),wm(e,s,!1);break;case"textarea":io(e),bm(e);break;case"option":s.value!=null&&e.setAttribute("value",""+lr(s.value));break;case"select":e.multiple=!!s.multiple,o=s.value,o!=null?is(e,!!s.multiple,o,!1):s.defaultValue!=null&&is(e,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=ei)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Xe(t),null;case 6:if(e&&t.stateNode!=null)Ux(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(U(166));if(r=Cr(Ma.current),Cr(mn.current),go(t)){if(s=t.stateNode,r=t.memoizedProps,s[ln]=t,(o=s.nodeValue!==r)&&(e=St,e!==null))switch(e.tag){case 3:xo(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&xo(s.nodeValue,r,(e.mode&1)!==0)}o&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[ln]=t,t.stateNode=s}return Xe(t),null;case 13:if(ge(je),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ve&&bt!==null&&t.mode&1&&!(t.flags&128))ix(),Ns(),t.flags|=98560,o=!1;else if(o=go(t),s!==null&&s.dehydrated!==null){if(e===null){if(!o)throw Error(U(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(U(317));o[ln]=t}else Ns(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Xe(t),o=!1}else Vt!==null&&(nd(Vt),Vt=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||je.current&1?ze===0&&(ze=3):au())),t.updateQueue!==null&&(t.flags|=4),Xe(t),null);case 4:return Ss(),qc(e,t),e===null&&ka(t.stateNode.containerInfo),Xe(t),null;case 10:return Wd(t.type._context),Xe(t),null;case 17:return vt(t.type)&&ti(),Xe(t),null;case 19:if(ge(je),o=t.memoizedState,o===null)return Xe(t),null;if(s=(t.flags&128)!==0,i=o.rendering,i===null)if(s)Hs(o,!1);else{if(ze!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=li(e),i!==null){for(t.flags|=128,Hs(o,!1),s=i.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)o=r,e=s,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,e=i.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return fe(je,je.current&1|2),t.child}e=e.sibling}o.tail!==null&&Me()>ks&&(t.flags|=128,s=!0,Hs(o,!1),t.lanes=4194304)}else{if(!s)if(e=li(i),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Hs(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!ve)return Xe(t),null}else 2*Me()-o.renderingStartTime>ks&&r!==1073741824&&(t.flags|=128,s=!0,Hs(o,!1),t.lanes=4194304);o.isBackwards?(i.sibling=t.child,t.child=i):(r=o.last,r!==null?r.sibling=i:t.child=i,o.last=i)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Me(),t.sibling=null,r=je.current,fe(je,s?r&1|2:r&1),t):(Xe(t),null);case 22:case 23:return su(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?wt&1073741824&&(Xe(t),t.subtreeFlags&6&&(t.flags|=8192)):Xe(t),null;case 24:return null;case 25:return null}throw Error(U(156,t.tag))}function u0(e,t){switch(Ld(t),t.tag){case 1:return vt(t.type)&&ti(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ss(),ge(gt),ge(et),Vd(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Hd(t),null;case 13:if(ge(je),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(U(340));Ns()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ge(je),null;case 4:return Ss(),null;case 10:return Wd(t.type._context),null;case 22:case 23:return su(),null;case 24:return null;default:return null}}var jo=!1,Je=!1,m0=typeof WeakSet=="function"?WeakSet:Set,q=null;function as(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){Se(e,t,s)}else r.current=null}function Kc(e,t,r){try{r()}catch(s){Se(e,t,s)}}var ff=!1;function f0(e,t){if(Pc=Zo,e=qp(),Fd(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var a=s.anchorOffset,o=s.focusNode;s=s.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var i=0,l=-1,c=-1,u=0,h=0,m=e,g=null;t:for(;;){for(var j;m!==r||a!==0&&m.nodeType!==3||(l=i+a),m!==o||s!==0&&m.nodeType!==3||(c=i+s),m.nodeType===3&&(i+=m.nodeValue.length),(j=m.firstChild)!==null;)g=m,m=j;for(;;){if(m===e)break t;if(g===r&&++u===a&&(l=i),g===o&&++h===s&&(c=i),(j=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=j}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ac={focusedElem:e,selectionRange:r},Zo=!1,q=t;q!==null;)if(t=q,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,q=e;else for(;q!==null;){t=q;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var v=w.memoizedProps,p=w.memoizedState,f=t.stateNode,x=f.getSnapshotBeforeUpdate(t.elementType===t.type?v:Gt(t.type,v),p);f.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(N){Se(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,q=e;break}q=t.return}return w=ff,ff=!1,w}function ma(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&e)===e){var o=a.destroy;a.destroy=void 0,o!==void 0&&Kc(t,r,o)}a=a.next}while(a!==s)}}function Li(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function Qc(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Yx(e){var t=e.alternate;t!==null&&(e.alternate=null,Yx(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ln],delete t[Ta],delete t[Fc],delete t[KN],delete t[QN])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Gx(e){return e.tag===5||e.tag===3||e.tag===4}function hf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Gx(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Zc(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=ei));else if(s!==4&&(e=e.child,e!==null))for(Zc(e,t,r),e=e.sibling;e!==null;)Zc(e,t,r),e=e.sibling}function Xc(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(Xc(e,t,r),e=e.sibling;e!==null;)Xc(e,t,r),e=e.sibling}var Ve=null,Ht=!1;function $n(e,t,r){for(r=r.child;r!==null;)Hx(e,t,r),r=r.sibling}function Hx(e,t,r){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(Mi,r)}catch{}switch(r.tag){case 5:Je||as(r,t);case 6:var s=Ve,a=Ht;Ve=null,$n(e,t,r),Ve=s,Ht=a,Ve!==null&&(Ht?(e=Ve,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ve.removeChild(r.stateNode));break;case 18:Ve!==null&&(Ht?(e=Ve,r=r.stateNode,e.nodeType===8?Rl(e.parentNode,r):e.nodeType===1&&Rl(e,r),ba(e)):Rl(Ve,r.stateNode));break;case 4:s=Ve,a=Ht,Ve=r.stateNode.containerInfo,Ht=!0,$n(e,t,r),Ve=s,Ht=a;break;case 0:case 11:case 14:case 15:if(!Je&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var o=a,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&Kc(r,t,i),a=a.next}while(a!==s)}$n(e,t,r);break;case 1:if(!Je&&(as(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(l){Se(r,t,l)}$n(e,t,r);break;case 21:$n(e,t,r);break;case 22:r.mode&1?(Je=(s=Je)||r.memoizedState!==null,$n(e,t,r),Je=s):$n(e,t,r);break;default:$n(e,t,r)}}function pf(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new m0),t.forEach(function(s){var a=N0.bind(null,e,s);r.has(s)||(r.add(s),s.then(a,a))})}}function Yt(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var a=r[s];try{var o=e,i=t,l=i;e:for(;l!==null;){switch(l.tag){case 5:Ve=l.stateNode,Ht=!1;break e;case 3:Ve=l.stateNode.containerInfo,Ht=!0;break e;case 4:Ve=l.stateNode.containerInfo,Ht=!0;break e}l=l.return}if(Ve===null)throw Error(U(160));Hx(o,i,a),Ve=null,Ht=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){Se(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Vx(t,e),t=t.sibling}function Vx(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Yt(t,e),sn(e),s&4){try{ma(3,e,e.return),Li(3,e)}catch(v){Se(e,e.return,v)}try{ma(5,e,e.return)}catch(v){Se(e,e.return,v)}}break;case 1:Yt(t,e),sn(e),s&512&&r!==null&&as(r,r.return);break;case 5:if(Yt(t,e),sn(e),s&512&&r!==null&&as(r,r.return),e.flags&32){var a=e.stateNode;try{ya(a,"")}catch(v){Se(e,e.return,v)}}if(s&4&&(a=e.stateNode,a!=null)){var o=e.memoizedProps,i=r!==null?r.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&pp(a,o),Nc(l,i);var u=Nc(l,o);for(i=0;i<c.length;i+=2){var h=c[i],m=c[i+1];h==="style"?jp(a,m):h==="dangerouslySetInnerHTML"?vp(a,m):h==="children"?ya(a,m):bd(a,h,m,u)}switch(l){case"input":gc(a,o);break;case"textarea":xp(a,o);break;case"select":var g=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var j=o.value;j!=null?is(a,!!o.multiple,j,!1):g!==!!o.multiple&&(o.defaultValue!=null?is(a,!!o.multiple,o.defaultValue,!0):is(a,!!o.multiple,o.multiple?[]:"",!1))}a[Ta]=o}catch(v){Se(e,e.return,v)}}break;case 6:if(Yt(t,e),sn(e),s&4){if(e.stateNode===null)throw Error(U(162));a=e.stateNode,o=e.memoizedProps;try{a.nodeValue=o}catch(v){Se(e,e.return,v)}}break;case 3:if(Yt(t,e),sn(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{ba(t.containerInfo)}catch(v){Se(e,e.return,v)}break;case 4:Yt(t,e),sn(e);break;case 13:Yt(t,e),sn(e),a=e.child,a.flags&8192&&(o=a.memoizedState!==null,a.stateNode.isHidden=o,!o||a.alternate!==null&&a.alternate.memoizedState!==null||(nu=Me())),s&4&&pf(e);break;case 22:if(h=r!==null&&r.memoizedState!==null,e.mode&1?(Je=(u=Je)||h,Yt(t,e),Je=u):Yt(t,e),sn(e),s&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!h&&e.mode&1)for(q=e,h=e.child;h!==null;){for(m=q=h;q!==null;){switch(g=q,j=g.child,g.tag){case 0:case 11:case 14:case 15:ma(4,g,g.return);break;case 1:as(g,g.return);var w=g.stateNode;if(typeof w.componentWillUnmount=="function"){s=g,r=g.return;try{t=s,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(v){Se(s,r,v)}}break;case 5:as(g,g.return);break;case 22:if(g.memoizedState!==null){gf(m);continue}}j!==null?(j.return=g,q=j):gf(m)}h=h.sibling}e:for(h=null,m=e;;){if(m.tag===5){if(h===null){h=m;try{a=m.stateNode,u?(o=a.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=m.stateNode,c=m.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=yp("display",i))}catch(v){Se(e,e.return,v)}}}else if(m.tag===6){if(h===null)try{m.stateNode.nodeValue=u?"":m.memoizedProps}catch(v){Se(e,e.return,v)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;h===m&&(h=null),m=m.return}h===m&&(h=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Yt(t,e),sn(e),s&4&&pf(e);break;case 21:break;default:Yt(t,e),sn(e)}}function sn(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Gx(r)){var s=r;break e}r=r.return}throw Error(U(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(ya(a,""),s.flags&=-33);var o=hf(e);Xc(e,o,a);break;case 3:case 4:var i=s.stateNode.containerInfo,l=hf(e);Zc(e,l,i);break;default:throw Error(U(161))}}catch(c){Se(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function h0(e,t,r){q=e,qx(e)}function qx(e,t,r){for(var s=(e.mode&1)!==0;q!==null;){var a=q,o=a.child;if(a.tag===22&&s){var i=a.memoizedState!==null||jo;if(!i){var l=a.alternate,c=l!==null&&l.memoizedState!==null||Je;l=jo;var u=Je;if(jo=i,(Je=c)&&!u)for(q=a;q!==null;)i=q,c=i.child,i.tag===22&&i.memoizedState!==null?vf(a):c!==null?(c.return=i,q=c):vf(a);for(;o!==null;)q=o,qx(o),o=o.sibling;q=a,jo=l,Je=u}xf(e)}else a.subtreeFlags&8772&&o!==null?(o.return=a,q=o):xf(e)}}function xf(e){for(;q!==null;){var t=q;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Je||Li(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Je)if(r===null)s.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Gt(t.type,r.memoizedProps);s.componentDidUpdate(a,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Jm(t,o,s);break;case 3:var i=t.updateQueue;if(i!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Jm(t,i,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var m=h.dehydrated;m!==null&&ba(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}Je||t.flags&512&&Qc(t)}catch(g){Se(t,t.return,g)}}if(t===e){q=null;break}if(r=t.sibling,r!==null){r.return=t.return,q=r;break}q=t.return}}function gf(e){for(;q!==null;){var t=q;if(t===e){q=null;break}var r=t.sibling;if(r!==null){r.return=t.return,q=r;break}q=t.return}}function vf(e){for(;q!==null;){var t=q;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Li(4,t)}catch(c){Se(t,r,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var a=t.return;try{s.componentDidMount()}catch(c){Se(t,a,c)}}var o=t.return;try{Qc(t)}catch(c){Se(t,o,c)}break;case 5:var i=t.return;try{Qc(t)}catch(c){Se(t,i,c)}}}catch(c){Se(t,t.return,c)}if(t===e){q=null;break}var l=t.sibling;if(l!==null){l.return=t.return,q=l;break}q=t.return}}var p0=Math.ceil,ui=In.ReactCurrentDispatcher,eu=In.ReactCurrentOwner,Ot=In.ReactCurrentBatchConfig,le=0,Ge=null,Ae=null,Ke=0,wt=0,os=hr(0),ze=0,Oa=null,Or=0,$i=0,tu=0,fa=null,pt=null,nu=0,ks=1/0,wn=null,mi=!1,Jc=null,rr=null,wo=!1,Kn=null,fi=0,ha=0,ed=null,$o=-1,Bo=0;function st(){return le&6?Me():$o!==-1?$o:$o=Me()}function sr(e){return e.mode&1?le&2&&Ke!==0?Ke&-Ke:XN.transition!==null?(Bo===0&&(Bo=Pp()),Bo):(e=ue,e!==0||(e=window.event,e=e===void 0?16:$p(e.type)),e):1}function Qt(e,t,r,s){if(50<ha)throw ha=0,ed=null,Error(U(185));qa(e,r,s),(!(le&2)||e!==Ge)&&(e===Ge&&(!(le&2)&&($i|=r),ze===4&&Vn(e,Ke)),yt(e,s),r===1&&le===0&&!(t.mode&1)&&(ks=Me()+500,Ii&&pr()))}function yt(e,t){var r=e.callbackNode;Xw(e,t);var s=Qo(e,e===Ge?Ke:0);if(s===0)r!==null&&km(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&km(r),t===1)e.tag===0?ZN(yf.bind(null,e)):sx(yf.bind(null,e)),VN(function(){!(le&6)&&pr()}),r=null;else{switch(Ap(s)){case 1:r=Td;break;case 4:r=Mp;break;case 16:r=Ko;break;case 536870912:r=Rp;break;default:r=Ko}r=ng(r,Kx.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Kx(e,t){if($o=-1,Bo=0,le&6)throw Error(U(327));var r=e.callbackNode;if(ms()&&e.callbackNode!==r)return null;var s=Qo(e,e===Ge?Ke:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=hi(e,s);else{t=s;var a=le;le|=2;var o=Zx();(Ge!==e||Ke!==t)&&(wn=null,ks=Me()+500,kr(e,t));do try{v0();break}catch(l){Qx(e,l)}while(!0);zd(),ui.current=o,le=a,Ae!==null?t=0:(Ge=null,Ke=0,t=ze)}if(t!==0){if(t===2&&(a=Dc(e),a!==0&&(s=a,t=td(e,a))),t===1)throw r=Oa,kr(e,0),Vn(e,s),yt(e,Me()),r;if(t===6)Vn(e,s);else{if(a=e.current.alternate,!(s&30)&&!x0(a)&&(t=hi(e,s),t===2&&(o=Dc(e),o!==0&&(s=o,t=td(e,o))),t===1))throw r=Oa,kr(e,0),Vn(e,s),yt(e,Me()),r;switch(e.finishedWork=a,e.finishedLanes=s,t){case 0:case 1:throw Error(U(345));case 2:wr(e,pt,wn);break;case 3:if(Vn(e,s),(s&130023424)===s&&(t=nu+500-Me(),10<t)){if(Qo(e,0)!==0)break;if(a=e.suspendedLanes,(a&s)!==s){st(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Ic(wr.bind(null,e,pt,wn),t);break}wr(e,pt,wn);break;case 4:if(Vn(e,s),(s&4194240)===s)break;for(t=e.eventTimes,a=-1;0<s;){var i=31-Kt(s);o=1<<i,i=t[i],i>a&&(a=i),s&=~o}if(s=a,s=Me()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*p0(s/1960))-s,10<s){e.timeoutHandle=Ic(wr.bind(null,e,pt,wn),s);break}wr(e,pt,wn);break;case 5:wr(e,pt,wn);break;default:throw Error(U(329))}}}return yt(e,Me()),e.callbackNode===r?Kx.bind(null,e):null}function td(e,t){var r=fa;return e.current.memoizedState.isDehydrated&&(kr(e,t).flags|=256),e=hi(e,t),e!==2&&(t=pt,pt=r,t!==null&&nd(t)),e}function nd(e){pt===null?pt=e:pt.push.apply(pt,e)}function x0(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var a=r[s],o=a.getSnapshot;a=a.value;try{if(!Xt(o(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Vn(e,t){for(t&=~tu,t&=~$i,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Kt(t),s=1<<r;e[r]=-1,t&=~s}}function yf(e){if(le&6)throw Error(U(327));ms();var t=Qo(e,0);if(!(t&1))return yt(e,Me()),null;var r=hi(e,t);if(e.tag!==0&&r===2){var s=Dc(e);s!==0&&(t=s,r=td(e,s))}if(r===1)throw r=Oa,kr(e,0),Vn(e,t),yt(e,Me()),r;if(r===6)throw Error(U(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wr(e,pt,wn),yt(e,Me()),null}function ru(e,t){var r=le;le|=1;try{return e(t)}finally{le=r,le===0&&(ks=Me()+500,Ii&&pr())}}function Ir(e){Kn!==null&&Kn.tag===0&&!(le&6)&&ms();var t=le;le|=1;var r=Ot.transition,s=ue;try{if(Ot.transition=null,ue=1,e)return e()}finally{ue=s,Ot.transition=r,le=t,!(le&6)&&pr()}}function su(){wt=os.current,ge(os)}function kr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,HN(r)),Ae!==null)for(r=Ae.return;r!==null;){var s=r;switch(Ld(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&ti();break;case 3:Ss(),ge(gt),ge(et),Vd();break;case 5:Hd(s);break;case 4:Ss();break;case 13:ge(je);break;case 19:ge(je);break;case 10:Wd(s.type._context);break;case 22:case 23:su()}r=r.return}if(Ge=e,Ae=e=ar(e.current,null),Ke=wt=t,ze=0,Oa=null,tu=$i=Or=0,pt=fa=null,Sr!==null){for(t=0;t<Sr.length;t++)if(r=Sr[t],s=r.interleaved,s!==null){r.interleaved=null;var a=s.next,o=r.pending;if(o!==null){var i=o.next;o.next=a,s.next=i}r.pending=s}Sr=null}return e}function Qx(e,t){do{var r=Ae;try{if(zd(),Fo.current=di,ci){for(var s=we.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}ci=!1}if(Ar=0,Ye=Be=we=null,ua=!1,Ra=0,eu.current=null,r===null||r.return===null){ze=1,Oa=t,Ae=null;break}e:{var o=e,i=r.return,l=r,c=t;if(t=Ke,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,m=h.tag;if(!(h.mode&1)&&(m===0||m===11||m===15)){var g=h.alternate;g?(h.updateQueue=g.updateQueue,h.memoizedState=g.memoizedState,h.lanes=g.lanes):(h.updateQueue=null,h.memoizedState=null)}var j=af(i);if(j!==null){j.flags&=-257,of(j,i,l,o,t),j.mode&1&&sf(o,u,t),t=j,c=u;var w=t.updateQueue;if(w===null){var v=new Set;v.add(c),t.updateQueue=v}else w.add(c);break e}else{if(!(t&1)){sf(o,u,t),au();break e}c=Error(U(426))}}else if(ve&&l.mode&1){var p=af(i);if(p!==null){!(p.flags&65536)&&(p.flags|=256),of(p,i,l,o,t),$d(Cs(c,l));break e}}o=c=Cs(c,l),ze!==4&&(ze=2),fa===null?fa=[o]:fa.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var f=Ax(o,c,t);Xm(o,f);break e;case 1:l=c;var x=o.type,y=o.stateNode;if(!(o.flags&128)&&(typeof x.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(rr===null||!rr.has(y)))){o.flags|=65536,t&=-t,o.lanes|=t;var N=Ox(o,l,t);Xm(o,N);break e}}o=o.return}while(o!==null)}Jx(r)}catch(b){t=b,Ae===r&&r!==null&&(Ae=r=r.return);continue}break}while(!0)}function Zx(){var e=ui.current;return ui.current=di,e===null?di:e}function au(){(ze===0||ze===3||ze===2)&&(ze=4),Ge===null||!(Or&268435455)&&!($i&268435455)||Vn(Ge,Ke)}function hi(e,t){var r=le;le|=2;var s=Zx();(Ge!==e||Ke!==t)&&(wn=null,kr(e,t));do try{g0();break}catch(a){Qx(e,a)}while(!0);if(zd(),le=r,ui.current=s,Ae!==null)throw Error(U(261));return Ge=null,Ke=0,ze}function g0(){for(;Ae!==null;)Xx(Ae)}function v0(){for(;Ae!==null&&!Uw();)Xx(Ae)}function Xx(e){var t=tg(e.alternate,e,wt);e.memoizedProps=e.pendingProps,t===null?Jx(e):Ae=t,eu.current=null}function Jx(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=u0(r,t),r!==null){r.flags&=32767,Ae=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ze=6,Ae=null;return}}else if(r=d0(r,t,wt),r!==null){Ae=r;return}if(t=t.sibling,t!==null){Ae=t;return}Ae=t=e}while(t!==null);ze===0&&(ze=5)}function wr(e,t,r){var s=ue,a=Ot.transition;try{Ot.transition=null,ue=1,y0(e,t,r,s)}finally{Ot.transition=a,ue=s}return null}function y0(e,t,r,s){do ms();while(Kn!==null);if(le&6)throw Error(U(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(U(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(Jw(e,o),e===Ge&&(Ae=Ge=null,Ke=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||wo||(wo=!0,ng(Ko,function(){return ms(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=Ot.transition,Ot.transition=null;var i=ue;ue=1;var l=le;le|=4,eu.current=null,f0(e,r),Vx(r,e),$N(Ac),Zo=!!Pc,Ac=Pc=null,e.current=r,h0(r),Yw(),le=l,ue=i,Ot.transition=o}else e.current=r;if(wo&&(wo=!1,Kn=e,fi=a),o=e.pendingLanes,o===0&&(rr=null),Vw(r.stateNode),yt(e,Me()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],s(a.value,{componentStack:a.stack,digest:a.digest});if(mi)throw mi=!1,e=Jc,Jc=null,e;return fi&1&&e.tag!==0&&ms(),o=e.pendingLanes,o&1?e===ed?ha++:(ha=0,ed=e):ha=0,pr(),null}function ms(){if(Kn!==null){var e=Ap(fi),t=Ot.transition,r=ue;try{if(Ot.transition=null,ue=16>e?16:e,Kn===null)var s=!1;else{if(e=Kn,Kn=null,fi=0,le&6)throw Error(U(331));var a=le;for(le|=4,q=e.current;q!==null;){var o=q,i=o.child;if(q.flags&16){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(q=u;q!==null;){var h=q;switch(h.tag){case 0:case 11:case 15:ma(8,h,o)}var m=h.child;if(m!==null)m.return=h,q=m;else for(;q!==null;){h=q;var g=h.sibling,j=h.return;if(Yx(h),h===u){q=null;break}if(g!==null){g.return=j,q=g;break}q=j}}}var w=o.alternate;if(w!==null){var v=w.child;if(v!==null){w.child=null;do{var p=v.sibling;v.sibling=null,v=p}while(v!==null)}}q=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,q=i;else e:for(;q!==null;){if(o=q,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ma(9,o,o.return)}var f=o.sibling;if(f!==null){f.return=o.return,q=f;break e}q=o.return}}var x=e.current;for(q=x;q!==null;){i=q;var y=i.child;if(i.subtreeFlags&2064&&y!==null)y.return=i,q=y;else e:for(i=x;q!==null;){if(l=q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Li(9,l)}}catch(b){Se(l,l.return,b)}if(l===i){q=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,q=N;break e}q=l.return}}if(le=a,pr(),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(Mi,e)}catch{}s=!0}return s}finally{ue=r,Ot.transition=t}}return!1}function jf(e,t,r){t=Cs(r,t),t=Ax(e,t,1),e=nr(e,t,1),t=st(),e!==null&&(qa(e,1,t),yt(e,t))}function Se(e,t,r){if(e.tag===3)jf(e,e,r);else for(;t!==null;){if(t.tag===3){jf(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(rr===null||!rr.has(s))){e=Cs(r,e),e=Ox(t,e,1),t=nr(t,e,1),e=st(),t!==null&&(qa(t,1,e),yt(t,e));break}}t=t.return}}function j0(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=st(),e.pingedLanes|=e.suspendedLanes&r,Ge===e&&(Ke&r)===r&&(ze===4||ze===3&&(Ke&130023424)===Ke&&500>Me()-nu?kr(e,0):tu|=r),yt(e,t)}function eg(e,t){t===0&&(e.mode&1?(t=uo,uo<<=1,!(uo&130023424)&&(uo=4194304)):t=1);var r=st();e=Mn(e,t),e!==null&&(qa(e,t,r),yt(e,r))}function w0(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),eg(e,r)}function N0(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(U(314))}s!==null&&s.delete(t),eg(e,r)}var tg;tg=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||gt.current)xt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return xt=!1,c0(e,t,r);xt=!!(e.flags&131072)}else xt=!1,ve&&t.flags&1048576&&ax(t,si,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Lo(e,t),e=t.pendingProps;var a=ws(t,et.current);us(t,r),a=Kd(null,t,s,e,a,r);var o=Qd();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,vt(s)?(o=!0,ni(t)):o=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Yd(t),a.updater=_i,t.stateNode=a,a._reactInternals=t,Wc(t,s,e,r),t=Gc(null,t,s,!0,o,r)):(t.tag=0,ve&&o&&_d(t),nt(null,t,a,r),t=t.child),t;case 16:s=t.elementType;e:{switch(Lo(e,t),e=t.pendingProps,a=s._init,s=a(s._payload),t.type=s,a=t.tag=S0(s),e=Gt(s,e),a){case 0:t=Yc(null,t,s,e,r);break e;case 1:t=df(null,t,s,e,r);break e;case 11:t=lf(null,t,s,e,r);break e;case 14:t=cf(null,t,s,Gt(s.type,e),r);break e}throw Error(U(306,s,""))}return t;case 0:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Gt(s,a),Yc(e,t,s,a,r);case 1:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Gt(s,a),df(e,t,s,a,r);case 3:e:{if(Lx(t),e===null)throw Error(U(387));s=t.pendingProps,o=t.memoizedState,a=o.element,ux(e,t),ii(t,s,null,r);var i=t.memoizedState;if(s=i.element,o.isDehydrated)if(o={element:s,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){a=Cs(Error(U(423)),t),t=uf(e,t,s,r,a);break e}else if(s!==a){a=Cs(Error(U(424)),t),t=uf(e,t,s,r,a);break e}else for(bt=tr(t.stateNode.containerInfo.firstChild),St=t,ve=!0,Vt=null,r=cx(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ns(),s===a){t=Rn(e,t,r);break e}nt(e,t,s,r)}t=t.child}return t;case 5:return mx(t),e===null&&$c(t),s=t.type,a=t.pendingProps,o=e!==null?e.memoizedProps:null,i=a.children,Oc(s,a)?i=null:o!==null&&Oc(s,o)&&(t.flags|=32),_x(e,t),nt(e,t,i,r),t.child;case 6:return e===null&&$c(t),null;case 13:return $x(e,t,r);case 4:return Gd(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=bs(t,null,s,r):nt(e,t,s,r),t.child;case 11:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Gt(s,a),lf(e,t,s,a,r);case 7:return nt(e,t,t.pendingProps,r),t.child;case 8:return nt(e,t,t.pendingProps.children,r),t.child;case 12:return nt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,a=t.pendingProps,o=t.memoizedProps,i=a.value,fe(ai,s._currentValue),s._currentValue=i,o!==null)if(Xt(o.value,i)){if(o.children===a.children&&!gt.current){t=Rn(e,t,r);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var l=o.dependencies;if(l!==null){i=o.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(o.tag===1){c=kn(-1,r&-r),c.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=r,c=o.alternate,c!==null&&(c.lanes|=r),Bc(o.return,r,t),l.lanes|=r;break}c=c.next}}else if(o.tag===10)i=o.type===t.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(U(341));i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),Bc(i,r,t),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===t){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}nt(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,s=t.pendingProps.children,us(t,r),a=Ft(a),s=s(a),t.flags|=1,nt(e,t,s,r),t.child;case 14:return s=t.type,a=Gt(s,t.pendingProps),a=Gt(s.type,a),cf(e,t,s,a,r);case 15:return Ix(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Gt(s,a),Lo(e,t),t.tag=1,vt(s)?(e=!0,ni(t)):e=!1,us(t,r),Px(t,s,a),Wc(t,s,a,r),Gc(null,t,s,!0,e,r);case 19:return Bx(e,t,r);case 22:return Fx(e,t,r)}throw Error(U(156,t.tag))};function ng(e,t){return Ep(e,t)}function b0(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function At(e,t,r,s){return new b0(e,t,r,s)}function ou(e){return e=e.prototype,!(!e||!e.isReactComponent)}function S0(e){if(typeof e=="function")return ou(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Cd)return 11;if(e===kd)return 14}return 2}function ar(e,t){var r=e.alternate;return r===null?(r=At(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function zo(e,t,r,s,a,o){var i=2;if(s=e,typeof e=="function")ou(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case Qr:return Dr(r.children,a,o,t);case Sd:i=8,a|=8;break;case mc:return e=At(12,r,t,a|2),e.elementType=mc,e.lanes=o,e;case fc:return e=At(13,r,t,a),e.elementType=fc,e.lanes=o,e;case hc:return e=At(19,r,t,a),e.elementType=hc,e.lanes=o,e;case mp:return Bi(r,a,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case dp:i=10;break e;case up:i=9;break e;case Cd:i=11;break e;case kd:i=14;break e;case Yn:i=16,s=null;break e}throw Error(U(130,e==null?e:typeof e,""))}return t=At(i,r,t,a),t.elementType=e,t.type=s,t.lanes=o,t}function Dr(e,t,r,s){return e=At(7,e,s,t),e.lanes=r,e}function Bi(e,t,r,s){return e=At(22,e,s,t),e.elementType=mp,e.lanes=r,e.stateNode={isHidden:!1},e}function $l(e,t,r){return e=At(6,e,null,t),e.lanes=r,e}function Bl(e,t,r){return t=At(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function C0(e,t,r,s,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jl(0),this.expirationTimes=jl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jl(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function iu(e,t,r,s,a,o,i,l,c){return e=new C0(e,t,r,l,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=At(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yd(o),e}function k0(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Kr,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function rg(e){if(!e)return cr;e=e._reactInternals;e:{if(Br(e)!==e||e.tag!==1)throw Error(U(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(vt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(U(171))}if(e.tag===1){var r=e.type;if(vt(r))return rx(e,r,t)}return t}function sg(e,t,r,s,a,o,i,l,c){return e=iu(r,s,!0,e,a,o,i,l,c),e.context=rg(null),r=e.current,s=st(),a=sr(r),o=kn(s,a),o.callback=t??null,nr(r,o,a),e.current.lanes=a,qa(e,a,s),yt(e,s),e}function zi(e,t,r,s){var a=t.current,o=st(),i=sr(a);return r=rg(r),t.context===null?t.context=r:t.pendingContext=r,t=kn(o,i),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=nr(a,t,i),e!==null&&(Qt(e,a,i,o),Io(e,a,i)),i}function pi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function wf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function lu(e,t){wf(e,t),(e=e.alternate)&&wf(e,t)}function D0(){return null}var ag=typeof reportError=="function"?reportError:function(e){console.error(e)};function cu(e){this._internalRoot=e}Wi.prototype.render=cu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(U(409));zi(e,t,null,null)};Wi.prototype.unmount=cu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ir(function(){zi(null,e,null,null)}),t[En]=null}};function Wi(e){this._internalRoot=e}Wi.prototype.unstable_scheduleHydration=function(e){if(e){var t=Fp();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Hn.length&&t!==0&&t<Hn[r].priority;r++);Hn.splice(r,0,e),r===0&&Lp(e)}};function du(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ui(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Nf(){}function T0(e,t,r,s,a){if(a){if(typeof s=="function"){var o=s;s=function(){var u=pi(i);o.call(u)}}var i=sg(t,s,e,0,null,!1,!1,"",Nf);return e._reactRootContainer=i,e[En]=i.current,ka(e.nodeType===8?e.parentNode:e),Ir(),i}for(;a=e.lastChild;)e.removeChild(a);if(typeof s=="function"){var l=s;s=function(){var u=pi(c);l.call(u)}}var c=iu(e,0,!1,null,null,!1,!1,"",Nf);return e._reactRootContainer=c,e[En]=c.current,ka(e.nodeType===8?e.parentNode:e),Ir(function(){zi(t,c,r,s)}),c}function Yi(e,t,r,s,a){var o=r._reactRootContainer;if(o){var i=o;if(typeof a=="function"){var l=a;a=function(){var c=pi(i);l.call(c)}}zi(t,i,e,a)}else i=T0(r,t,e,a,s);return pi(i)}Op=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ta(t.pendingLanes);r!==0&&(Ed(t,r|1),yt(t,Me()),!(le&6)&&(ks=Me()+500,pr()))}break;case 13:Ir(function(){var s=Mn(e,1);if(s!==null){var a=st();Qt(s,e,1,a)}}),lu(e,1)}};Md=function(e){if(e.tag===13){var t=Mn(e,134217728);if(t!==null){var r=st();Qt(t,e,134217728,r)}lu(e,134217728)}};Ip=function(e){if(e.tag===13){var t=sr(e),r=Mn(e,t);if(r!==null){var s=st();Qt(r,e,t,s)}lu(e,t)}};Fp=function(){return ue};_p=function(e,t){var r=ue;try{return ue=e,t()}finally{ue=r}};Sc=function(e,t,r){switch(t){case"input":if(gc(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var a=Oi(s);if(!a)throw Error(U(90));hp(s),gc(s,a)}}}break;case"textarea":xp(e,r);break;case"select":t=r.value,t!=null&&is(e,!!r.multiple,t,!1)}};bp=ru;Sp=Ir;var E0={usingClientEntryPoint:!1,Events:[Qa,es,Oi,wp,Np,ru]},Vs={findFiberByHostInstance:br,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},M0={bundleType:Vs.bundleType,version:Vs.version,rendererPackageName:Vs.rendererPackageName,rendererConfig:Vs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:In.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Dp(e),e===null?null:e.stateNode},findFiberByHostInstance:Vs.findFiberByHostInstance||D0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var No=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!No.isDisabled&&No.supportsFiber)try{Mi=No.inject(M0),un=No}catch{}}Dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=E0;Dt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!du(t))throw Error(U(200));return k0(e,t,null,r)};Dt.createRoot=function(e,t){if(!du(e))throw Error(U(299));var r=!1,s="",a=ag;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=iu(e,1,!1,null,null,r,!1,s,a),e[En]=t.current,ka(e.nodeType===8?e.parentNode:e),new cu(t)};Dt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(U(188)):(e=Object.keys(e).join(","),Error(U(268,e)));return e=Dp(t),e=e===null?null:e.stateNode,e};Dt.flushSync=function(e){return Ir(e)};Dt.hydrate=function(e,t,r){if(!Ui(t))throw Error(U(200));return Yi(null,e,t,!0,r)};Dt.hydrateRoot=function(e,t,r){if(!du(e))throw Error(U(405));var s=r!=null&&r.hydratedSources||null,a=!1,o="",i=ag;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),t=sg(t,null,e,1,r??null,a,!1,o,i),e[En]=t.current,ka(e),s)for(e=0;e<s.length;e++)r=s[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Wi(t)};Dt.render=function(e,t,r){if(!Ui(t))throw Error(U(200));return Yi(null,e,t,!1,r)};Dt.unmountComponentAtNode=function(e){if(!Ui(e))throw Error(U(40));return e._reactRootContainer?(Ir(function(){Yi(null,null,e,!1,function(){e._reactRootContainer=null,e[En]=null})}),!0):!1};Dt.unstable_batchedUpdates=ru;Dt.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!Ui(r))throw Error(U(200));if(e==null||e._reactInternals===void 0)throw Error(U(38));return Yi(e,t,r,!1,s)};Dt.version="18.3.1-next-f1338f8080-20240426";function og(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(og)}catch(e){console.error(e)}}og(),op.exports=Dt;var Gi=op.exports;const R0=xd(Gi);var bf=Gi;dc.createRoot=bf.createRoot,dc.hydrateRoot=bf.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ia(){return Ia=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Ia.apply(this,arguments)}var Qn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Qn||(Qn={}));const Sf="popstate";function P0(e){e===void 0&&(e={});function t(s,a){let{pathname:o,search:i,hash:l}=s.location;return rd("",{pathname:o,search:i,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(s,a){return typeof a=="string"?a:lg(a)}return O0(t,r,null,e)}function Oe(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ig(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function A0(){return Math.random().toString(36).substr(2,8)}function Cf(e,t){return{usr:e.state,key:e.key,idx:t}}function rd(e,t,r,s){return r===void 0&&(r=null),Ia({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Os(t):t,{state:r,key:t&&t.key||s||A0()})}function lg(e){let{pathname:t="/",search:r="",hash:s=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function Os(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function O0(e,t,r,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:o=!1}=s,i=a.history,l=Qn.Pop,c=null,u=h();u==null&&(u=0,i.replaceState(Ia({},i.state,{idx:u}),""));function h(){return(i.state||{idx:null}).idx}function m(){l=Qn.Pop;let p=h(),f=p==null?null:p-u;u=p,c&&c({action:l,location:v.location,delta:f})}function g(p,f){l=Qn.Push;let x=rd(v.location,p,f);u=h()+1;let y=Cf(x,u),N=v.createHref(x);try{i.pushState(y,"",N)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;a.location.assign(N)}o&&c&&c({action:l,location:v.location,delta:1})}function j(p,f){l=Qn.Replace;let x=rd(v.location,p,f);u=h();let y=Cf(x,u),N=v.createHref(x);i.replaceState(y,"",N),o&&c&&c({action:l,location:v.location,delta:0})}function w(p){let f=a.location.origin!=="null"?a.location.origin:a.location.href,x=typeof p=="string"?p:lg(p);return x=x.replace(/ $/,"%20"),Oe(f,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,f)}let v={get action(){return l},get location(){return e(a,i)},listen(p){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(Sf,m),c=p,()=>{a.removeEventListener(Sf,m),c=null}},createHref(p){return t(a,p)},createURL:w,encodeLocation(p){let f=w(p);return{pathname:f.pathname,search:f.search,hash:f.hash}},push:g,replace:j,go(p){return i.go(p)}};return v}var kf;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(kf||(kf={}));function I0(e,t,r){return r===void 0&&(r="/"),F0(e,t,r)}function F0(e,t,r,s){let a=typeof t=="string"?Os(t):t,o=ug(a.pathname||"/",r);if(o==null)return null;let i=cg(e);_0(i);let l=null;for(let c=0;l==null&&c<i.length;++c){let u=K0(o);l=H0(i[c],u)}return l}function cg(e,t,r,s){t===void 0&&(t=[]),r===void 0&&(r=[]),s===void 0&&(s="");let a=(o,i,l)=>{let c={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};c.relativePath.startsWith("/")&&(Oe(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let u=Tr([s,c.relativePath]),h=r.concat(c);o.children&&o.children.length>0&&(Oe(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),cg(o.children,t,h,u)),!(o.path==null&&!o.index)&&t.push({path:u,score:Y0(u,o.index),routesMeta:h})};return e.forEach((o,i)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))a(o,i);else for(let c of dg(o.path))a(o,i,c)}),t}function dg(e){let t=e.split("/");if(t.length===0)return[];let[r,...s]=t,a=r.endsWith("?"),o=r.replace(/\?$/,"");if(s.length===0)return a?[o,""]:[o];let i=dg(s.join("/")),l=[];return l.push(...i.map(c=>c===""?o:[o,c].join("/"))),a&&l.push(...i),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function _0(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:G0(t.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const L0=/^:[\w-]+$/,$0=3,B0=2,z0=1,W0=10,U0=-2,Df=e=>e==="*";function Y0(e,t){let r=e.split("/"),s=r.length;return r.some(Df)&&(s+=U0),t&&(s+=B0),r.filter(a=>!Df(a)).reduce((a,o)=>a+(L0.test(o)?$0:o===""?z0:W0),s)}function G0(e,t){return e.length===t.length&&e.slice(0,-1).every((s,a)=>s===t[a])?e[e.length-1]-t[t.length-1]:0}function H0(e,t,r){let{routesMeta:s}=e,a={},o="/",i=[];for(let l=0;l<s.length;++l){let c=s[l],u=l===s.length-1,h=o==="/"?t:t.slice(o.length)||"/",m=V0({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},h),g=c.route;if(!m)return null;Object.assign(a,m.params),i.push({params:a,pathname:Tr([o,m.pathname]),pathnameBase:J0(Tr([o,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(o=Tr([o,m.pathnameBase]))}return i}function V0(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,s]=q0(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let o=a[0],i=o.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:s.reduce((u,h,m)=>{let{paramName:g,isOptional:j}=h;if(g==="*"){let v=l[m]||"";i=o.slice(0,o.length-v.length).replace(/(.)\/+$/,"$1")}const w=l[m];return j&&!w?u[g]=void 0:u[g]=(w||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:i,pattern:e}}function q0(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),ig(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),s]}function K0(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ig(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function ug(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,s=e.charAt(r);return s&&s!=="/"?null:e.slice(r)||"/"}function Q0(e,t){t===void 0&&(t="/");let{pathname:r,search:s="",hash:a=""}=typeof e=="string"?Os(e):e;return{pathname:r?r.startsWith("/")?r:Z0(r,t):t,search:e1(s),hash:t1(a)}}function Z0(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function zl(e,t,r,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function X0(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function mg(e,t){let r=X0(e);return t?r.map((s,a)=>a===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function fg(e,t,r,s){s===void 0&&(s=!1);let a;typeof e=="string"?a=Os(e):(a=Ia({},e),Oe(!a.pathname||!a.pathname.includes("?"),zl("?","pathname","search",a)),Oe(!a.pathname||!a.pathname.includes("#"),zl("#","pathname","hash",a)),Oe(!a.search||!a.search.includes("#"),zl("#","search","hash",a)));let o=e===""||a.pathname==="",i=o?"/":a.pathname,l;if(i==null)l=r;else{let m=t.length-1;if(!s&&i.startsWith("..")){let g=i.split("/");for(;g[0]==="..";)g.shift(),m-=1;a.pathname=g.join("/")}l=m>=0?t[m]:"/"}let c=Q0(a,l),u=i&&i!=="/"&&i.endsWith("/"),h=(o||i===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||h)&&(c.pathname+="/"),c}const Tr=e=>e.join("/").replace(/\/\/+/g,"/"),J0=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),e1=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,t1=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function n1(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const hg=["post","put","patch","delete"];new Set(hg);const r1=["get",...hg];new Set(r1);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fa(){return Fa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Fa.apply(this,arguments)}const uu=d.createContext(null),s1=d.createContext(null),Xa=d.createContext(null),Hi=d.createContext(null),xr=d.createContext({outlet:null,matches:[],isDataRoute:!1}),pg=d.createContext(null);function Ja(){return d.useContext(Hi)!=null}function Vi(){return Ja()||Oe(!1),d.useContext(Hi).location}function xg(e){d.useContext(Xa).static||d.useLayoutEffect(e)}function $t(){let{isDataRoute:e}=d.useContext(xr);return e?g1():a1()}function a1(){Ja()||Oe(!1);let e=d.useContext(uu),{basename:t,future:r,navigator:s}=d.useContext(Xa),{matches:a}=d.useContext(xr),{pathname:o}=Vi(),i=JSON.stringify(mg(a,r.v7_relativeSplatPath)),l=d.useRef(!1);return xg(()=>{l.current=!0}),d.useCallback(function(u,h){if(h===void 0&&(h={}),!l.current)return;if(typeof u=="number"){s.go(u);return}let m=fg(u,JSON.parse(i),o,h.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:Tr([t,m.pathname])),(h.replace?s.replace:s.push)(m,h.state,h)},[t,s,i,o,e])}function gg(){let{matches:e}=d.useContext(xr),t=e[e.length-1];return t?t.params:{}}function o1(e,t){return i1(e,t)}function i1(e,t,r,s){Ja()||Oe(!1);let{navigator:a}=d.useContext(Xa),{matches:o}=d.useContext(xr),i=o[o.length-1],l=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let u=Vi(),h;if(t){var m;let p=typeof t=="string"?Os(t):t;c==="/"||(m=p.pathname)!=null&&m.startsWith(c)||Oe(!1),h=p}else h=u;let g=h.pathname||"/",j=g;if(c!=="/"){let p=c.replace(/^\//,"").split("/");j="/"+g.replace(/^\//,"").split("/").slice(p.length).join("/")}let w=I0(e,{pathname:j}),v=m1(w&&w.map(p=>Object.assign({},p,{params:Object.assign({},l,p.params),pathname:Tr([c,a.encodeLocation?a.encodeLocation(p.pathname).pathname:p.pathname]),pathnameBase:p.pathnameBase==="/"?c:Tr([c,a.encodeLocation?a.encodeLocation(p.pathnameBase).pathname:p.pathnameBase])})),o,r,s);return t&&v?d.createElement(Hi.Provider,{value:{location:Fa({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Qn.Pop}},v):v}function l1(){let e=x1(),t=n1(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return d.createElement(d.Fragment,null,d.createElement("h2",null,"Unexpected Application Error!"),d.createElement("h3",{style:{fontStyle:"italic"}},t),r?d.createElement("pre",{style:a},r):null,null)}const c1=d.createElement(l1,null);class d1 extends d.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?d.createElement(xr.Provider,{value:this.props.routeContext},d.createElement(pg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function u1(e){let{routeContext:t,match:r,children:s}=e,a=d.useContext(uu);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),d.createElement(xr.Provider,{value:t},s)}function m1(e,t,r,s){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),s===void 0&&(s=null),e==null){var o;if(!r)return null;if(r.errors)e=r.matches;else if((o=s)!=null&&o.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,l=(a=r)==null?void 0:a.errors;if(l!=null){let h=i.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);h>=0||Oe(!1),i=i.slice(0,Math.min(i.length,h+1))}let c=!1,u=-1;if(r&&s&&s.v7_partialHydration)for(let h=0;h<i.length;h++){let m=i[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(u=h),m.route.id){let{loaderData:g,errors:j}=r,w=m.route.loader&&g[m.route.id]===void 0&&(!j||j[m.route.id]===void 0);if(m.route.lazy||w){c=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((h,m,g)=>{let j,w=!1,v=null,p=null;r&&(j=l&&m.route.id?l[m.route.id]:void 0,v=m.route.errorElement||c1,c&&(u<0&&g===0?(v1("route-fallback"),w=!0,p=null):u===g&&(w=!0,p=m.route.hydrateFallbackElement||null)));let f=t.concat(i.slice(0,g+1)),x=()=>{let y;return j?y=v:w?y=p:m.route.Component?y=d.createElement(m.route.Component,null):m.route.element?y=m.route.element:y=h,d.createElement(u1,{match:m,routeContext:{outlet:h,matches:f,isDataRoute:r!=null},children:y})};return r&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?d.createElement(d1,{location:r.location,revalidation:r.revalidation,component:v,error:j,children:x(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):x()},null)}var vg=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(vg||{}),yg=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(yg||{});function f1(e){let t=d.useContext(uu);return t||Oe(!1),t}function h1(e){let t=d.useContext(s1);return t||Oe(!1),t}function p1(e){let t=d.useContext(xr);return t||Oe(!1),t}function jg(e){let t=p1(),r=t.matches[t.matches.length-1];return r.route.id||Oe(!1),r.route.id}function x1(){var e;let t=d.useContext(pg),r=h1(),s=jg();return t!==void 0?t:(e=r.errors)==null?void 0:e[s]}function g1(){let{router:e}=f1(vg.UseNavigateStable),t=jg(yg.UseNavigateStable),r=d.useRef(!1);return xg(()=>{r.current=!0}),d.useCallback(function(a,o){o===void 0&&(o={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Fa({fromRouteId:t},o)))},[e,t])}const Tf={};function v1(e,t,r){Tf[e]||(Tf[e]=!0)}function y1(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function j1(e){let{to:t,replace:r,state:s,relative:a}=e;Ja()||Oe(!1);let{future:o,static:i}=d.useContext(Xa),{matches:l}=d.useContext(xr),{pathname:c}=Vi(),u=$t(),h=fg(t,mg(l,o.v7_relativeSplatPath),c,a==="path"),m=JSON.stringify(h);return d.useEffect(()=>u(JSON.parse(m),{replace:r,state:s,relative:a}),[u,m,a,r,s]),null}function ie(e){Oe(!1)}function w1(e){let{basename:t="/",children:r=null,location:s,navigationType:a=Qn.Pop,navigator:o,static:i=!1,future:l}=e;Ja()&&Oe(!1);let c=t.replace(/^\/*/,"/"),u=d.useMemo(()=>({basename:c,navigator:o,static:i,future:Fa({v7_relativeSplatPath:!1},l)}),[c,l,o,i]);typeof s=="string"&&(s=Os(s));let{pathname:h="/",search:m="",hash:g="",state:j=null,key:w="default"}=s,v=d.useMemo(()=>{let p=ug(h,c);return p==null?null:{location:{pathname:p,search:m,hash:g,state:j,key:w},navigationType:a}},[c,h,m,g,j,w,a]);return v==null?null:d.createElement(Xa.Provider,{value:u},d.createElement(Hi.Provider,{children:r,value:v}))}function N1(e){let{children:t,location:r}=e;return o1(sd(t),r)}new Promise(()=>{});function sd(e,t){t===void 0&&(t=[]);let r=[];return d.Children.forEach(e,(s,a)=>{if(!d.isValidElement(s))return;let o=[...t,a];if(s.type===d.Fragment){r.push.apply(r,sd(s.props.children,o));return}s.type!==ie&&Oe(!1),!s.props.index||!s.props.children||Oe(!1);let i={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(i.children=sd(s.props.children,o)),r.push(i)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const b1="6";try{window.__reactRouterVersion=b1}catch{}const S1="startTransition",Ef=Va[S1];function C1(e){let{basename:t,children:r,future:s,window:a}=e,o=d.useRef();o.current==null&&(o.current=P0({window:a,v5Compat:!0}));let i=o.current,[l,c]=d.useState({action:i.action,location:i.location}),{v7_startTransition:u}=s||{},h=d.useCallback(m=>{u&&Ef?Ef(()=>c(m)):c(m)},[c,u]);return d.useLayoutEffect(()=>i.listen(h),[i,h]),d.useEffect(()=>y1(s),[s]),d.createElement(w1,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:i,future:s})}var Mf;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Mf||(Mf={}));var Rf;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Rf||(Rf={}));const k1={},Pf=e=>{let t;const r=new Set,s=(h,m)=>{const g=typeof h=="function"?h(t):h;if(!Object.is(g,t)){const j=t;t=m??(typeof g!="object"||g===null)?g:Object.assign({},t,g),r.forEach(w=>w(t,j))}},a=()=>t,c={setState:s,getState:a,getInitialState:()=>u,subscribe:h=>(r.add(h),()=>r.delete(h)),destroy:()=>{(k1?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=t=e(s,a,c);return c},D1=e=>e?Pf(e):Pf;var wg={exports:{}},Ng={},bg={exports:{}},Sg={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ds=d;function T1(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var E1=typeof Object.is=="function"?Object.is:T1,M1=Ds.useState,R1=Ds.useEffect,P1=Ds.useLayoutEffect,A1=Ds.useDebugValue;function O1(e,t){var r=t(),s=M1({inst:{value:r,getSnapshot:t}}),a=s[0].inst,o=s[1];return P1(function(){a.value=r,a.getSnapshot=t,Wl(a)&&o({inst:a})},[e,r,t]),R1(function(){return Wl(a)&&o({inst:a}),e(function(){Wl(a)&&o({inst:a})})},[e]),A1(r),r}function Wl(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!E1(e,r)}catch{return!0}}function I1(e,t){return t()}var F1=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?I1:O1;Sg.useSyncExternalStore=Ds.useSyncExternalStore!==void 0?Ds.useSyncExternalStore:F1;bg.exports=Sg;var _1=bg.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qi=d,L1=_1;function $1(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var B1=typeof Object.is=="function"?Object.is:$1,z1=L1.useSyncExternalStore,W1=qi.useRef,U1=qi.useEffect,Y1=qi.useMemo,G1=qi.useDebugValue;Ng.useSyncExternalStoreWithSelector=function(e,t,r,s,a){var o=W1(null);if(o.current===null){var i={hasValue:!1,value:null};o.current=i}else i=o.current;o=Y1(function(){function c(j){if(!u){if(u=!0,h=j,j=s(j),a!==void 0&&i.hasValue){var w=i.value;if(a(w,j))return m=w}return m=j}if(w=m,B1(h,j))return w;var v=s(j);return a!==void 0&&a(w,v)?(h=j,w):(h=j,m=v)}var u=!1,h,m,g=r===void 0?null:r;return[function(){return c(t())},g===null?void 0:function(){return c(g())}]},[t,r,s,a]);var l=z1(e,o[0],o[1]);return U1(function(){i.hasValue=!0,i.value=l},[l]),G1(l),l};wg.exports=Ng;var H1=wg.exports;const V1=xd(H1),Cg={},{useDebugValue:q1}=on,{useSyncExternalStoreWithSelector:K1}=V1;let Af=!1;const Q1=e=>e;function Z1(e,t=Q1,r){(Cg?"production":void 0)!=="production"&&r&&!Af&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Af=!0);const s=K1(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return q1(s),s}const X1=e=>{(Cg?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?D1(e):e,r=(s,a)=>Z1(t,s,a);return Object.assign(r,t),r},_e=e=>X1,J1={};function eb(e,t){let r;try{r=e()}catch{return}return{getItem:a=>{var o;const i=c=>c===null?null:JSON.parse(c,void 0),l=(o=r.getItem(a))!=null?o:null;return l instanceof Promise?l.then(i):i(l)},setItem:(a,o)=>r.setItem(a,JSON.stringify(o,void 0)),removeItem:a=>r.removeItem(a)}}const _a=e=>t=>{try{const r=e(t);return r instanceof Promise?r:{then(s){return _a(s)(r)},catch(s){return this}}}catch(r){return{then(s){return this},catch(s){return _a(s)(r)}}}},tb=(e,t)=>(r,s,a)=>{let o={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:p=>p,version:0,merge:(p,f)=>({...f,...p}),...t},i=!1;const l=new Set,c=new Set;let u;try{u=o.getStorage()}catch{}if(!u)return e((...p)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),r(...p)},s,a);const h=_a(o.serialize),m=()=>{const p=o.partialize({...s()});let f;const x=h({state:p,version:o.version}).then(y=>u.setItem(o.name,y)).catch(y=>{f=y});if(f)throw f;return x},g=a.setState;a.setState=(p,f)=>{g(p,f),m()};const j=e((...p)=>{r(...p),m()},s,a);let w;const v=()=>{var p;if(!u)return;i=!1,l.forEach(x=>x(s()));const f=((p=o.onRehydrateStorage)==null?void 0:p.call(o,s()))||void 0;return _a(u.getItem.bind(u))(o.name).then(x=>{if(x)return o.deserialize(x)}).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==o.version){if(o.migrate)return o.migrate(x.state,x.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return x.state}).then(x=>{var y;return w=o.merge(x,(y=s())!=null?y:j),r(w,!0),m()}).then(()=>{f==null||f(w,void 0),i=!0,c.forEach(x=>x(w))}).catch(x=>{f==null||f(void 0,x)})};return a.persist={setOptions:p=>{o={...o,...p},p.getStorage&&(u=p.getStorage())},clearStorage:()=>{u==null||u.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>v(),hasHydrated:()=>i,onHydrate:p=>(l.add(p),()=>{l.delete(p)}),onFinishHydration:p=>(c.add(p),()=>{c.delete(p)})},v(),w||j},nb=(e,t)=>(r,s,a)=>{let o={storage:eb(()=>localStorage),partialize:v=>v,version:0,merge:(v,p)=>({...p,...v}),...t},i=!1;const l=new Set,c=new Set;let u=o.storage;if(!u)return e((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),r(...v)},s,a);const h=()=>{const v=o.partialize({...s()});return u.setItem(o.name,{state:v,version:o.version})},m=a.setState;a.setState=(v,p)=>{m(v,p),h()};const g=e((...v)=>{r(...v),h()},s,a);a.getInitialState=()=>g;let j;const w=()=>{var v,p;if(!u)return;i=!1,l.forEach(x=>{var y;return x((y=s())!=null?y:g)});const f=((p=o.onRehydrateStorage)==null?void 0:p.call(o,(v=s())!=null?v:g))||void 0;return _a(u.getItem.bind(u))(o.name).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==o.version){if(o.migrate)return[!0,o.migrate(x.state,x.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,x.state];return[!1,void 0]}).then(x=>{var y;const[N,b]=x;if(j=o.merge(b,(y=s())!=null?y:g),r(j,!0),N)return h()}).then(()=>{f==null||f(j,void 0),j=s(),i=!0,c.forEach(x=>x(j))}).catch(x=>{f==null||f(void 0,x)})};return a.persist={setOptions:v=>{o={...o,...v},v.storage&&(u=v.storage)},clearStorage:()=>{u==null||u.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>w(),hasHydrated:()=>i,onHydrate:v=>(l.add(v),()=>{l.delete(v)}),onFinishHydration:v=>(c.add(v),()=>{c.delete(v)})},o.skipHydration||w(),j||g},rb=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((J1?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),tb(e,t)):nb(e,t),Le=rb,sb=async e=>{const r=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",r);return Array.from(new Uint8Array(s)).map(o=>o.toString(16).padStart(2,"0")).join("")},ab="e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855",kg=["Martin","Andres","Hugo","Marcela","Temp Employee"],Ie=_e()(Le(e=>({currentUser:null,isAuthenticated:!1,login:async(t,r)=>{if(!kg.includes(t))throw new Error("Invalid username");try{if(await sb(r)===ab)return e({currentUser:{name:t,loginTime:new Date().toISOString()},isAuthenticated:!0}),!0;throw new Error("Invalid password")}catch(s){throw console.error("Authentication error:",s),s}},logout:()=>{e({currentUser:null,isAuthenticated:!1}),localStorage.removeItem("taquero-auth")}}),{name:"taquero-auth"}));function Dg(e){var t,r,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=Dg(e[t]))&&(s&&(s+=" "),s+=r)}else for(r in e)e[r]&&(s&&(s+=" "),s+=r);return s}function Tg(){for(var e,t,r=0,s="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=Dg(e))&&(s&&(s+=" "),s+=t);return s}const Of=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,If=Tg,mu=(e,t)=>r=>{var s;if((t==null?void 0:t.variants)==null)return If(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:o}=t,i=Object.keys(a).map(u=>{const h=r==null?void 0:r[u],m=o==null?void 0:o[u];if(h===null)return null;const g=Of(h)||Of(m);return a[u][g]}),l=r&&Object.entries(r).reduce((u,h)=>{let[m,g]=h;return g===void 0||(u[m]=g),u},{}),c=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((u,h)=>{let{class:m,className:g,...j}=h;return Object.entries(j).every(w=>{let[v,p]=w;return Array.isArray(p)?p.includes({...o,...l}[v]):{...o,...l}[v]===p})?[...u,m,g]:u},[]);return If(e,i,c,r==null?void 0:r.class,r==null?void 0:r.className)},fu="-",ob=e=>{const t=lb(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:i=>{const l=i.split(fu);return l[0]===""&&l.length!==1&&l.shift(),Eg(l,t)||ib(i)},getConflictingClassGroupIds:(i,l)=>{const c=r[i]||[];return l&&s[i]?[...c,...s[i]]:c}}},Eg=(e,t)=>{var i;if(e.length===0)return t.classGroupId;const r=e[0],s=t.nextPart.get(r),a=s?Eg(e.slice(1),s):void 0;if(a)return a;if(t.validators.length===0)return;const o=e.join(fu);return(i=t.validators.find(({validator:l})=>l(o)))==null?void 0:i.classGroupId},Ff=/^\[(.+)\]$/,ib=e=>{if(Ff.test(e)){const t=Ff.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},lb=e=>{const{theme:t,prefix:r}=e,s={nextPart:new Map,validators:[]};return db(Object.entries(e.classGroups),r).forEach(([o,i])=>{ad(i,s,o,t)}),s},ad=(e,t,r,s)=>{e.forEach(a=>{if(typeof a=="string"){const o=a===""?t:_f(t,a);o.classGroupId=r;return}if(typeof a=="function"){if(cb(a)){ad(a(s),t,r,s);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([o,i])=>{ad(i,_f(t,o),r,s)})})},_f=(e,t)=>{let r=e;return t.split(fu).forEach(s=>{r.nextPart.has(s)||r.nextPart.set(s,{nextPart:new Map,validators:[]}),r=r.nextPart.get(s)}),r},cb=e=>e.isThemeGetter,db=(e,t)=>t?e.map(([r,s])=>{const a=s.map(o=>typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([i,l])=>[t+i,l])):o);return[r,a]}):e,ub=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,s=new Map;const a=(o,i)=>{r.set(o,i),t++,t>e&&(t=0,s=r,r=new Map)};return{get(o){let i=r.get(o);if(i!==void 0)return i;if((i=s.get(o))!==void 0)return a(o,i),i},set(o,i){r.has(o)?r.set(o,i):a(o,i)}}},Mg="!",mb=e=>{const{separator:t,experimentalParseClassName:r}=e,s=t.length===1,a=t[0],o=t.length,i=l=>{const c=[];let u=0,h=0,m;for(let p=0;p<l.length;p++){let f=l[p];if(u===0){if(f===a&&(s||l.slice(p,p+o)===t)){c.push(l.slice(h,p)),h=p+o;continue}if(f==="/"){m=p;continue}}f==="["?u++:f==="]"&&u--}const g=c.length===0?l:l.substring(h),j=g.startsWith(Mg),w=j?g.substring(1):g,v=m&&m>h?m-h:void 0;return{modifiers:c,hasImportantModifier:j,baseClassName:w,maybePostfixModifierPosition:v}};return r?l=>r({className:l,parseClassName:i}):i},fb=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(s=>{s[0]==="["?(t.push(...r.sort(),s),r=[]):r.push(s)}),t.push(...r.sort()),t},hb=e=>({cache:ub(e.cacheSize),parseClassName:mb(e),...ob(e)}),pb=/\s+/,xb=(e,t)=>{const{parseClassName:r,getClassGroupId:s,getConflictingClassGroupIds:a}=t,o=[],i=e.trim().split(pb);let l="";for(let c=i.length-1;c>=0;c-=1){const u=i[c],{modifiers:h,hasImportantModifier:m,baseClassName:g,maybePostfixModifierPosition:j}=r(u);let w=!!j,v=s(w?g.substring(0,j):g);if(!v){if(!w){l=u+(l.length>0?" "+l:l);continue}if(v=s(g),!v){l=u+(l.length>0?" "+l:l);continue}w=!1}const p=fb(h).join(":"),f=m?p+Mg:p,x=f+v;if(o.includes(x))continue;o.push(x);const y=a(v,w);for(let N=0;N<y.length;++N){const b=y[N];o.push(f+b)}l=u+(l.length>0?" "+l:l)}return l};function gb(){let e=0,t,r,s="";for(;e<arguments.length;)(t=arguments[e++])&&(r=Rg(t))&&(s&&(s+=" "),s+=r);return s}const Rg=e=>{if(typeof e=="string")return e;let t,r="";for(let s=0;s<e.length;s++)e[s]&&(t=Rg(e[s]))&&(r&&(r+=" "),r+=t);return r};function vb(e,...t){let r,s,a,o=i;function i(c){const u=t.reduce((h,m)=>m(h),e());return r=hb(u),s=r.cache.get,a=r.cache.set,o=l,l(c)}function l(c){const u=s(c);if(u)return u;const h=xb(c,r);return a(c,h),h}return function(){return o(gb.apply(null,arguments))}}const pe=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},Pg=/^\[(?:([a-z-]+):)?(.+)\]$/i,yb=/^\d+\/\d+$/,jb=new Set(["px","full","screen"]),wb=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Nb=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,bb=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Sb=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Cb=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,jn=e=>fs(e)||jb.has(e)||yb.test(e),Bn=e=>Is(e,"length",Ab),fs=e=>!!e&&!Number.isNaN(Number(e)),Ul=e=>Is(e,"number",fs),qs=e=>!!e&&Number.isInteger(Number(e)),kb=e=>e.endsWith("%")&&fs(e.slice(0,-1)),se=e=>Pg.test(e),zn=e=>wb.test(e),Db=new Set(["length","size","percentage"]),Tb=e=>Is(e,Db,Ag),Eb=e=>Is(e,"position",Ag),Mb=new Set(["image","url"]),Rb=e=>Is(e,Mb,Ib),Pb=e=>Is(e,"",Ob),Ks=()=>!0,Is=(e,t,r)=>{const s=Pg.exec(e);return s?s[1]?typeof t=="string"?s[1]===t:t.has(s[1]):r(s[2]):!1},Ab=e=>Nb.test(e)&&!bb.test(e),Ag=()=>!1,Ob=e=>Sb.test(e),Ib=e=>Cb.test(e),Fb=()=>{const e=pe("colors"),t=pe("spacing"),r=pe("blur"),s=pe("brightness"),a=pe("borderColor"),o=pe("borderRadius"),i=pe("borderSpacing"),l=pe("borderWidth"),c=pe("contrast"),u=pe("grayscale"),h=pe("hueRotate"),m=pe("invert"),g=pe("gap"),j=pe("gradientColorStops"),w=pe("gradientColorStopPositions"),v=pe("inset"),p=pe("margin"),f=pe("opacity"),x=pe("padding"),y=pe("saturate"),N=pe("scale"),b=pe("sepia"),T=pe("skew"),D=pe("space"),E=pe("translate"),S=()=>["auto","contain","none"],C=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto",se,t],k=()=>[se,t],M=()=>["",jn,Bn],$=()=>["auto",fs,se],I=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],B=()=>["solid","dashed","dotted","double","none"],z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],A=()=>["start","end","center","between","around","evenly","stretch"],F=()=>["","0",se],W=()=>["auto","avoid","all","avoid-page","page","left","right","column"],L=()=>[fs,se];return{cacheSize:500,separator:":",theme:{colors:[Ks],spacing:[jn,Bn],blur:["none","",zn,se],brightness:L(),borderColor:[e],borderRadius:["none","","full",zn,se],borderSpacing:k(),borderWidth:M(),contrast:L(),grayscale:F(),hueRotate:L(),invert:F(),gap:k(),gradientColorStops:[e],gradientColorStopPositions:[kb,Bn],inset:R(),margin:R(),opacity:L(),padding:k(),saturate:L(),scale:L(),sepia:F(),skew:L(),space:k(),translate:k()},classGroups:{aspect:[{aspect:["auto","square","video",se]}],container:["container"],columns:[{columns:[zn]}],"break-after":[{"break-after":W()}],"break-before":[{"break-before":W()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...I(),se]}],overflow:[{overflow:C()}],"overflow-x":[{"overflow-x":C()}],"overflow-y":[{"overflow-y":C()}],overscroll:[{overscroll:S()}],"overscroll-x":[{"overscroll-x":S()}],"overscroll-y":[{"overscroll-y":S()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",qs,se]}],basis:[{basis:R()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",se]}],grow:[{grow:F()}],shrink:[{shrink:F()}],order:[{order:["first","last","none",qs,se]}],"grid-cols":[{"grid-cols":[Ks]}],"col-start-end":[{col:["auto",{span:["full",qs,se]},se]}],"col-start":[{"col-start":$()}],"col-end":[{"col-end":$()}],"grid-rows":[{"grid-rows":[Ks]}],"row-start-end":[{row:["auto",{span:[qs,se]},se]}],"row-start":[{"row-start":$()}],"row-end":[{"row-end":$()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",se]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",se]}],gap:[{gap:[g]}],"gap-x":[{"gap-x":[g]}],"gap-y":[{"gap-y":[g]}],"justify-content":[{justify:["normal",...A()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...A(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...A(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[p]}],mx:[{mx:[p]}],my:[{my:[p]}],ms:[{ms:[p]}],me:[{me:[p]}],mt:[{mt:[p]}],mr:[{mr:[p]}],mb:[{mb:[p]}],ml:[{ml:[p]}],"space-x":[{"space-x":[D]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[D]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",se,t]}],"min-w":[{"min-w":[se,t,"min","max","fit"]}],"max-w":[{"max-w":[se,t,"none","full","min","max","fit","prose",{screen:[zn]},zn]}],h:[{h:[se,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[se,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[se,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[se,t,"auto","min","max","fit"]}],"font-size":[{text:["base",zn,Bn]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ul]}],"font-family":[{font:[Ks]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",se]}],"line-clamp":[{"line-clamp":["none",fs,Ul]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",jn,se]}],"list-image":[{"list-image":["none",se]}],"list-style-type":[{list:["none","disc","decimal",se]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[f]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[f]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...B(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",jn,Bn]}],"underline-offset":[{"underline-offset":["auto",jn,se]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",se]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",se]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[f]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...I(),Eb]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Tb]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Rb]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[j]}],"gradient-via":[{via:[j]}],"gradient-to":[{to:[j]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[f]}],"border-style":[{border:[...B(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[f]}],"divide-style":[{divide:B()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...B()]}],"outline-offset":[{"outline-offset":[jn,se]}],"outline-w":[{outline:[jn,Bn]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:M()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[f]}],"ring-offset-w":[{"ring-offset":[jn,Bn]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",zn,Pb]}],"shadow-color":[{shadow:[Ks]}],opacity:[{opacity:[f]}],"mix-blend":[{"mix-blend":[...z(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":z()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[s]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",zn,se]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[m]}],saturate:[{saturate:[y]}],sepia:[{sepia:[b]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[f]}],"backdrop-saturate":[{"backdrop-saturate":[y]}],"backdrop-sepia":[{"backdrop-sepia":[b]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",se]}],duration:[{duration:L()}],ease:[{ease:["linear","in","out","in-out",se]}],delay:[{delay:L()}],animate:[{animate:["none","spin","ping","pulse","bounce",se]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[N]}],"scale-x":[{"scale-x":[N]}],"scale-y":[{"scale-y":[N]}],rotate:[{rotate:[qs,se]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[T]}],"skew-y":[{"skew-y":[T]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",se]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",se]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",se]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[jn,Bn,Ul]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},_b=vb(Fb);function X(...e){return _b(Tg(e))}function Lb(e){return(typeof e=="string"?new Date(e):e).toLocaleDateString("en-NZ",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}function bo(){return new Date().toISOString().split("T")[0]}const hu=mu("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all duration-200 ease-in-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 active:scale-95",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 hover:shadow-md hover:shadow-primary/20",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 hover:shadow-md hover:shadow-destructive/20",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground hover:border-accent",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 hover:shadow-md",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-12 rounded-md px-8 text-base",xl:"h-14 rounded-md px-10 text-lg",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),P=d.forwardRef(({className:e,variant:t,size:r,...s},a)=>n.jsx("button",{className:X(hu({variant:t,size:r,className:e})),ref:a,...s}));P.displayName="Button";const Y=d.forwardRef(({className:e,type:t,...r},s)=>n.jsx("input",{type:t,className:X("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...r}));Y.displayName="Input";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var $b={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bb=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Q=(e,t)=>{const r=d.forwardRef(({color:s="currentColor",size:a=24,strokeWidth:o=2,absoluteStrokeWidth:i,className:l="",children:c,...u},h)=>d.createElement("svg",{ref:h,...$b,width:a,height:a,stroke:s,strokeWidth:i?Number(o)*24/Number(a):o,className:["lucide",`lucide-${Bb(e)}`,l].join(" "),...u},[...t.map(([m,g])=>d.createElement(m,g)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=Q("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=Q("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zb=Q("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wb=Q("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Og=Q("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=Q("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ki=Q("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=Q("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pu=Q("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=Q("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qi=Q("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=Q("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=Q("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ub=Q("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xu=Q("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=Q("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yb=Q("Construction",[["rect",{x:"2",y:"6",width:"20",height:"8",rx:"1",key:"1estib"}],["path",{d:"M17 14v7",key:"7m2elx"}],["path",{d:"M7 14v7",key:"1cm7wv"}],["path",{d:"M17 3v3",key:"1v4jwn"}],["path",{d:"M7 3v3",key:"7o6guu"}],["path",{d:"M10 14 2.3 6.3",key:"1023jk"}],["path",{d:"m14 6 7.7 7.7",key:"1s8pl2"}],["path",{d:"m8 6 8 8",key:"hl96qh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gb=Q("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ig=Q("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=Q("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=Q("HeartPulse",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"1uw2ng"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hb=Q("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vb=Q("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qb=Q("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=Q("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kb=Q("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qb=Q("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=Q("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zb=Q("Minimize",[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lf=Q("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=Q("PackageCheck",[["path",{d:"m16 16 2 2 4-4",key:"gfu2re"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fg=Q("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=Q("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=Q("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=Q("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xb=Q("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _g=Q("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jb=Q("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eS=Q("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fn=Q("Snowflake",[["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"m20 16-4-4 4-4",key:"rquw4f"}],["path",{d:"m4 8 4 4-4 4",key:"12s3z9"}],["path",{d:"m16 4-4 4-4-4",key:"1tumq1"}],["path",{d:"m8 20 4-4 4 4",key:"9p200w"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=Q("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tS=Q("Stethoscope",[["path",{d:"M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3",key:"1jd90r"}],["path",{d:"M8 15v1a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6v-4",key:"126ukv"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nS=Q("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rS=Q("ThermometerSnowflake",[["path",{d:"M2 12h10",key:"19562f"}],["path",{d:"M9 4v16",key:"81ygyz"}],["path",{d:"m3 9 3 3-3 3",key:"1sas0l"}],["path",{d:"M12 6 9 9 6 6",key:"pfrgxu"}],["path",{d:"m6 18 3-3 1.5 1.5",key:"1e277p"}],["path",{d:"M20 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"iof6y5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=Q("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=Q("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=Q("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zi=Q("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gu=Q("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vu=Q("UtensilsCrossed",[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=Q("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=Q("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lg=Q("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),sS=new Date().toISOString();function aS({onPasswordCorrect:e,onError:t}){const[r,s]=d.useState(""),[a,o]=d.useState(""),[i,l]=d.useState(!1),[c,u]=d.useState(!1),[h,m]=d.useState(0),[g,j]=d.useState(null),w=Ie(N=>N.login),v=5,p=15*60*1e3,f=!!(g&&Date.now()<g),x=async N=>{if(N.preventDefault(),f){const b=Math.ceil((g-Date.now())/1e3/60);t(`Too many failed attempts. Try again in ${b} minutes.`);return}if(!r.trim()){t("Please select a username");return}if(!a.trim()){t("Please enter a password");return}l(!0);try{await w(r,a),m(0),j(null),e()}catch(b){const T=h+1;if(m(T),T>=v){const D=Date.now()+p;j(D),t("Too many failed attempts. Locked for 15 minutes.")}else{const D=b instanceof Error?b.message:"Login failed";t(`${D} (${T}/${v} attempts)`)}o("")}finally{l(!1)}},y=()=>{document.fullscreenElement?document.exitFullscreen&&(document.exitFullscreen(),u(!1)):(document.documentElement.requestFullscreen(),u(!0))};return n.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-background p-4 relative",children:[n.jsx("button",{onClick:y,className:"absolute top-4 right-4 p-2 rounded-md hover:bg-accent transition-colors","aria-label":"Toggle fullscreen",children:c?n.jsx(Zb,{className:"h-4 w-4 text-muted-foreground"}):n.jsx(Qb,{className:"h-4 w-4 text-muted-foreground"})}),n.jsx("div",{className:"w-full text-center mb-12",children:n.jsx("h1",{className:"login-title font-bold tracking-tight",children:"Taquero"})}),n.jsx("div",{className:"w-full max-w-md space-y-6",children:n.jsxs("form",{onSubmit:x,className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{htmlFor:"username",className:"text-sm font-medium",children:"Select User"}),n.jsxs("select",{id:"username",value:r,onChange:N=>s(N.target.value),className:"flex h-14 w-full rounded-md border border-input bg-background px-3 py-2 text-lg ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",disabled:f||i,required:!0,children:[n.jsx("option",{value:"",children:"Choose your name..."}),kg.map(N=>n.jsx("option",{value:N,children:N},N))]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{htmlFor:"password",className:"text-sm font-medium",children:"Password"}),n.jsx(Y,{id:"password",type:"password",placeholder:f?"Locked - Too many attempts":"Enter password",value:a,onChange:N=>o(N.target.value),className:"h-14 text-lg",autoComplete:"off",disabled:f||i,required:!0})]}),n.jsx(P,{type:"submit",className:"w-full",size:"lg",disabled:f||i,children:i?"Logging in...":f?"Locked":"Login"})]})}),n.jsx("div",{className:"absolute bottom-4 left-0 right-0 text-center",children:n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Build: ",new Date(sS).toLocaleString("en-NZ",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1})]})})]})}function re(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e==null||e(a),r===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function $f(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function _s(...e){return t=>{let r=!1;const s=e.map(a=>{const o=$f(a,t);return!r&&typeof o=="function"&&(r=!0),o});if(r)return()=>{for(let a=0;a<s.length;a++){const o=s[a];typeof o=="function"?o():$f(e[a],null)}}}}function Re(...e){return d.useCallback(_s(...e),e)}function oS(e,t){const r=d.createContext(t),s=o=>{const{children:i,...l}=o,c=d.useMemo(()=>l,Object.values(l));return n.jsx(r.Provider,{value:c,children:i})};s.displayName=e+"Provider";function a(o){const i=d.useContext(r);if(i)return i;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${e}\``)}return[s,a]}function gr(e,t=[]){let r=[];function s(o,i){const l=d.createContext(i),c=r.length;r=[...r,i];const u=m=>{var f;const{scope:g,children:j,...w}=m,v=((f=g==null?void 0:g[e])==null?void 0:f[c])||l,p=d.useMemo(()=>w,Object.values(w));return n.jsx(v.Provider,{value:p,children:j})};u.displayName=o+"Provider";function h(m,g){var v;const j=((v=g==null?void 0:g[e])==null?void 0:v[c])||l,w=d.useContext(j);if(w)return w;if(i!==void 0)return i;throw new Error(`\`${m}\` must be used within \`${o}\``)}return[u,h]}const a=()=>{const o=r.map(i=>d.createContext(i));return function(l){const c=(l==null?void 0:l[e])||o;return d.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[s,iS(a,...t)]}function iS(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const s=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const i=s.reduce((l,{useScope:c,scopeName:u})=>{const m=c(o)[`__scope${u}`];return{...l,...m}},{});return d.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return r.scopeName=t.scopeName,r}var dr=globalThis!=null&&globalThis.document?d.useLayoutEffect:()=>{},lS=Va[" useInsertionEffect ".trim().toString()]||dr;function Xi({prop:e,defaultProp:t,onChange:r=()=>{},caller:s}){const[a,o,i]=cS({defaultProp:t,onChange:r}),l=e!==void 0,c=l?e:a;{const h=d.useRef(e!==void 0);d.useEffect(()=>{const m=h.current;m!==l&&console.warn(`${s} is changing from ${m?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=l},[l,s])}const u=d.useCallback(h=>{var m;if(l){const g=dS(h)?h(e):h;g!==e&&((m=i.current)==null||m.call(i,g))}else o(h)},[l,e,o,i]);return[c,u]}function cS({defaultProp:e,onChange:t}){const[r,s]=d.useState(e),a=d.useRef(r),o=d.useRef(t);return lS(()=>{o.current=t},[t]),d.useEffect(()=>{var i;a.current!==r&&((i=o.current)==null||i.call(o,r),a.current=r)},[r,a]),[r,s,o]}function dS(e){return typeof e=="function"}function La(e){const t=uS(e),r=d.forwardRef((s,a)=>{const{children:o,...i}=s,l=d.Children.toArray(o),c=l.find(fS);if(c){const u=c.props.children,h=l.map(m=>m===c?d.Children.count(u)>1?d.Children.only(null):d.isValidElement(u)?u.props.children:null:m);return n.jsx(t,{...i,ref:a,children:d.isValidElement(u)?d.cloneElement(u,void 0,h):null})}return n.jsx(t,{...i,ref:a,children:o})});return r.displayName=`${e}.Slot`,r}function uS(e){const t=d.forwardRef((r,s)=>{const{children:a,...o}=r;if(d.isValidElement(a)){const i=pS(a),l=hS(o,a.props);return a.type!==d.Fragment&&(l.ref=s?_s(s,i):i),d.cloneElement(a,l)}return d.Children.count(a)>1?d.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var $g=Symbol("radix.slottable");function mS(e){const t=({children:r})=>n.jsx(n.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=$g,t}function fS(e){return d.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===$g}function hS(e,t){const r={...t};for(const s in t){const a=e[s],o=t[s];/^on[A-Z]/.test(s)?a&&o?r[s]=(...l)=>{const c=o(...l);return a(...l),c}:a&&(r[s]=a):s==="style"?r[s]={...a,...o}:s==="className"&&(r[s]=[a,o].filter(Boolean).join(" "))}return{...e,...r}}function pS(e){var s,a;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var xS=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],be=xS.reduce((e,t)=>{const r=La(`Primitive.${t}`),s=d.forwardRef((a,o)=>{const{asChild:i,...l}=a,c=i?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(c,{...l,ref:o})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function Bg(e,t){e&&Gi.flushSync(()=>e.dispatchEvent(t))}function zg(e){const t=e+"CollectionProvider",[r,s]=gr(t),[a,o]=r(t,{collectionRef:{current:null},itemMap:new Map}),i=v=>{const{scope:p,children:f}=v,x=on.useRef(null),y=on.useRef(new Map).current;return n.jsx(a,{scope:p,itemMap:y,collectionRef:x,children:f})};i.displayName=t;const l=e+"CollectionSlot",c=La(l),u=on.forwardRef((v,p)=>{const{scope:f,children:x}=v,y=o(l,f),N=Re(p,y.collectionRef);return n.jsx(c,{ref:N,children:x})});u.displayName=l;const h=e+"CollectionItemSlot",m="data-radix-collection-item",g=La(h),j=on.forwardRef((v,p)=>{const{scope:f,children:x,...y}=v,N=on.useRef(null),b=Re(p,N),T=o(h,f);return on.useEffect(()=>(T.itemMap.set(N,{ref:N,...y}),()=>void T.itemMap.delete(N))),n.jsx(g,{[m]:"",ref:b,children:x})});j.displayName=h;function w(v){const p=o(e+"CollectionConsumer",v);return on.useCallback(()=>{const x=p.collectionRef.current;if(!x)return[];const y=Array.from(x.querySelectorAll(`[${m}]`));return Array.from(p.itemMap.values()).sort((T,D)=>y.indexOf(T.ref.current)-y.indexOf(D.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:i,Slot:u,ItemSlot:j},w,s]}var gS=d.createContext(void 0);function Wg(e){const t=d.useContext(gS);return e||t||"ltr"}function Pn(e){const t=d.useRef(e);return d.useEffect(()=>{t.current=e}),d.useMemo(()=>(...r)=>{var s;return(s=t.current)==null?void 0:s.call(t,...r)},[])}function vS(e,t=globalThis==null?void 0:globalThis.document){const r=Pn(e);d.useEffect(()=>{const s=a=>{a.key==="Escape"&&r(a)};return t.addEventListener("keydown",s,{capture:!0}),()=>t.removeEventListener("keydown",s,{capture:!0})},[r,t])}var yS="DismissableLayer",od="dismissableLayer.update",jS="dismissableLayer.pointerDownOutside",wS="dismissableLayer.focusOutside",Bf,Ug=d.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),yu=d.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:o,onInteractOutside:i,onDismiss:l,...c}=e,u=d.useContext(Ug),[h,m]=d.useState(null),g=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,j]=d.useState({}),w=Re(t,D=>m(D)),v=Array.from(u.layers),[p]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),f=v.indexOf(p),x=h?v.indexOf(h):-1,y=u.layersWithOutsidePointerEventsDisabled.size>0,N=x>=f,b=SS(D=>{const E=D.target,S=[...u.branches].some(C=>C.contains(E));!N||S||(a==null||a(D),i==null||i(D),D.defaultPrevented||l==null||l())},g),T=CS(D=>{const E=D.target;[...u.branches].some(C=>C.contains(E))||(o==null||o(D),i==null||i(D),D.defaultPrevented||l==null||l())},g);return vS(D=>{x===u.layers.size-1&&(s==null||s(D),!D.defaultPrevented&&l&&(D.preventDefault(),l()))},g),d.useEffect(()=>{if(h)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Bf=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),zf(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=Bf)}},[h,g,r,u]),d.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),zf())},[h,u]),d.useEffect(()=>{const D=()=>j({});return document.addEventListener(od,D),()=>document.removeEventListener(od,D)},[]),n.jsx(be.div,{...c,ref:w,style:{pointerEvents:y?N?"auto":"none":void 0,...e.style},onFocusCapture:re(e.onFocusCapture,T.onFocusCapture),onBlurCapture:re(e.onBlurCapture,T.onBlurCapture),onPointerDownCapture:re(e.onPointerDownCapture,b.onPointerDownCapture)})});yu.displayName=yS;var NS="DismissableLayerBranch",bS=d.forwardRef((e,t)=>{const r=d.useContext(Ug),s=d.useRef(null),a=Re(t,s);return d.useEffect(()=>{const o=s.current;if(o)return r.branches.add(o),()=>{r.branches.delete(o)}},[r.branches]),n.jsx(be.div,{...e,ref:a})});bS.displayName=NS;function SS(e,t=globalThis==null?void 0:globalThis.document){const r=Pn(e),s=d.useRef(!1),a=d.useRef(()=>{});return d.useEffect(()=>{const o=l=>{if(l.target&&!s.current){let c=function(){Yg(jS,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);s.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",o),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>s.current=!0}}function CS(e,t=globalThis==null?void 0:globalThis.document){const r=Pn(e),s=d.useRef(!1);return d.useEffect(()=>{const a=o=>{o.target&&!s.current&&Yg(wS,r,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,r]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function zf(){const e=new CustomEvent(od);document.dispatchEvent(e)}function Yg(e,t,r,{discrete:s}){const a=r.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),s?Bg(a,o):a.dispatchEvent(o)}var Yl=0;function Gg(){d.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Wf()),document.body.insertAdjacentElement("beforeend",e[1]??Wf()),Yl++,()=>{Yl===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Yl--}},[])}function Wf(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Gl="focusScope.autoFocusOnMount",Hl="focusScope.autoFocusOnUnmount",Uf={bubbles:!1,cancelable:!0},kS="FocusScope",ju=d.forwardRef((e,t)=>{const{loop:r=!1,trapped:s=!1,onMountAutoFocus:a,onUnmountAutoFocus:o,...i}=e,[l,c]=d.useState(null),u=Pn(a),h=Pn(o),m=d.useRef(null),g=Re(t,v=>c(v)),j=d.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;d.useEffect(()=>{if(s){let v=function(y){if(j.paused||!l)return;const N=y.target;l.contains(N)?m.current=N:Un(m.current,{select:!0})},p=function(y){if(j.paused||!l)return;const N=y.relatedTarget;N!==null&&(l.contains(N)||Un(m.current,{select:!0}))},f=function(y){if(document.activeElement===document.body)for(const b of y)b.removedNodes.length>0&&Un(l)};document.addEventListener("focusin",v),document.addEventListener("focusout",p);const x=new MutationObserver(f);return l&&x.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",p),x.disconnect()}}},[s,l,j.paused]),d.useEffect(()=>{if(l){Gf.add(j);const v=document.activeElement;if(!l.contains(v)){const f=new CustomEvent(Gl,Uf);l.addEventListener(Gl,u),l.dispatchEvent(f),f.defaultPrevented||(DS(PS(Hg(l)),{select:!0}),document.activeElement===v&&Un(l))}return()=>{l.removeEventListener(Gl,u),setTimeout(()=>{const f=new CustomEvent(Hl,Uf);l.addEventListener(Hl,h),l.dispatchEvent(f),f.defaultPrevented||Un(v??document.body,{select:!0}),l.removeEventListener(Hl,h),Gf.remove(j)},0)}}},[l,u,h,j]);const w=d.useCallback(v=>{if(!r&&!s||j.paused)return;const p=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,f=document.activeElement;if(p&&f){const x=v.currentTarget,[y,N]=TS(x);y&&N?!v.shiftKey&&f===N?(v.preventDefault(),r&&Un(y,{select:!0})):v.shiftKey&&f===y&&(v.preventDefault(),r&&Un(N,{select:!0})):f===x&&v.preventDefault()}},[r,s,j.paused]);return n.jsx(be.div,{tabIndex:-1,...i,ref:g,onKeyDown:w})});ju.displayName=kS;function DS(e,{select:t=!1}={}){const r=document.activeElement;for(const s of e)if(Un(s,{select:t}),document.activeElement!==r)return}function TS(e){const t=Hg(e),r=Yf(t,e),s=Yf(t.reverse(),e);return[r,s]}function Hg(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Yf(e,t){for(const r of e)if(!ES(r,{upTo:t}))return r}function ES(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function MS(e){return e instanceof HTMLInputElement&&"select"in e}function Un(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&MS(e)&&t&&e.select()}}var Gf=RS();function RS(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=Hf(e,t),e.unshift(t)},remove(t){var r;e=Hf(e,t),(r=e[0])==null||r.resume()}}}function Hf(e,t){const r=[...e],s=r.indexOf(t);return s!==-1&&r.splice(s,1),r}function PS(e){return e.filter(t=>t.tagName!=="A")}var AS=Va[" useId ".trim().toString()]||(()=>{}),OS=0;function xs(e){const[t,r]=d.useState(AS());return dr(()=>{r(s=>s??String(OS++))},[e]),t?`radix-${t}`:""}const IS=["top","right","bottom","left"],ur=Math.min,Nt=Math.max,xi=Math.round,So=Math.floor,pn=e=>({x:e,y:e}),FS={left:"right",right:"left",bottom:"top",top:"bottom"},_S={start:"end",end:"start"};function id(e,t,r){return Nt(e,ur(t,r))}function An(e,t){return typeof e=="function"?e(t):e}function On(e){return e.split("-")[0]}function Ls(e){return e.split("-")[1]}function wu(e){return e==="x"?"y":"x"}function Nu(e){return e==="y"?"height":"width"}const LS=new Set(["top","bottom"]);function dn(e){return LS.has(On(e))?"y":"x"}function bu(e){return wu(dn(e))}function $S(e,t,r){r===void 0&&(r=!1);const s=Ls(e),a=bu(e),o=Nu(a);let i=a==="x"?s===(r?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(i=gi(i)),[i,gi(i)]}function BS(e){const t=gi(e);return[ld(e),t,ld(t)]}function ld(e){return e.replace(/start|end/g,t=>_S[t])}const Vf=["left","right"],qf=["right","left"],zS=["top","bottom"],WS=["bottom","top"];function US(e,t,r){switch(e){case"top":case"bottom":return r?t?qf:Vf:t?Vf:qf;case"left":case"right":return t?zS:WS;default:return[]}}function YS(e,t,r,s){const a=Ls(e);let o=US(On(e),r==="start",s);return a&&(o=o.map(i=>i+"-"+a),t&&(o=o.concat(o.map(ld)))),o}function gi(e){return e.replace(/left|right|bottom|top/g,t=>FS[t])}function GS(e){return{top:0,right:0,bottom:0,left:0,...e}}function Vg(e){return typeof e!="number"?GS(e):{top:e,right:e,bottom:e,left:e}}function vi(e){const{x:t,y:r,width:s,height:a}=e;return{width:s,height:a,top:r,left:t,right:t+s,bottom:r+a,x:t,y:r}}function Kf(e,t,r){let{reference:s,floating:a}=e;const o=dn(t),i=bu(t),l=Nu(i),c=On(t),u=o==="y",h=s.x+s.width/2-a.width/2,m=s.y+s.height/2-a.height/2,g=s[l]/2-a[l]/2;let j;switch(c){case"top":j={x:h,y:s.y-a.height};break;case"bottom":j={x:h,y:s.y+s.height};break;case"right":j={x:s.x+s.width,y:m};break;case"left":j={x:s.x-a.width,y:m};break;default:j={x:s.x,y:s.y}}switch(Ls(t)){case"start":j[i]-=g*(r&&u?-1:1);break;case"end":j[i]+=g*(r&&u?-1:1);break}return j}const HS=async(e,t,r)=>{const{placement:s="bottom",strategy:a="absolute",middleware:o=[],platform:i}=r,l=o.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(t));let u=await i.getElementRects({reference:e,floating:t,strategy:a}),{x:h,y:m}=Kf(u,s,c),g=s,j={},w=0;for(let v=0;v<l.length;v++){const{name:p,fn:f}=l[v],{x,y,data:N,reset:b}=await f({x:h,y:m,initialPlacement:s,placement:g,strategy:a,middlewareData:j,rects:u,platform:i,elements:{reference:e,floating:t}});h=x??h,m=y??m,j={...j,[p]:{...j[p],...N}},b&&w<=50&&(w++,typeof b=="object"&&(b.placement&&(g=b.placement),b.rects&&(u=b.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:a}):b.rects),{x:h,y:m}=Kf(u,g,c)),v=-1)}return{x:h,y:m,placement:g,strategy:a,middlewareData:j}};async function $a(e,t){var r;t===void 0&&(t={});const{x:s,y:a,platform:o,rects:i,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:m="floating",altBoundary:g=!1,padding:j=0}=An(t,e),w=Vg(j),p=l[g?m==="floating"?"reference":"floating":m],f=vi(await o.getClippingRect({element:(r=await(o.isElement==null?void 0:o.isElement(p)))==null||r?p:p.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:u,rootBoundary:h,strategy:c})),x=m==="floating"?{x:s,y:a,width:i.floating.width,height:i.floating.height}:i.reference,y=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),N=await(o.isElement==null?void 0:o.isElement(y))?await(o.getScale==null?void 0:o.getScale(y))||{x:1,y:1}:{x:1,y:1},b=vi(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:x,offsetParent:y,strategy:c}):x);return{top:(f.top-b.top+w.top)/N.y,bottom:(b.bottom-f.bottom+w.bottom)/N.y,left:(f.left-b.left+w.left)/N.x,right:(b.right-f.right+w.right)/N.x}}const VS=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:s,placement:a,rects:o,platform:i,elements:l,middlewareData:c}=t,{element:u,padding:h=0}=An(e,t)||{};if(u==null)return{};const m=Vg(h),g={x:r,y:s},j=bu(a),w=Nu(j),v=await i.getDimensions(u),p=j==="y",f=p?"top":"left",x=p?"bottom":"right",y=p?"clientHeight":"clientWidth",N=o.reference[w]+o.reference[j]-g[j]-o.floating[w],b=g[j]-o.reference[j],T=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u));let D=T?T[y]:0;(!D||!await(i.isElement==null?void 0:i.isElement(T)))&&(D=l.floating[y]||o.floating[w]);const E=N/2-b/2,S=D/2-v[w]/2-1,C=ur(m[f],S),R=ur(m[x],S),k=C,M=D-v[w]-R,$=D/2-v[w]/2+E,I=id(k,$,M),B=!c.arrow&&Ls(a)!=null&&$!==I&&o.reference[w]/2-($<k?C:R)-v[w]/2<0,z=B?$<k?$-k:$-M:0;return{[j]:g[j]+z,data:{[j]:I,centerOffset:$-I-z,...B&&{alignmentOffset:z}},reset:B}}}),qS=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,s;const{placement:a,middlewareData:o,rects:i,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:h=!0,crossAxis:m=!0,fallbackPlacements:g,fallbackStrategy:j="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:v=!0,...p}=An(e,t);if((r=o.arrow)!=null&&r.alignmentOffset)return{};const f=On(a),x=dn(l),y=On(l)===l,N=await(c.isRTL==null?void 0:c.isRTL(u.floating)),b=g||(y||!v?[gi(l)]:BS(l)),T=w!=="none";!g&&T&&b.push(...YS(l,v,w,N));const D=[l,...b],E=await $a(t,p),S=[];let C=((s=o.flip)==null?void 0:s.overflows)||[];if(h&&S.push(E[f]),m){const $=$S(a,i,N);S.push(E[$[0]],E[$[1]])}if(C=[...C,{placement:a,overflows:S}],!S.every($=>$<=0)){var R,k;const $=(((R=o.flip)==null?void 0:R.index)||0)+1,I=D[$];if(I&&(!(m==="alignment"?x!==dn(I):!1)||C.every(A=>dn(A.placement)===x?A.overflows[0]>0:!0)))return{data:{index:$,overflows:C},reset:{placement:I}};let B=(k=C.filter(z=>z.overflows[0]<=0).sort((z,A)=>z.overflows[1]-A.overflows[1])[0])==null?void 0:k.placement;if(!B)switch(j){case"bestFit":{var M;const z=(M=C.filter(A=>{if(T){const F=dn(A.placement);return F===x||F==="y"}return!0}).map(A=>[A.placement,A.overflows.filter(F=>F>0).reduce((F,W)=>F+W,0)]).sort((A,F)=>A[1]-F[1])[0])==null?void 0:M[0];z&&(B=z);break}case"initialPlacement":B=l;break}if(a!==B)return{reset:{placement:B}}}return{}}}};function Qf(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Zf(e){return IS.some(t=>e[t]>=0)}const KS=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:s="referenceHidden",...a}=An(e,t);switch(s){case"referenceHidden":{const o=await $a(t,{...a,elementContext:"reference"}),i=Qf(o,r.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:Zf(i)}}}case"escaped":{const o=await $a(t,{...a,altBoundary:!0}),i=Qf(o,r.floating);return{data:{escapedOffsets:i,escaped:Zf(i)}}}default:return{}}}}},qg=new Set(["left","top"]);async function QS(e,t){const{placement:r,platform:s,elements:a}=e,o=await(s.isRTL==null?void 0:s.isRTL(a.floating)),i=On(r),l=Ls(r),c=dn(r)==="y",u=qg.has(i)?-1:1,h=o&&c?-1:1,m=An(t,e);let{mainAxis:g,crossAxis:j,alignmentAxis:w}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return l&&typeof w=="number"&&(j=l==="end"?w*-1:w),c?{x:j*h,y:g*u}:{x:g*u,y:j*h}}const ZS=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,s;const{x:a,y:o,placement:i,middlewareData:l}=t,c=await QS(t,e);return i===((r=l.offset)==null?void 0:r.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:a+c.x,y:o+c.y,data:{...c,placement:i}}}}},XS=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:s,placement:a}=t,{mainAxis:o=!0,crossAxis:i=!1,limiter:l={fn:p=>{let{x:f,y:x}=p;return{x:f,y:x}}},...c}=An(e,t),u={x:r,y:s},h=await $a(t,c),m=dn(On(a)),g=wu(m);let j=u[g],w=u[m];if(o){const p=g==="y"?"top":"left",f=g==="y"?"bottom":"right",x=j+h[p],y=j-h[f];j=id(x,j,y)}if(i){const p=m==="y"?"top":"left",f=m==="y"?"bottom":"right",x=w+h[p],y=w-h[f];w=id(x,w,y)}const v=l.fn({...t,[g]:j,[m]:w});return{...v,data:{x:v.x-r,y:v.y-s,enabled:{[g]:o,[m]:i}}}}}},JS=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:s,placement:a,rects:o,middlewareData:i}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=An(e,t),h={x:r,y:s},m=dn(a),g=wu(m);let j=h[g],w=h[m];const v=An(l,t),p=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(c){const y=g==="y"?"height":"width",N=o.reference[g]-o.floating[y]+p.mainAxis,b=o.reference[g]+o.reference[y]-p.mainAxis;j<N?j=N:j>b&&(j=b)}if(u){var f,x;const y=g==="y"?"width":"height",N=qg.has(On(a)),b=o.reference[m]-o.floating[y]+(N&&((f=i.offset)==null?void 0:f[m])||0)+(N?0:p.crossAxis),T=o.reference[m]+o.reference[y]+(N?0:((x=i.offset)==null?void 0:x[m])||0)-(N?p.crossAxis:0);w<b?w=b:w>T&&(w=T)}return{[g]:j,[m]:w}}}},e2=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,s;const{placement:a,rects:o,platform:i,elements:l}=t,{apply:c=()=>{},...u}=An(e,t),h=await $a(t,u),m=On(a),g=Ls(a),j=dn(a)==="y",{width:w,height:v}=o.floating;let p,f;m==="top"||m==="bottom"?(p=m,f=g===(await(i.isRTL==null?void 0:i.isRTL(l.floating))?"start":"end")?"left":"right"):(f=m,p=g==="end"?"top":"bottom");const x=v-h.top-h.bottom,y=w-h.left-h.right,N=ur(v-h[p],x),b=ur(w-h[f],y),T=!t.middlewareData.shift;let D=N,E=b;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(E=y),(s=t.middlewareData.shift)!=null&&s.enabled.y&&(D=x),T&&!g){const C=Nt(h.left,0),R=Nt(h.right,0),k=Nt(h.top,0),M=Nt(h.bottom,0);j?E=w-2*(C!==0||R!==0?C+R:Nt(h.left,h.right)):D=v-2*(k!==0||M!==0?k+M:Nt(h.top,h.bottom))}await c({...t,availableWidth:E,availableHeight:D});const S=await i.getDimensions(l.floating);return w!==S.width||v!==S.height?{reset:{rects:!0}}:{}}}};function Ji(){return typeof window<"u"}function $s(e){return Kg(e)?(e.nodeName||"").toLowerCase():"#document"}function Ct(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function gn(e){var t;return(t=(Kg(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Kg(e){return Ji()?e instanceof Node||e instanceof Ct(e).Node:!1}function en(e){return Ji()?e instanceof Element||e instanceof Ct(e).Element:!1}function xn(e){return Ji()?e instanceof HTMLElement||e instanceof Ct(e).HTMLElement:!1}function Xf(e){return!Ji()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Ct(e).ShadowRoot}const t2=new Set(["inline","contents"]);function eo(e){const{overflow:t,overflowX:r,overflowY:s,display:a}=tn(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+r)&&!t2.has(a)}const n2=new Set(["table","td","th"]);function r2(e){return n2.has($s(e))}const s2=[":popover-open",":modal"];function el(e){return s2.some(t=>{try{return e.matches(t)}catch{return!1}})}const a2=["transform","translate","scale","rotate","perspective"],o2=["transform","translate","scale","rotate","perspective","filter"],i2=["paint","layout","strict","content"];function Su(e){const t=Cu(),r=en(e)?tn(e):e;return a2.some(s=>r[s]?r[s]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||o2.some(s=>(r.willChange||"").includes(s))||i2.some(s=>(r.contain||"").includes(s))}function l2(e){let t=mr(e);for(;xn(t)&&!Ms(t);){if(Su(t))return t;if(el(t))return null;t=mr(t)}return null}function Cu(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const c2=new Set(["html","body","#document"]);function Ms(e){return c2.has($s(e))}function tn(e){return Ct(e).getComputedStyle(e)}function tl(e){return en(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function mr(e){if($s(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Xf(e)&&e.host||gn(e);return Xf(t)?t.host:t}function Qg(e){const t=mr(e);return Ms(t)?e.ownerDocument?e.ownerDocument.body:e.body:xn(t)&&eo(t)?t:Qg(t)}function Ba(e,t,r){var s;t===void 0&&(t=[]),r===void 0&&(r=!0);const a=Qg(e),o=a===((s=e.ownerDocument)==null?void 0:s.body),i=Ct(a);if(o){const l=cd(i);return t.concat(i,i.visualViewport||[],eo(a)?a:[],l&&r?Ba(l):[])}return t.concat(a,Ba(a,[],r))}function cd(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Zg(e){const t=tn(e);let r=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const a=xn(e),o=a?e.offsetWidth:r,i=a?e.offsetHeight:s,l=xi(r)!==o||xi(s)!==i;return l&&(r=o,s=i),{width:r,height:s,$:l}}function ku(e){return en(e)?e:e.contextElement}function gs(e){const t=ku(e);if(!xn(t))return pn(1);const r=t.getBoundingClientRect(),{width:s,height:a,$:o}=Zg(t);let i=(o?xi(r.width):r.width)/s,l=(o?xi(r.height):r.height)/a;return(!i||!Number.isFinite(i))&&(i=1),(!l||!Number.isFinite(l))&&(l=1),{x:i,y:l}}const d2=pn(0);function Xg(e){const t=Ct(e);return!Cu()||!t.visualViewport?d2:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function u2(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==Ct(e)?!1:t}function Fr(e,t,r,s){t===void 0&&(t=!1),r===void 0&&(r=!1);const a=e.getBoundingClientRect(),o=ku(e);let i=pn(1);t&&(s?en(s)&&(i=gs(s)):i=gs(e));const l=u2(o,r,s)?Xg(o):pn(0);let c=(a.left+l.x)/i.x,u=(a.top+l.y)/i.y,h=a.width/i.x,m=a.height/i.y;if(o){const g=Ct(o),j=s&&en(s)?Ct(s):s;let w=g,v=cd(w);for(;v&&s&&j!==w;){const p=gs(v),f=v.getBoundingClientRect(),x=tn(v),y=f.left+(v.clientLeft+parseFloat(x.paddingLeft))*p.x,N=f.top+(v.clientTop+parseFloat(x.paddingTop))*p.y;c*=p.x,u*=p.y,h*=p.x,m*=p.y,c+=y,u+=N,w=Ct(v),v=cd(w)}}return vi({width:h,height:m,x:c,y:u})}function nl(e,t){const r=tl(e).scrollLeft;return t?t.left+r:Fr(gn(e)).left+r}function Jg(e,t){const r=e.getBoundingClientRect(),s=r.left+t.scrollLeft-nl(e,r),a=r.top+t.scrollTop;return{x:s,y:a}}function m2(e){let{elements:t,rect:r,offsetParent:s,strategy:a}=e;const o=a==="fixed",i=gn(s),l=t?el(t.floating):!1;if(s===i||l&&o)return r;let c={scrollLeft:0,scrollTop:0},u=pn(1);const h=pn(0),m=xn(s);if((m||!m&&!o)&&(($s(s)!=="body"||eo(i))&&(c=tl(s)),xn(s))){const j=Fr(s);u=gs(s),h.x=j.x+s.clientLeft,h.y=j.y+s.clientTop}const g=i&&!m&&!o?Jg(i,c):pn(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+h.x+g.x,y:r.y*u.y-c.scrollTop*u.y+h.y+g.y}}function f2(e){return Array.from(e.getClientRects())}function h2(e){const t=gn(e),r=tl(e),s=e.ownerDocument.body,a=Nt(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),o=Nt(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight);let i=-r.scrollLeft+nl(e);const l=-r.scrollTop;return tn(s).direction==="rtl"&&(i+=Nt(t.clientWidth,s.clientWidth)-a),{width:a,height:o,x:i,y:l}}const Jf=25;function p2(e,t){const r=Ct(e),s=gn(e),a=r.visualViewport;let o=s.clientWidth,i=s.clientHeight,l=0,c=0;if(a){o=a.width,i=a.height;const h=Cu();(!h||h&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}const u=nl(s);if(u<=0){const h=s.ownerDocument,m=h.body,g=getComputedStyle(m),j=h.compatMode==="CSS1Compat"&&parseFloat(g.marginLeft)+parseFloat(g.marginRight)||0,w=Math.abs(s.clientWidth-m.clientWidth-j);w<=Jf&&(o-=w)}else u<=Jf&&(o+=u);return{width:o,height:i,x:l,y:c}}const x2=new Set(["absolute","fixed"]);function g2(e,t){const r=Fr(e,!0,t==="fixed"),s=r.top+e.clientTop,a=r.left+e.clientLeft,o=xn(e)?gs(e):pn(1),i=e.clientWidth*o.x,l=e.clientHeight*o.y,c=a*o.x,u=s*o.y;return{width:i,height:l,x:c,y:u}}function eh(e,t,r){let s;if(t==="viewport")s=p2(e,r);else if(t==="document")s=h2(gn(e));else if(en(t))s=g2(t,r);else{const a=Xg(e);s={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return vi(s)}function ev(e,t){const r=mr(e);return r===t||!en(r)||Ms(r)?!1:tn(r).position==="fixed"||ev(r,t)}function v2(e,t){const r=t.get(e);if(r)return r;let s=Ba(e,[],!1).filter(l=>en(l)&&$s(l)!=="body"),a=null;const o=tn(e).position==="fixed";let i=o?mr(e):e;for(;en(i)&&!Ms(i);){const l=tn(i),c=Su(i);!c&&l.position==="fixed"&&(a=null),(o?!c&&!a:!c&&l.position==="static"&&!!a&&x2.has(a.position)||eo(i)&&!c&&ev(e,i))?s=s.filter(h=>h!==i):a=l,i=mr(i)}return t.set(e,s),s}function y2(e){let{element:t,boundary:r,rootBoundary:s,strategy:a}=e;const i=[...r==="clippingAncestors"?el(t)?[]:v2(t,this._c):[].concat(r),s],l=i[0],c=i.reduce((u,h)=>{const m=eh(t,h,a);return u.top=Nt(m.top,u.top),u.right=ur(m.right,u.right),u.bottom=ur(m.bottom,u.bottom),u.left=Nt(m.left,u.left),u},eh(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function j2(e){const{width:t,height:r}=Zg(e);return{width:t,height:r}}function w2(e,t,r){const s=xn(t),a=gn(t),o=r==="fixed",i=Fr(e,!0,o,t);let l={scrollLeft:0,scrollTop:0};const c=pn(0);function u(){c.x=nl(a)}if(s||!s&&!o)if(($s(t)!=="body"||eo(a))&&(l=tl(t)),s){const j=Fr(t,!0,o,t);c.x=j.x+t.clientLeft,c.y=j.y+t.clientTop}else a&&u();o&&!s&&a&&u();const h=a&&!s&&!o?Jg(a,l):pn(0),m=i.left+l.scrollLeft-c.x-h.x,g=i.top+l.scrollTop-c.y-h.y;return{x:m,y:g,width:i.width,height:i.height}}function Vl(e){return tn(e).position==="static"}function th(e,t){if(!xn(e)||tn(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return gn(e)===r&&(r=r.ownerDocument.body),r}function tv(e,t){const r=Ct(e);if(el(e))return r;if(!xn(e)){let a=mr(e);for(;a&&!Ms(a);){if(en(a)&&!Vl(a))return a;a=mr(a)}return r}let s=th(e,t);for(;s&&r2(s)&&Vl(s);)s=th(s,t);return s&&Ms(s)&&Vl(s)&&!Su(s)?r:s||l2(e)||r}const N2=async function(e){const t=this.getOffsetParent||tv,r=this.getDimensions,s=await r(e.floating);return{reference:w2(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function b2(e){return tn(e).direction==="rtl"}const S2={convertOffsetParentRelativeRectToViewportRelativeRect:m2,getDocumentElement:gn,getClippingRect:y2,getOffsetParent:tv,getElementRects:N2,getClientRects:f2,getDimensions:j2,getScale:gs,isElement:en,isRTL:b2};function nv(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function C2(e,t){let r=null,s;const a=gn(e);function o(){var l;clearTimeout(s),(l=r)==null||l.disconnect(),r=null}function i(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),o();const u=e.getBoundingClientRect(),{left:h,top:m,width:g,height:j}=u;if(l||t(),!g||!j)return;const w=So(m),v=So(a.clientWidth-(h+g)),p=So(a.clientHeight-(m+j)),f=So(h),y={rootMargin:-w+"px "+-v+"px "+-p+"px "+-f+"px",threshold:Nt(0,ur(1,c))||1};let N=!0;function b(T){const D=T[0].intersectionRatio;if(D!==c){if(!N)return i();D?i(!1,D):s=setTimeout(()=>{i(!1,1e-7)},1e3)}D===1&&!nv(u,e.getBoundingClientRect())&&i(),N=!1}try{r=new IntersectionObserver(b,{...y,root:a.ownerDocument})}catch{r=new IntersectionObserver(b,y)}r.observe(e)}return i(!0),o}function k2(e,t,r,s){s===void 0&&(s={});const{ancestorScroll:a=!0,ancestorResize:o=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=s,u=ku(e),h=a||o?[...u?Ba(u):[],...Ba(t)]:[];h.forEach(f=>{a&&f.addEventListener("scroll",r,{passive:!0}),o&&f.addEventListener("resize",r)});const m=u&&l?C2(u,r):null;let g=-1,j=null;i&&(j=new ResizeObserver(f=>{let[x]=f;x&&x.target===u&&j&&(j.unobserve(t),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var y;(y=j)==null||y.observe(t)})),r()}),u&&!c&&j.observe(u),j.observe(t));let w,v=c?Fr(e):null;c&&p();function p(){const f=Fr(e);v&&!nv(v,f)&&r(),v=f,w=requestAnimationFrame(p)}return r(),()=>{var f;h.forEach(x=>{a&&x.removeEventListener("scroll",r),o&&x.removeEventListener("resize",r)}),m==null||m(),(f=j)==null||f.disconnect(),j=null,c&&cancelAnimationFrame(w)}}const D2=ZS,T2=XS,E2=qS,M2=e2,R2=KS,nh=VS,P2=JS,A2=(e,t,r)=>{const s=new Map,a={platform:S2,...r},o={...a.platform,_c:s};return HS(e,t,{...a,platform:o})};var O2=typeof document<"u",I2=function(){},Uo=O2?d.useLayoutEffect:I2;function yi(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,s,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(s=r;s--!==0;)if(!yi(e[s],t[s]))return!1;return!0}if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(s=r;s--!==0;)if(!{}.hasOwnProperty.call(t,a[s]))return!1;for(s=r;s--!==0;){const o=a[s];if(!(o==="_owner"&&e.$$typeof)&&!yi(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function rv(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function rh(e,t){const r=rv(e);return Math.round(t*r)/r}function ql(e){const t=d.useRef(e);return Uo(()=>{t.current=e}),t}function F2(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:s=[],platform:a,elements:{reference:o,floating:i}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[h,m]=d.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[g,j]=d.useState(s);yi(g,s)||j(s);const[w,v]=d.useState(null),[p,f]=d.useState(null),x=d.useCallback(A=>{A!==T.current&&(T.current=A,v(A))},[]),y=d.useCallback(A=>{A!==D.current&&(D.current=A,f(A))},[]),N=o||w,b=i||p,T=d.useRef(null),D=d.useRef(null),E=d.useRef(h),S=c!=null,C=ql(c),R=ql(a),k=ql(u),M=d.useCallback(()=>{if(!T.current||!D.current)return;const A={placement:t,strategy:r,middleware:g};R.current&&(A.platform=R.current),A2(T.current,D.current,A).then(F=>{const W={...F,isPositioned:k.current!==!1};$.current&&!yi(E.current,W)&&(E.current=W,Gi.flushSync(()=>{m(W)}))})},[g,t,r,R,k]);Uo(()=>{u===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,m(A=>({...A,isPositioned:!1})))},[u]);const $=d.useRef(!1);Uo(()=>($.current=!0,()=>{$.current=!1}),[]),Uo(()=>{if(N&&(T.current=N),b&&(D.current=b),N&&b){if(C.current)return C.current(N,b,M);M()}},[N,b,M,C,S]);const I=d.useMemo(()=>({reference:T,floating:D,setReference:x,setFloating:y}),[x,y]),B=d.useMemo(()=>({reference:N,floating:b}),[N,b]),z=d.useMemo(()=>{const A={position:r,left:0,top:0};if(!B.floating)return A;const F=rh(B.floating,h.x),W=rh(B.floating,h.y);return l?{...A,transform:"translate("+F+"px, "+W+"px)",...rv(B.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:F,top:W}},[r,l,B.floating,h.x,h.y]);return d.useMemo(()=>({...h,update:M,refs:I,elements:B,floatingStyles:z}),[h,M,I,B,z])}const _2=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:s,padding:a}=typeof e=="function"?e(r):e;return s&&t(s)?s.current!=null?nh({element:s.current,padding:a}).fn(r):{}:s?nh({element:s,padding:a}).fn(r):{}}}},L2=(e,t)=>({...D2(e),options:[e,t]}),$2=(e,t)=>({...T2(e),options:[e,t]}),B2=(e,t)=>({...P2(e),options:[e,t]}),z2=(e,t)=>({...E2(e),options:[e,t]}),W2=(e,t)=>({...M2(e),options:[e,t]}),U2=(e,t)=>({...R2(e),options:[e,t]}),Y2=(e,t)=>({..._2(e),options:[e,t]});var G2="Arrow",sv=d.forwardRef((e,t)=>{const{children:r,width:s=10,height:a=5,...o}=e;return n.jsx(be.svg,{...o,ref:t,width:s,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:n.jsx("polygon",{points:"0,0 30,0 15,10"})})});sv.displayName=G2;var H2=sv;function av(e){const[t,r]=d.useState(void 0);return dr(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const s=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const o=a[0];let i,l;if("borderBoxSize"in o){const c=o.borderBoxSize,u=Array.isArray(c)?c[0]:c;i=u.inlineSize,l=u.blockSize}else i=e.offsetWidth,l=e.offsetHeight;r({width:i,height:l})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}else r(void 0)},[e]),t}var Du="Popper",[ov,iv]=gr(Du),[V2,lv]=ov(Du),cv=e=>{const{__scopePopper:t,children:r}=e,[s,a]=d.useState(null);return n.jsx(V2,{scope:t,anchor:s,onAnchorChange:a,children:r})};cv.displayName=Du;var dv="PopperAnchor",uv=d.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:s,...a}=e,o=lv(dv,r),i=d.useRef(null),l=Re(t,i),c=d.useRef(null);return d.useEffect(()=>{const u=c.current;c.current=(s==null?void 0:s.current)||i.current,u!==c.current&&o.onAnchorChange(c.current)}),s?null:n.jsx(be.div,{...a,ref:l})});uv.displayName=dv;var Tu="PopperContent",[q2,K2]=ov(Tu),mv=d.forwardRef((e,t)=>{var ye,zt,We,Wt,G,Ut;const{__scopePopper:r,side:s="bottom",sideOffset:a=0,align:o="center",alignOffset:i=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:h=0,sticky:m="partial",hideWhenDetached:g=!1,updatePositionStrategy:j="optimized",onPlaced:w,...v}=e,p=lv(Tu,r),[f,x]=d.useState(null),y=Re(t,vr=>x(vr)),[N,b]=d.useState(null),T=av(N),D=(T==null?void 0:T.width)??0,E=(T==null?void 0:T.height)??0,S=s+(o!=="center"?"-"+o:""),C=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},R=Array.isArray(u)?u:[u],k=R.length>0,M={padding:C,boundary:R.filter(Z2),altBoundary:k},{refs:$,floatingStyles:I,placement:B,isPositioned:z,middlewareData:A}=F2({strategy:"fixed",placement:S,whileElementsMounted:(...vr)=>k2(...vr,{animationFrame:j==="always"}),elements:{reference:p.anchor},middleware:[L2({mainAxis:a+E,alignmentAxis:i}),c&&$2({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?B2():void 0,...M}),c&&z2({...M}),W2({...M,apply:({elements:vr,rects:Z,availableWidth:tt,availableHeight:Ln})=>{const{width:rw,height:sw}=Z.reference,so=vr.floating.style;so.setProperty("--radix-popper-available-width",`${tt}px`),so.setProperty("--radix-popper-available-height",`${Ln}px`),so.setProperty("--radix-popper-anchor-width",`${rw}px`),so.setProperty("--radix-popper-anchor-height",`${sw}px`)}}),N&&Y2({element:N,padding:l}),X2({arrowWidth:D,arrowHeight:E}),g&&U2({strategy:"referenceHidden",...M})]}),[F,W]=pv(B),L=Pn(w);dr(()=>{z&&(L==null||L())},[z,L]);const O=(ye=A.arrow)==null?void 0:ye.x,H=(zt=A.arrow)==null?void 0:zt.y,J=((We=A.arrow)==null?void 0:We.centerOffset)!==0,[me,he]=d.useState();return dr(()=>{f&&he(window.getComputedStyle(f).zIndex)},[f]),n.jsx("div",{ref:$.setFloating,"data-radix-popper-content-wrapper":"",style:{...I,transform:z?I.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:me,"--radix-popper-transform-origin":[(Wt=A.transformOrigin)==null?void 0:Wt.x,(G=A.transformOrigin)==null?void 0:G.y].join(" "),...((Ut=A.hide)==null?void 0:Ut.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:n.jsx(q2,{scope:r,placedSide:F,onArrowChange:b,arrowX:O,arrowY:H,shouldHideArrow:J,children:n.jsx(be.div,{"data-side":F,"data-align":W,...v,ref:y,style:{...v.style,animation:z?void 0:"none"}})})})});mv.displayName=Tu;var fv="PopperArrow",Q2={top:"bottom",right:"left",bottom:"top",left:"right"},hv=d.forwardRef(function(t,r){const{__scopePopper:s,...a}=t,o=K2(fv,s),i=Q2[o.placedSide];return n.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:n.jsx(H2,{...a,ref:r,style:{...a.style,display:"block"}})})});hv.displayName=fv;function Z2(e){return e!==null}var X2=e=>({name:"transformOrigin",options:e,fn(t){var p,f,x;const{placement:r,rects:s,middlewareData:a}=t,i=((p=a.arrow)==null?void 0:p.centerOffset)!==0,l=i?0:e.arrowWidth,c=i?0:e.arrowHeight,[u,h]=pv(r),m={start:"0%",center:"50%",end:"100%"}[h],g=(((f=a.arrow)==null?void 0:f.x)??0)+l/2,j=(((x=a.arrow)==null?void 0:x.y)??0)+c/2;let w="",v="";return u==="bottom"?(w=i?m:`${g}px`,v=`${-c}px`):u==="top"?(w=i?m:`${g}px`,v=`${s.floating.height+c}px`):u==="right"?(w=`${-c}px`,v=i?m:`${j}px`):u==="left"&&(w=`${s.floating.width+c}px`,v=i?m:`${j}px`),{data:{x:w,y:v}}}});function pv(e){const[t,r="center"]=e.split("-");return[t,r]}var J2=cv,eC=uv,tC=mv,nC=hv,rC="Portal",Eu=d.forwardRef((e,t)=>{var l;const{container:r,...s}=e,[a,o]=d.useState(!1);dr(()=>o(!0),[]);const i=r||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return i?R0.createPortal(n.jsx(be.div,{...s,ref:t}),i):null});Eu.displayName=rC;function sC(e,t){return d.useReducer((r,s)=>t[r][s]??r,e)}var Fn=e=>{const{present:t,children:r}=e,s=aC(t),a=typeof r=="function"?r({present:s.isPresent}):d.Children.only(r),o=Re(s.ref,oC(a));return typeof r=="function"||s.isPresent?d.cloneElement(a,{ref:o}):null};Fn.displayName="Presence";function aC(e){const[t,r]=d.useState(),s=d.useRef(null),a=d.useRef(e),o=d.useRef("none"),i=e?"mounted":"unmounted",[l,c]=sC(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return d.useEffect(()=>{const u=Co(s.current);o.current=l==="mounted"?u:"none"},[l]),dr(()=>{const u=s.current,h=a.current;if(h!==e){const g=o.current,j=Co(u);e?c("MOUNT"):j==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(h&&g!==j?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),dr(()=>{if(t){let u;const h=t.ownerDocument.defaultView??window,m=j=>{const v=Co(s.current).includes(CSS.escape(j.animationName));if(j.target===t&&v&&(c("ANIMATION_END"),!a.current)){const p=t.style.animationFillMode;t.style.animationFillMode="forwards",u=h.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=p)})}},g=j=>{j.target===t&&(o.current=Co(s.current))};return t.addEventListener("animationstart",g),t.addEventListener("animationcancel",m),t.addEventListener("animationend",m),()=>{h.clearTimeout(u),t.removeEventListener("animationstart",g),t.removeEventListener("animationcancel",m),t.removeEventListener("animationend",m)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:d.useCallback(u=>{s.current=u?getComputedStyle(u):null,r(u)},[])}}function Co(e){return(e==null?void 0:e.animationName)||"none"}function oC(e){var s,a;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var Kl="rovingFocusGroup.onEntryFocus",iC={bubbles:!1,cancelable:!0},to="RovingFocusGroup",[dd,xv,lC]=zg(to),[cC,gv]=gr(to,[lC]),[dC,uC]=cC(to),vv=d.forwardRef((e,t)=>n.jsx(dd.Provider,{scope:e.__scopeRovingFocusGroup,children:n.jsx(dd.Slot,{scope:e.__scopeRovingFocusGroup,children:n.jsx(mC,{...e,ref:t})})}));vv.displayName=to;var mC=d.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:s,loop:a=!1,dir:o,currentTabStopId:i,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:h=!1,...m}=e,g=d.useRef(null),j=Re(t,g),w=Wg(o),[v,p]=Xi({prop:i,defaultProp:l??null,onChange:c,caller:to}),[f,x]=d.useState(!1),y=Pn(u),N=xv(r),b=d.useRef(!1),[T,D]=d.useState(0);return d.useEffect(()=>{const E=g.current;if(E)return E.addEventListener(Kl,y),()=>E.removeEventListener(Kl,y)},[y]),n.jsx(dC,{scope:r,orientation:s,dir:w,loop:a,currentTabStopId:v,onItemFocus:d.useCallback(E=>p(E),[p]),onItemShiftTab:d.useCallback(()=>x(!0),[]),onFocusableItemAdd:d.useCallback(()=>D(E=>E+1),[]),onFocusableItemRemove:d.useCallback(()=>D(E=>E-1),[]),children:n.jsx(be.div,{tabIndex:f||T===0?-1:0,"data-orientation":s,...m,ref:j,style:{outline:"none",...e.style},onMouseDown:re(e.onMouseDown,()=>{b.current=!0}),onFocus:re(e.onFocus,E=>{const S=!b.current;if(E.target===E.currentTarget&&S&&!f){const C=new CustomEvent(Kl,iC);if(E.currentTarget.dispatchEvent(C),!C.defaultPrevented){const R=N().filter(B=>B.focusable),k=R.find(B=>B.active),M=R.find(B=>B.id===v),I=[k,M,...R].filter(Boolean).map(B=>B.ref.current);wv(I,h)}}b.current=!1}),onBlur:re(e.onBlur,()=>x(!1))})})}),yv="RovingFocusGroupItem",jv=d.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:s=!0,active:a=!1,tabStopId:o,children:i,...l}=e,c=xs(),u=o||c,h=uC(yv,r),m=h.currentTabStopId===u,g=xv(r),{onFocusableItemAdd:j,onFocusableItemRemove:w,currentTabStopId:v}=h;return d.useEffect(()=>{if(s)return j(),()=>w()},[s,j,w]),n.jsx(dd.ItemSlot,{scope:r,id:u,focusable:s,active:a,children:n.jsx(be.span,{tabIndex:m?0:-1,"data-orientation":h.orientation,...l,ref:t,onMouseDown:re(e.onMouseDown,p=>{s?h.onItemFocus(u):p.preventDefault()}),onFocus:re(e.onFocus,()=>h.onItemFocus(u)),onKeyDown:re(e.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){h.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const f=pC(p,h.orientation,h.dir);if(f!==void 0){if(p.metaKey||p.ctrlKey||p.altKey||p.shiftKey)return;p.preventDefault();let y=g().filter(N=>N.focusable).map(N=>N.ref.current);if(f==="last")y.reverse();else if(f==="prev"||f==="next"){f==="prev"&&y.reverse();const N=y.indexOf(p.currentTarget);y=h.loop?xC(y,N+1):y.slice(N+1)}setTimeout(()=>wv(y))}}),children:typeof i=="function"?i({isCurrentTabStop:m,hasTabStop:v!=null}):i})})});jv.displayName=yv;var fC={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function hC(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function pC(e,t,r){const s=hC(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return fC[s]}function wv(e,t=!1){const r=document.activeElement;for(const s of e)if(s===r||(s.focus({preventScroll:t}),document.activeElement!==r))return}function xC(e,t){return e.map((r,s)=>e[(t+s)%e.length])}var gC=vv,vC=jv,yC=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Gr=new WeakMap,ko=new WeakMap,Do={},Ql=0,Nv=function(e){return e&&(e.host||Nv(e.parentNode))},jC=function(e,t){return t.map(function(r){if(e.contains(r))return r;var s=Nv(r);return s&&e.contains(s)?s:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},wC=function(e,t,r,s){var a=jC(t,Array.isArray(e)?e:[e]);Do[r]||(Do[r]=new WeakMap);var o=Do[r],i=[],l=new Set,c=new Set(a),u=function(m){!m||l.has(m)||(l.add(m),u(m.parentNode))};a.forEach(u);var h=function(m){!m||c.has(m)||Array.prototype.forEach.call(m.children,function(g){if(l.has(g))h(g);else try{var j=g.getAttribute(s),w=j!==null&&j!=="false",v=(Gr.get(g)||0)+1,p=(o.get(g)||0)+1;Gr.set(g,v),o.set(g,p),i.push(g),v===1&&w&&ko.set(g,!0),p===1&&g.setAttribute(r,"true"),w||g.setAttribute(s,"true")}catch(f){console.error("aria-hidden: cannot operate on ",g,f)}})};return h(t),l.clear(),Ql++,function(){i.forEach(function(m){var g=Gr.get(m)-1,j=o.get(m)-1;Gr.set(m,g),o.set(m,j),g||(ko.has(m)||m.removeAttribute(s),ko.delete(m)),j||m.removeAttribute(r)}),Ql--,Ql||(Gr=new WeakMap,Gr=new WeakMap,ko=new WeakMap,Do={})}},bv=function(e,t,r){r===void 0&&(r="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),a=yC(e);return a?(s.push.apply(s,Array.from(a.querySelectorAll("[aria-live], script"))),wC(s,a,r,"aria-hidden")):function(){return null}},cn=function(){return cn=Object.assign||function(t){for(var r,s=1,a=arguments.length;s<a;s++){r=arguments[s];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},cn.apply(this,arguments)};function Sv(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]]);return r}function NC(e,t,r){if(r||arguments.length===2)for(var s=0,a=t.length,o;s<a;s++)(o||!(s in t))&&(o||(o=Array.prototype.slice.call(t,0,s)),o[s]=t[s]);return e.concat(o||Array.prototype.slice.call(t))}var Yo="right-scroll-bar-position",Go="width-before-scroll-bar",bC="with-scroll-bars-hidden",SC="--removed-body-scroll-bar-size";function Zl(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function CC(e,t){var r=d.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(s){var a=r.value;a!==s&&(r.value=s,r.callback(s,a))}}}})[0];return r.callback=t,r.facade}var kC=typeof window<"u"?d.useLayoutEffect:d.useEffect,sh=new WeakMap;function DC(e,t){var r=CC(null,function(s){return e.forEach(function(a){return Zl(a,s)})});return kC(function(){var s=sh.get(r);if(s){var a=new Set(s),o=new Set(e),i=r.current;a.forEach(function(l){o.has(l)||Zl(l,null)}),o.forEach(function(l){a.has(l)||Zl(l,i)})}sh.set(r,e)},[e]),r}function TC(e){return e}function EC(e,t){t===void 0&&(t=TC);var r=[],s=!1,a={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(o){var i=t(o,s);return r.push(i),function(){r=r.filter(function(l){return l!==i})}},assignSyncMedium:function(o){for(s=!0;r.length;){var i=r;r=[],i.forEach(o)}r={push:function(l){return o(l)},filter:function(){return r}}},assignMedium:function(o){s=!0;var i=[];if(r.length){var l=r;r=[],l.forEach(o),i=r}var c=function(){var h=i;i=[],h.forEach(o)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(h){i.push(h),u()},filter:function(h){return i=i.filter(h),r}}}};return a}function MC(e){e===void 0&&(e={});var t=EC(null);return t.options=cn({async:!0,ssr:!1},e),t}var Cv=function(e){var t=e.sideCar,r=Sv(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw new Error("Sidecar medium not found");return d.createElement(s,cn({},r))};Cv.isSideCarExport=!0;function RC(e,t){return e.useMedium(t),Cv}var kv=MC(),Xl=function(){},rl=d.forwardRef(function(e,t){var r=d.useRef(null),s=d.useState({onScrollCapture:Xl,onWheelCapture:Xl,onTouchMoveCapture:Xl}),a=s[0],o=s[1],i=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,h=e.enabled,m=e.shards,g=e.sideCar,j=e.noRelative,w=e.noIsolation,v=e.inert,p=e.allowPinchZoom,f=e.as,x=f===void 0?"div":f,y=e.gapMode,N=Sv(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),b=g,T=DC([r,t]),D=cn(cn({},N),a);return d.createElement(d.Fragment,null,h&&d.createElement(b,{sideCar:kv,removeScrollBar:u,shards:m,noRelative:j,noIsolation:w,inert:v,setCallbacks:o,allowPinchZoom:!!p,lockRef:r,gapMode:y}),i?d.cloneElement(d.Children.only(l),cn(cn({},D),{ref:T})):d.createElement(x,cn({},D,{className:c,ref:T}),l))});rl.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};rl.classNames={fullWidth:Go,zeroRight:Yo};var PC=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function AC(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=PC();return t&&e.setAttribute("nonce",t),e}function OC(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function IC(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var FC=function(){var e=0,t=null;return{add:function(r){e==0&&(t=AC())&&(OC(t,r),IC(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},_C=function(){var e=FC();return function(t,r){d.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},Dv=function(){var e=_C(),t=function(r){var s=r.styles,a=r.dynamic;return e(s,a),null};return t},LC={left:0,top:0,right:0,gap:0},Jl=function(e){return parseInt(e||"",10)||0},$C=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],s=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[Jl(r),Jl(s),Jl(a)]},BC=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return LC;var t=$C(e),r=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-r+t[2]-t[0])}},zC=Dv(),vs="data-scroll-locked",WC=function(e,t,r,s){var a=e.left,o=e.top,i=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(bC,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(l,"px ").concat(s,`;
  }
  body[`).concat(vs,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(s,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(s,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Yo,` {
    right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(Go,` {
    margin-right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(Yo," .").concat(Yo,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(Go," .").concat(Go,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(vs,`] {
    `).concat(SC,": ").concat(l,`px;
  }
`)},ah=function(){var e=parseInt(document.body.getAttribute(vs)||"0",10);return isFinite(e)?e:0},UC=function(){d.useEffect(function(){return document.body.setAttribute(vs,(ah()+1).toString()),function(){var e=ah()-1;e<=0?document.body.removeAttribute(vs):document.body.setAttribute(vs,e.toString())}},[])},YC=function(e){var t=e.noRelative,r=e.noImportant,s=e.gapMode,a=s===void 0?"margin":s;UC();var o=d.useMemo(function(){return BC(a)},[a]);return d.createElement(zC,{styles:WC(o,!t,a,r?"":"!important")})},ud=!1;if(typeof window<"u")try{var To=Object.defineProperty({},"passive",{get:function(){return ud=!0,!0}});window.addEventListener("test",To,To),window.removeEventListener("test",To,To)}catch{ud=!1}var Hr=ud?{passive:!1}:!1,GC=function(e){return e.tagName==="TEXTAREA"},Tv=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!GC(e)&&r[t]==="visible")},HC=function(e){return Tv(e,"overflowY")},VC=function(e){return Tv(e,"overflowX")},oh=function(e,t){var r=t.ownerDocument,s=t;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var a=Ev(e,s);if(a){var o=Mv(e,s),i=o[1],l=o[2];if(i>l)return!0}s=s.parentNode}while(s&&s!==r.body);return!1},qC=function(e){var t=e.scrollTop,r=e.scrollHeight,s=e.clientHeight;return[t,r,s]},KC=function(e){var t=e.scrollLeft,r=e.scrollWidth,s=e.clientWidth;return[t,r,s]},Ev=function(e,t){return e==="v"?HC(t):VC(t)},Mv=function(e,t){return e==="v"?qC(t):KC(t)},QC=function(e,t){return e==="h"&&t==="rtl"?-1:1},ZC=function(e,t,r,s,a){var o=QC(e,window.getComputedStyle(t).direction),i=o*s,l=r.target,c=t.contains(l),u=!1,h=i>0,m=0,g=0;do{if(!l)break;var j=Mv(e,l),w=j[0],v=j[1],p=j[2],f=v-p-o*w;(w||f)&&Ev(e,l)&&(m+=f,g+=w);var x=l.parentNode;l=x&&x.nodeType===Node.DOCUMENT_FRAGMENT_NODE?x.host:x}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(h&&Math.abs(m)<1||!h&&Math.abs(g)<1)&&(u=!0),u},Eo=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},ih=function(e){return[e.deltaX,e.deltaY]},lh=function(e){return e&&"current"in e?e.current:e},XC=function(e,t){return e[0]===t[0]&&e[1]===t[1]},JC=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},ek=0,Vr=[];function tk(e){var t=d.useRef([]),r=d.useRef([0,0]),s=d.useRef(),a=d.useState(ek++)[0],o=d.useState(Dv)[0],i=d.useRef(e);d.useEffect(function(){i.current=e},[e]),d.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var v=NC([e.lockRef.current],(e.shards||[]).map(lh),!0).filter(Boolean);return v.forEach(function(p){return p.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),v.forEach(function(p){return p.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=d.useCallback(function(v,p){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!i.current.allowPinchZoom;var f=Eo(v),x=r.current,y="deltaX"in v?v.deltaX:x[0]-f[0],N="deltaY"in v?v.deltaY:x[1]-f[1],b,T=v.target,D=Math.abs(y)>Math.abs(N)?"h":"v";if("touches"in v&&D==="h"&&T.type==="range")return!1;var E=oh(D,T);if(!E)return!0;if(E?b=D:(b=D==="v"?"h":"v",E=oh(D,T)),!E)return!1;if(!s.current&&"changedTouches"in v&&(y||N)&&(s.current=b),!b)return!0;var S=s.current||b;return ZC(S,p,v,S==="h"?y:N)},[]),c=d.useCallback(function(v){var p=v;if(!(!Vr.length||Vr[Vr.length-1]!==o)){var f="deltaY"in p?ih(p):Eo(p),x=t.current.filter(function(b){return b.name===p.type&&(b.target===p.target||p.target===b.shadowParent)&&XC(b.delta,f)})[0];if(x&&x.should){p.cancelable&&p.preventDefault();return}if(!x){var y=(i.current.shards||[]).map(lh).filter(Boolean).filter(function(b){return b.contains(p.target)}),N=y.length>0?l(p,y[0]):!i.current.noIsolation;N&&p.cancelable&&p.preventDefault()}}},[]),u=d.useCallback(function(v,p,f,x){var y={name:v,delta:p,target:f,should:x,shadowParent:nk(f)};t.current.push(y),setTimeout(function(){t.current=t.current.filter(function(N){return N!==y})},1)},[]),h=d.useCallback(function(v){r.current=Eo(v),s.current=void 0},[]),m=d.useCallback(function(v){u(v.type,ih(v),v.target,l(v,e.lockRef.current))},[]),g=d.useCallback(function(v){u(v.type,Eo(v),v.target,l(v,e.lockRef.current))},[]);d.useEffect(function(){return Vr.push(o),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:g}),document.addEventListener("wheel",c,Hr),document.addEventListener("touchmove",c,Hr),document.addEventListener("touchstart",h,Hr),function(){Vr=Vr.filter(function(v){return v!==o}),document.removeEventListener("wheel",c,Hr),document.removeEventListener("touchmove",c,Hr),document.removeEventListener("touchstart",h,Hr)}},[]);var j=e.removeScrollBar,w=e.inert;return d.createElement(d.Fragment,null,w?d.createElement(o,{styles:JC(a)}):null,j?d.createElement(YC,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function nk(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const rk=RC(kv,tk);var Mu=d.forwardRef(function(e,t){return d.createElement(rl,cn({},e,{ref:t,sideCar:rk}))});Mu.classNames=rl.classNames;var md=["Enter"," "],sk=["ArrowDown","PageUp","Home"],Rv=["ArrowUp","PageDown","End"],ak=[...sk,...Rv],ok={ltr:[...md,"ArrowRight"],rtl:[...md,"ArrowLeft"]},ik={ltr:["ArrowLeft"],rtl:["ArrowRight"]},no="Menu",[za,lk,ck]=zg(no),[zr,Pv]=gr(no,[ck,iv,gv]),sl=iv(),Av=gv(),[dk,Wr]=zr(no),[uk,ro]=zr(no),Ov=e=>{const{__scopeMenu:t,open:r=!1,children:s,dir:a,onOpenChange:o,modal:i=!0}=e,l=sl(t),[c,u]=d.useState(null),h=d.useRef(!1),m=Pn(o),g=Wg(a);return d.useEffect(()=>{const j=()=>{h.current=!0,document.addEventListener("pointerdown",w,{capture:!0,once:!0}),document.addEventListener("pointermove",w,{capture:!0,once:!0})},w=()=>h.current=!1;return document.addEventListener("keydown",j,{capture:!0}),()=>{document.removeEventListener("keydown",j,{capture:!0}),document.removeEventListener("pointerdown",w,{capture:!0}),document.removeEventListener("pointermove",w,{capture:!0})}},[]),n.jsx(J2,{...l,children:n.jsx(dk,{scope:t,open:r,onOpenChange:m,content:c,onContentChange:u,children:n.jsx(uk,{scope:t,onClose:d.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:h,dir:g,modal:i,children:s})})})};Ov.displayName=no;var mk="MenuAnchor",Ru=d.forwardRef((e,t)=>{const{__scopeMenu:r,...s}=e,a=sl(r);return n.jsx(eC,{...a,...s,ref:t})});Ru.displayName=mk;var Pu="MenuPortal",[fk,Iv]=zr(Pu,{forceMount:void 0}),Fv=e=>{const{__scopeMenu:t,forceMount:r,children:s,container:a}=e,o=Wr(Pu,t);return n.jsx(fk,{scope:t,forceMount:r,children:n.jsx(Fn,{present:r||o.open,children:n.jsx(Eu,{asChild:!0,container:a,children:s})})})};Fv.displayName=Pu;var It="MenuContent",[hk,Au]=zr(It),_v=d.forwardRef((e,t)=>{const r=Iv(It,e.__scopeMenu),{forceMount:s=r.forceMount,...a}=e,o=Wr(It,e.__scopeMenu),i=ro(It,e.__scopeMenu);return n.jsx(za.Provider,{scope:e.__scopeMenu,children:n.jsx(Fn,{present:s||o.open,children:n.jsx(za.Slot,{scope:e.__scopeMenu,children:i.modal?n.jsx(pk,{...a,ref:t}):n.jsx(xk,{...a,ref:t})})})})}),pk=d.forwardRef((e,t)=>{const r=Wr(It,e.__scopeMenu),s=d.useRef(null),a=Re(t,s);return d.useEffect(()=>{const o=s.current;if(o)return bv(o)},[]),n.jsx(Ou,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:re(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),xk=d.forwardRef((e,t)=>{const r=Wr(It,e.__scopeMenu);return n.jsx(Ou,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),gk=La("MenuContent.ScrollLock"),Ou=d.forwardRef((e,t)=>{const{__scopeMenu:r,loop:s=!1,trapFocus:a,onOpenAutoFocus:o,onCloseAutoFocus:i,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:m,onInteractOutside:g,onDismiss:j,disableOutsideScroll:w,...v}=e,p=Wr(It,r),f=ro(It,r),x=sl(r),y=Av(r),N=lk(r),[b,T]=d.useState(null),D=d.useRef(null),E=Re(t,D,p.onContentChange),S=d.useRef(0),C=d.useRef(""),R=d.useRef(0),k=d.useRef(null),M=d.useRef("right"),$=d.useRef(0),I=w?Mu:d.Fragment,B=w?{as:gk,allowPinchZoom:!0}:void 0,z=F=>{var ye,zt;const W=C.current+F,L=N().filter(We=>!We.disabled),O=document.activeElement,H=(ye=L.find(We=>We.ref.current===O))==null?void 0:ye.textValue,J=L.map(We=>We.textValue),me=Ek(J,W,H),he=(zt=L.find(We=>We.textValue===me))==null?void 0:zt.ref.current;(function We(Wt){C.current=Wt,window.clearTimeout(S.current),Wt!==""&&(S.current=window.setTimeout(()=>We(""),1e3))})(W),he&&setTimeout(()=>he.focus())};d.useEffect(()=>()=>window.clearTimeout(S.current),[]),Gg();const A=d.useCallback(F=>{var L,O;return M.current===((L=k.current)==null?void 0:L.side)&&Rk(F,(O=k.current)==null?void 0:O.area)},[]);return n.jsx(hk,{scope:r,searchRef:C,onItemEnter:d.useCallback(F=>{A(F)&&F.preventDefault()},[A]),onItemLeave:d.useCallback(F=>{var W;A(F)||((W=D.current)==null||W.focus(),T(null))},[A]),onTriggerLeave:d.useCallback(F=>{A(F)&&F.preventDefault()},[A]),pointerGraceTimerRef:R,onPointerGraceIntentChange:d.useCallback(F=>{k.current=F},[]),children:n.jsx(I,{...B,children:n.jsx(ju,{asChild:!0,trapped:a,onMountAutoFocus:re(o,F=>{var W;F.preventDefault(),(W=D.current)==null||W.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:n.jsx(yu,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:m,onInteractOutside:g,onDismiss:j,children:n.jsx(gC,{asChild:!0,...y,dir:f.dir,orientation:"vertical",loop:s,currentTabStopId:b,onCurrentTabStopIdChange:T,onEntryFocus:re(c,F=>{f.isUsingKeyboardRef.current||F.preventDefault()}),preventScrollOnEntryFocus:!0,children:n.jsx(tC,{role:"menu","aria-orientation":"vertical","data-state":Jv(p.open),"data-radix-menu-content":"",dir:f.dir,...x,...v,ref:E,style:{outline:"none",...v.style},onKeyDown:re(v.onKeyDown,F=>{const L=F.target.closest("[data-radix-menu-content]")===F.currentTarget,O=F.ctrlKey||F.altKey||F.metaKey,H=F.key.length===1;L&&(F.key==="Tab"&&F.preventDefault(),!O&&H&&z(F.key));const J=D.current;if(F.target!==J||!ak.includes(F.key))return;F.preventDefault();const he=N().filter(ye=>!ye.disabled).map(ye=>ye.ref.current);Rv.includes(F.key)&&he.reverse(),Dk(he)}),onBlur:re(e.onBlur,F=>{F.currentTarget.contains(F.target)||(window.clearTimeout(S.current),C.current="")}),onPointerMove:re(e.onPointerMove,Wa(F=>{const W=F.target,L=$.current!==F.clientX;if(F.currentTarget.contains(W)&&L){const O=F.clientX>$.current?"right":"left";M.current=O,$.current=F.clientX}}))})})})})})})});_v.displayName=It;var vk="MenuGroup",Iu=d.forwardRef((e,t)=>{const{__scopeMenu:r,...s}=e;return n.jsx(be.div,{role:"group",...s,ref:t})});Iu.displayName=vk;var yk="MenuLabel",Lv=d.forwardRef((e,t)=>{const{__scopeMenu:r,...s}=e;return n.jsx(be.div,{...s,ref:t})});Lv.displayName=yk;var ji="MenuItem",ch="menu.itemSelect",al=d.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:s,...a}=e,o=d.useRef(null),i=ro(ji,e.__scopeMenu),l=Au(ji,e.__scopeMenu),c=Re(t,o),u=d.useRef(!1),h=()=>{const m=o.current;if(!r&&m){const g=new CustomEvent(ch,{bubbles:!0,cancelable:!0});m.addEventListener(ch,j=>s==null?void 0:s(j),{once:!0}),Bg(m,g),g.defaultPrevented?u.current=!1:i.onClose()}};return n.jsx($v,{...a,ref:c,disabled:r,onClick:re(e.onClick,h),onPointerDown:m=>{var g;(g=e.onPointerDown)==null||g.call(e,m),u.current=!0},onPointerUp:re(e.onPointerUp,m=>{var g;u.current||(g=m.currentTarget)==null||g.click()}),onKeyDown:re(e.onKeyDown,m=>{const g=l.searchRef.current!=="";r||g&&m.key===" "||md.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});al.displayName=ji;var $v=d.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:s=!1,textValue:a,...o}=e,i=Au(ji,r),l=Av(r),c=d.useRef(null),u=Re(t,c),[h,m]=d.useState(!1),[g,j]=d.useState("");return d.useEffect(()=>{const w=c.current;w&&j((w.textContent??"").trim())},[o.children]),n.jsx(za.ItemSlot,{scope:r,disabled:s,textValue:a??g,children:n.jsx(vC,{asChild:!0,...l,focusable:!s,children:n.jsx(be.div,{role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...o,ref:u,onPointerMove:re(e.onPointerMove,Wa(w=>{s?i.onItemLeave(w):(i.onItemEnter(w),w.defaultPrevented||w.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:re(e.onPointerLeave,Wa(w=>i.onItemLeave(w))),onFocus:re(e.onFocus,()=>m(!0)),onBlur:re(e.onBlur,()=>m(!1))})})})}),jk="MenuCheckboxItem",Bv=d.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:s,...a}=e;return n.jsx(Gv,{scope:e.__scopeMenu,checked:r,children:n.jsx(al,{role:"menuitemcheckbox","aria-checked":wi(r)?"mixed":r,...a,ref:t,"data-state":_u(r),onSelect:re(a.onSelect,()=>s==null?void 0:s(wi(r)?!0:!r),{checkForDefaultPrevented:!1})})})});Bv.displayName=jk;var zv="MenuRadioGroup",[wk,Nk]=zr(zv,{value:void 0,onValueChange:()=>{}}),Wv=d.forwardRef((e,t)=>{const{value:r,onValueChange:s,...a}=e,o=Pn(s);return n.jsx(wk,{scope:e.__scopeMenu,value:r,onValueChange:o,children:n.jsx(Iu,{...a,ref:t})})});Wv.displayName=zv;var Uv="MenuRadioItem",Yv=d.forwardRef((e,t)=>{const{value:r,...s}=e,a=Nk(Uv,e.__scopeMenu),o=r===a.value;return n.jsx(Gv,{scope:e.__scopeMenu,checked:o,children:n.jsx(al,{role:"menuitemradio","aria-checked":o,...s,ref:t,"data-state":_u(o),onSelect:re(s.onSelect,()=>{var i;return(i=a.onValueChange)==null?void 0:i.call(a,r)},{checkForDefaultPrevented:!1})})})});Yv.displayName=Uv;var Fu="MenuItemIndicator",[Gv,bk]=zr(Fu,{checked:!1}),Hv=d.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:s,...a}=e,o=bk(Fu,r);return n.jsx(Fn,{present:s||wi(o.checked)||o.checked===!0,children:n.jsx(be.span,{...a,ref:t,"data-state":_u(o.checked)})})});Hv.displayName=Fu;var Sk="MenuSeparator",Vv=d.forwardRef((e,t)=>{const{__scopeMenu:r,...s}=e;return n.jsx(be.div,{role:"separator","aria-orientation":"horizontal",...s,ref:t})});Vv.displayName=Sk;var Ck="MenuArrow",qv=d.forwardRef((e,t)=>{const{__scopeMenu:r,...s}=e,a=sl(r);return n.jsx(nC,{...a,...s,ref:t})});qv.displayName=Ck;var kk="MenuSub",[U4,Kv]=zr(kk),ra="MenuSubTrigger",Qv=d.forwardRef((e,t)=>{const r=Wr(ra,e.__scopeMenu),s=ro(ra,e.__scopeMenu),a=Kv(ra,e.__scopeMenu),o=Au(ra,e.__scopeMenu),i=d.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=o,u={__scopeMenu:e.__scopeMenu},h=d.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return d.useEffect(()=>h,[h]),d.useEffect(()=>{const m=l.current;return()=>{window.clearTimeout(m),c(null)}},[l,c]),n.jsx(Ru,{asChild:!0,...u,children:n.jsx($v,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":a.contentId,"data-state":Jv(r.open),...e,ref:_s(t,a.onTriggerChange),onClick:m=>{var g;(g=e.onClick)==null||g.call(e,m),!(e.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:re(e.onPointerMove,Wa(m=>{o.onItemEnter(m),!m.defaultPrevented&&!e.disabled&&!r.open&&!i.current&&(o.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{r.onOpenChange(!0),h()},100))})),onPointerLeave:re(e.onPointerLeave,Wa(m=>{var j,w;h();const g=(j=r.content)==null?void 0:j.getBoundingClientRect();if(g){const v=(w=r.content)==null?void 0:w.dataset.side,p=v==="right",f=p?-5:5,x=g[p?"left":"right"],y=g[p?"right":"left"];o.onPointerGraceIntentChange({area:[{x:m.clientX+f,y:m.clientY},{x,y:g.top},{x:y,y:g.top},{x:y,y:g.bottom},{x,y:g.bottom}],side:v}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(m),m.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:re(e.onKeyDown,m=>{var j;const g=o.searchRef.current!=="";e.disabled||g&&m.key===" "||ok[s.dir].includes(m.key)&&(r.onOpenChange(!0),(j=r.content)==null||j.focus(),m.preventDefault())})})})});Qv.displayName=ra;var Zv="MenuSubContent",Xv=d.forwardRef((e,t)=>{const r=Iv(It,e.__scopeMenu),{forceMount:s=r.forceMount,...a}=e,o=Wr(It,e.__scopeMenu),i=ro(It,e.__scopeMenu),l=Kv(Zv,e.__scopeMenu),c=d.useRef(null),u=Re(t,c);return n.jsx(za.Provider,{scope:e.__scopeMenu,children:n.jsx(Fn,{present:s||o.open,children:n.jsx(za.Slot,{scope:e.__scopeMenu,children:n.jsx(Ou,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:u,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:h=>{var m;i.isUsingKeyboardRef.current&&((m=c.current)==null||m.focus()),h.preventDefault()},onCloseAutoFocus:h=>h.preventDefault(),onFocusOutside:re(e.onFocusOutside,h=>{h.target!==l.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:re(e.onEscapeKeyDown,h=>{i.onClose(),h.preventDefault()}),onKeyDown:re(e.onKeyDown,h=>{var j;const m=h.currentTarget.contains(h.target),g=ik[i.dir].includes(h.key);m&&g&&(o.onOpenChange(!1),(j=l.trigger)==null||j.focus(),h.preventDefault())})})})})})});Xv.displayName=Zv;function Jv(e){return e?"open":"closed"}function wi(e){return e==="indeterminate"}function _u(e){return wi(e)?"indeterminate":e?"checked":"unchecked"}function Dk(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function Tk(e,t){return e.map((r,s)=>e[(t+s)%e.length])}function Ek(e,t,r){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,o=r?e.indexOf(r):-1;let i=Tk(e,Math.max(o,0));a.length===1&&(i=i.filter(u=>u!==r));const c=i.find(u=>u.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function Mk(e,t){const{x:r,y:s}=e;let a=!1;for(let o=0,i=t.length-1;o<t.length;i=o++){const l=t[o],c=t[i],u=l.x,h=l.y,m=c.x,g=c.y;h>s!=g>s&&r<(m-u)*(s-h)/(g-h)+u&&(a=!a)}return a}function Rk(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return Mk(r,t)}function Wa(e){return t=>t.pointerType==="mouse"?e(t):void 0}var Pk=Ov,Ak=Ru,Ok=Fv,Ik=_v,Fk=Iu,_k=Lv,Lk=al,$k=Bv,Bk=Wv,zk=Yv,Wk=Hv,Uk=Vv,Yk=qv,Gk=Qv,Hk=Xv,ol="DropdownMenu",[Vk]=gr(ol,[Pv]),ht=Pv(),[qk,ey]=Vk(ol),ty=e=>{const{__scopeDropdownMenu:t,children:r,dir:s,open:a,defaultOpen:o,onOpenChange:i,modal:l=!0}=e,c=ht(t),u=d.useRef(null),[h,m]=Xi({prop:a,defaultProp:o??!1,onChange:i,caller:ol});return n.jsx(qk,{scope:t,triggerId:xs(),triggerRef:u,contentId:xs(),open:h,onOpenChange:m,onOpenToggle:d.useCallback(()=>m(g=>!g),[m]),modal:l,children:n.jsx(Pk,{...c,open:h,onOpenChange:m,dir:s,modal:l,children:r})})};ty.displayName=ol;var ny="DropdownMenuTrigger",ry=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:s=!1,...a}=e,o=ey(ny,r),i=ht(r);return n.jsx(Ak,{asChild:!0,...i,children:n.jsx(be.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...a,ref:_s(t,o.triggerRef),onPointerDown:re(e.onPointerDown,l=>{!s&&l.button===0&&l.ctrlKey===!1&&(o.onOpenToggle(),o.open||l.preventDefault())}),onKeyDown:re(e.onKeyDown,l=>{s||(["Enter"," "].includes(l.key)&&o.onOpenToggle(),l.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});ry.displayName=ny;var Kk="DropdownMenuPortal",sy=e=>{const{__scopeDropdownMenu:t,...r}=e,s=ht(t);return n.jsx(Ok,{...s,...r})};sy.displayName=Kk;var ay="DropdownMenuContent",oy=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=ey(ay,r),o=ht(r),i=d.useRef(!1);return n.jsx(Ik,{id:a.contentId,"aria-labelledby":a.triggerId,...o,...s,ref:t,onCloseAutoFocus:re(e.onCloseAutoFocus,l=>{var c;i.current||(c=a.triggerRef.current)==null||c.focus(),i.current=!1,l.preventDefault()}),onInteractOutside:re(e.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,h=c.button===2||u;(!a.modal||h)&&(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});oy.displayName=ay;var Qk="DropdownMenuGroup",Zk=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=ht(r);return n.jsx(Fk,{...a,...s,ref:t})});Zk.displayName=Qk;var Xk="DropdownMenuLabel",iy=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=ht(r);return n.jsx(_k,{...a,...s,ref:t})});iy.displayName=Xk;var Jk="DropdownMenuItem",ly=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=ht(r);return n.jsx(Lk,{...a,...s,ref:t})});ly.displayName=Jk;var eD="DropdownMenuCheckboxItem",cy=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=ht(r);return n.jsx($k,{...a,...s,ref:t})});cy.displayName=eD;var tD="DropdownMenuRadioGroup",nD=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=ht(r);return n.jsx(Bk,{...a,...s,ref:t})});nD.displayName=tD;var rD="DropdownMenuRadioItem",dy=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=ht(r);return n.jsx(zk,{...a,...s,ref:t})});dy.displayName=rD;var sD="DropdownMenuItemIndicator",uy=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=ht(r);return n.jsx(Wk,{...a,...s,ref:t})});uy.displayName=sD;var aD="DropdownMenuSeparator",my=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=ht(r);return n.jsx(Uk,{...a,...s,ref:t})});my.displayName=aD;var oD="DropdownMenuArrow",iD=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=ht(r);return n.jsx(Yk,{...a,...s,ref:t})});iD.displayName=oD;var lD="DropdownMenuSubTrigger",fy=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=ht(r);return n.jsx(Gk,{...a,...s,ref:t})});fy.displayName=lD;var cD="DropdownMenuSubContent",hy=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=ht(r);return n.jsx(Hk,{...a,...s,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});hy.displayName=cD;var dD=ty,uD=ry,mD=sy,py=oy,xy=iy,gy=ly,vy=cy,yy=dy,jy=uy,wy=my,Ny=fy,by=hy;const fD=dD,hD=uD,pD=d.forwardRef(({className:e,inset:t,children:r,...s},a)=>n.jsxs(Ny,{ref:a,className:X("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...s,children:[r,n.jsx(Fs,{className:"ml-auto"})]}));pD.displayName=Ny.displayName;const xD=d.forwardRef(({className:e,...t},r)=>n.jsx(by,{ref:r,className:X("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...t}));xD.displayName=by.displayName;const Sy=d.forwardRef(({className:e,sideOffset:t=4,...r},s)=>n.jsx(mD,{children:n.jsx(py,{ref:s,sideOffset:t,className:X("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...r})}));Sy.displayName=py.displayName;const Cy=d.forwardRef(({className:e,inset:t,...r},s)=>n.jsx(gy,{ref:s,className:X("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...r}));Cy.displayName=gy.displayName;const gD=d.forwardRef(({className:e,children:t,checked:r,...s},a)=>n.jsxs(vy,{ref:a,className:X("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...s,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(jy,{children:n.jsx(pu,{className:"h-4 w-4"})})}),t]}));gD.displayName=vy.displayName;const vD=d.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(yy,{ref:s,className:X("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(jy,{children:n.jsx(Ub,{className:"h-2 w-2 fill-current"})})}),t]}));vD.displayName=yy.displayName;const yD=d.forwardRef(({className:e,inset:t,...r},s)=>n.jsx(xy,{ref:s,className:X("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));yD.displayName=xy.displayName;const jD=d.forwardRef(({className:e,...t},r)=>n.jsx(wy,{ref:r,className:X("-mx-1 my-1 h-px bg-muted",e),...t}));jD.displayName=wy.displayName;function wD({children:e}){const t=$t(),r=Vi(),{currentUser:s,logout:a}=Ie(),o=r.pathname!=="/",i=()=>{a(),t("/login")},l=()=>{const c=r.pathname;c.startsWith("/module/staff-training/")?t("/module/staff-training"):c==="/module/staff-training"||c.startsWith("/module/")?t("/restaurant/fcp"):c==="/restaurant/fcp"?t("/restaurant"):c==="/manufacturing/fcp"?t("/manufacturing"):c.startsWith("/restaurant/")?t("/restaurant"):c.startsWith("/manufacturing/")?t("/manufacturing"):t("/")};return n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx("header",{className:"sticky top-0 z-40 border-b border-border bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:n.jsxs("div",{className:"container flex h-16 items-center justify-between px-4",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[o&&n.jsx(P,{variant:"ghost",size:"icon",onClick:l,children:n.jsx(Ts,{className:"h-5 w-5"})}),n.jsx("h1",{className:"text-xl font-semibold",children:"Taquero"})]}),n.jsx("div",{className:"flex items-center gap-4",children:s&&n.jsxs(fD,{children:[n.jsx(hD,{asChild:!0,children:n.jsx(P,{variant:"secondary",size:"sm",className:"bg-white text-black hover:bg-white/90",children:s.name})}),n.jsx(Sy,{align:"end",children:n.jsxs(Cy,{onClick:i,className:"gap-2 cursor-pointer",children:[n.jsx(Kb,{className:"h-4 w-4"}),n.jsx("span",{children:"Logout"})]})})]})})]})}),n.jsx("main",{className:"container mx-auto px-4 py-8",children:e})]})}const V=d.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:X("rounded-lg border border-border bg-card text-card-foreground shadow-sm transition-all hover:shadow-md",e),...t}));V.displayName="Card";const ee=d.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:X("flex flex-col space-y-1.5 p-6",e),...t}));ee.displayName="CardHeader";const te=d.forwardRef(({className:e,...t},r)=>n.jsx("h3",{ref:r,className:X("text-2xl font-semibold leading-none tracking-tight",e),...t}));te.displayName="CardTitle";const Ce=d.forwardRef(({className:e,...t},r)=>n.jsx("p",{ref:r,className:X("text-sm text-muted-foreground",e),...t}));Ce.displayName="CardDescription";const K=d.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:X("p-6 pt-0",e),...t}));K.displayName="CardContent";const ND=d.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:X("flex items-center p-6 pt-0",e),...t}));ND.displayName="CardFooter";const bD=mu("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500/10 text-green-500 hover:bg-green-500/20"}},defaultVariants:{variant:"default"}});function il({className:e,variant:t,...r}){return n.jsx("div",{className:X(bD({variant:t}),e),...r})}const ga=_e()(Le((e,t)=>({taskCompletions:{},userSubmissions:{},markTaskCompleted:r=>{const s=bo();e(a=>{const o={...a.taskCompletions};return o[s]||(o[s]=[]),o[s].includes(r)||o[s].push(r),{taskCompletions:o}})},getWhoSubmittedToday:r=>{var o;const s=bo(),{userSubmissions:a}=t();if((o=a[r])!=null&&o[s]){const i=a[r][s];return i.length>0?i.join(", "):null}return null},recordUserSubmission:(r,s)=>{const a=bo();e(o=>{const i={...o.userSubmissions};return i[r]||(i[r]={}),i[r][a]||(i[r][a]=[]),i[r][a].includes(s)||i[r][a].push(s),{userSubmissions:i}})},isTaskCompletedToday:r=>{var o;const s=bo(),{taskCompletions:a}=t();return((o=a[s])==null?void 0:o.includes(r))??!1}}),{name:"taquero-app"}));function ne({id:e,title:t,description:r,icon:s,onClick:a,className:o}){const i=ga(c=>c.isTaskCompletedToday(e)),l=typeof s=="string"?null:s;return n.jsxs(V,{className:X("cursor-pointer transition-all duration-300 ease-in-out","hover:border-primary/50 hover:shadow-lg hover:shadow-primary/10","hover:scale-[1.02] hover:-translate-y-1","active:scale-[0.98] active:translate-y-0","animate-in fade-in slide-in-from-bottom-4 duration-500","relative group",o),onClick:a,children:[i&&n.jsxs(il,{variant:"success",className:"absolute top-3 right-3 gap-1 animate-in zoom-in duration-300",children:[n.jsx(pu,{className:"h-3 w-3"}),"Done"]}),n.jsxs(ee,{className:"space-y-3",children:[l?n.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center transition-all duration-300 group-hover:bg-primary/20 group-hover:scale-110",children:n.jsx(l,{className:"h-6 w-6 text-primary transition-transform duration-300 group-hover:scale-110"})}):n.jsx("div",{className:"text-4xl transition-transform duration-300 group-hover:scale-110",children:s}),n.jsx(te,{className:"text-xl",children:t}),n.jsx(Ce,{className:"text-base",children:r})]})]})}function SD(){const e=$t();return n.jsxs("div",{className:"space-y-8 max-w-6xl mx-auto",children:[n.jsxs("div",{className:"space-y-2 text-center md:text-left",children:[n.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Select Dashboard"}),n.jsx("p",{className:"text-muted-foreground text-lg",children:"Choose which system you want to access"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsx(ne,{id:"restaurant-dashboard",title:"Restaurant",description:"FCP Records, Inventory, Events & Financial Data",icon:vu,onClick:()=>e("/restaurant")}),n.jsx(ne,{id:"manufacturing-dashboard",title:"Food Manufacturing",description:"FCP Records, Traceability & B2B Sales",icon:Gb,onClick:()=>e("/manufacturing")})]})]})}function CD(){const e=$t();return n.jsxs("div",{className:"space-y-8 max-w-6xl mx-auto",children:[n.jsxs("div",{className:"space-y-2 text-center md:text-left",children:[n.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Restaurant Dashboard"}),n.jsx("p",{className:"text-muted-foreground text-lg",children:"Hot Like A Mexican - Wellington, NZ"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[n.jsx(ne,{id:"restaurant-fcp",title:"FCP Recordkeeping",description:"All 13 food control plan sections",icon:xu,onClick:()=>e("/restaurant/fcp")}),n.jsx(ne,{id:"inventory",title:"Inventory Management",description:"Stocktaking & shopping lists",icon:Fg,onClick:()=>e("/restaurant/inventory")}),n.jsx(ne,{id:"financial",title:"Financial Data",description:"CSV intake & data visualization",icon:zb,onClick:()=>e("/restaurant/financial")}),n.jsx(ne,{id:"events",title:"Caravan Events",description:"Event management & scheduling",icon:hn,onClick:()=>e("/restaurant/events")})]})]})}function kD(){const e=$t();return n.jsxs("div",{className:"space-y-8 max-w-6xl mx-auto",children:[n.jsxs("div",{className:"space-y-2 text-center md:text-left",children:[n.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Food Manufacturing Dashboard"}),n.jsx("p",{className:"text-muted-foreground text-lg",children:"Hot Like A Mexican - Wellington, NZ"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[n.jsx(ne,{id:"manufacturing-fcp",title:"FCP Recordkeeping",description:"All 13 food control plan sections",icon:xu,onClick:()=>e("/manufacturing/fcp")}),n.jsx(ne,{id:"traceability",title:"Traceability System",description:"Track ingredients & products",icon:Jb,onClick:()=>e("/manufacturing/traceability")}),n.jsx(ne,{id:"b2b-sales",title:"B2B Sales Tracking",description:"Business-to-business orders",icon:Wb,onClick:()=>e("/manufacturing/b2b")})]})]})}function DD(){const e=$t();return n.jsxs("div",{className:"space-y-8 max-w-7xl mx-auto",children:[n.jsxs("div",{className:"space-y-2 text-center md:text-left",children:[n.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Restaurant FCP Records"}),n.jsx("p",{className:"text-muted-foreground text-lg",children:"Food Control Plan compliance modules"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-xl font-semibold text-foreground",children:"Shared Records"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[n.jsx(ne,{id:"staff-training",title:"Staff Training Records",description:"Training Records and Staff Info",icon:gu,onClick:()=>e("/module/staff-training")}),n.jsx(ne,{id:"personal-hygiene",title:"Staff Sickness",description:"Staff health & sickness records",icon:pa,onClick:()=>e("/module/personal-hygiene")}),n.jsx(ne,{id:"fridge-temps",title:"Fridge/Chiller Temps",description:"Temperature monitoring logs",icon:He,onClick:()=>e("/module/fridge-temps")}),n.jsx(ne,{id:"cleaning-closing",title:"Cleaning & Closing",description:"Cleaning and Closing Procedures",icon:hs,onClick:()=>e("/module/cleaning-closing")}),n.jsx(ne,{id:"equipment-maintenance",title:"Equipment Maintenance",description:"Equipment repair Records",icon:ps,onClick:()=>e("/module/equipment-maintenance")}),n.jsx(ne,{id:"allergens",title:"Allergens in My Food",description:"Track allergens to inform customers",icon:Dn,onClick:()=>e("/module/allergens")}),n.jsx(ne,{id:"suppliers",title:"My Trusted Suppliers",description:"Track suppliers for food safety",icon:hn,onClick:()=>e("/module/suppliers")}),n.jsx(ne,{id:"supplier-deliveries",title:"Trusted Supplier Deliveries",description:"Record deliveries for traceability",icon:xa,onClick:()=>e("/module/supplier-deliveries")}),n.jsx(ne,{id:"b2b-sales",title:"Selling Food to Businesses",description:"Track B2B sales to other businesses",icon:Er,onClick:()=>e("/module/b2b-sales")})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-xl font-semibold text-foreground",children:"Restaurant-Specific Records"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[n.jsx(ne,{id:"cooking-poultry-batch",title:"Cooking Proteins - Batch",description:"Batch checks for chicken, beef, pork",icon:vu,onClick:()=>e("/module/cooking-poultry-batch")}),n.jsx(ne,{id:"proving-reheating",title:"Proving Reheating Method",description:"Reheating validation",icon:Jt,onClick:()=>e("/module/proving-reheating")}),n.jsx(ne,{id:"proving-time-temp",title:"Proving the Cooking Method",description:"Method validation records",icon:Jt,onClick:()=>e("/module/proving-time-temp")}),n.jsx(ne,{id:"proving-cooling",title:"Proving Cooling Method",description:"Cooling method validation",icon:fn,onClick:()=>e("/module/proving-cooling")}),n.jsx(ne,{id:"cooling-batch",title:"Cooling Food - Batch Checks",description:"Freshly cooked food cooling logs",icon:Og,onClick:()=>e("/module/cooling-batch")}),n.jsx(ne,{id:"transport-temp-checks",title:"Transported Food Temperature Checks",description:"Temp checks for food transported >4 hours",icon:hn,onClick:()=>e("/module/transport-temp-checks")}),n.jsx(ne,{id:"something-wrong",title:"When Something Goes Wrong",description:"Incident reports & corrective actions",icon:Zn,onClick:()=>e("/module/something-wrong")}),n.jsx(ne,{id:"customer-complaints",title:"Customer Complaints",description:"Complaint tracking & resolution",icon:Wo,onClick:()=>e("/module/customer-complaints")})]})]})]})}function TD(){const e=$t();return n.jsxs("div",{className:"space-y-8 max-w-7xl mx-auto",children:[n.jsxs("div",{className:"space-y-2 text-center md:text-left",children:[n.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Manufacturing FCP Records"}),n.jsx("p",{className:"text-muted-foreground text-lg",children:"Food Control Plan compliance modules"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-xl font-semibold text-muted-foreground",children:"Shared Records"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[n.jsx(ne,{id:"staff-training",title:"Staff Training Records",description:"Training Records and Staff Info",icon:gu,onClick:()=>e("/module/staff-training")}),n.jsx(ne,{id:"personal-hygiene",title:"Staff Sickness",description:"Staff health & sickness records",icon:pa,onClick:()=>e("/module/personal-hygiene")}),n.jsx(ne,{id:"fridge-temps",title:"Fridge/Chiller Temps",description:"Temperature monitoring logs",icon:He,onClick:()=>e("/module/fridge-temps")}),n.jsx(ne,{id:"cleaning-closing",title:"Cleaning & Closing",description:"Cleaning and Closing Procedures",icon:hs,onClick:()=>e("/module/cleaning-closing")}),n.jsx(ne,{id:"equipment-maintenance",title:"Equipment Maintenance",description:"Equipment repair Records",icon:ps,onClick:()=>e("/module/equipment-maintenance")}),n.jsx(ne,{id:"allergens",title:"Allergens in My Food",description:"Track allergens to inform customers",icon:Dn,onClick:()=>e("/module/allergens")}),n.jsx(ne,{id:"suppliers",title:"My Trusted Suppliers",description:"Track suppliers for food safety",icon:hn,onClick:()=>e("/module/suppliers")}),n.jsx(ne,{id:"supplier-deliveries",title:"Trusted Supplier Deliveries",description:"Record deliveries for traceability",icon:xa,onClick:()=>e("/module/supplier-deliveries")}),n.jsx(ne,{id:"b2b-sales",title:"Selling Food to Businesses",description:"Track B2B sales to other businesses",icon:Er,onClick:()=>e("/module/b2b-sales")})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-xl font-semibold text-muted-foreground",children:"Manufacturing-Specific Records"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[n.jsx(ne,{id:"cooking-poultry-batch",title:"Cooking Proteins - Batch",description:"Batch checks for chicken, beef, pork",icon:vu,onClick:()=>e("/module/cooking-poultry-batch")}),n.jsx(ne,{id:"proving-reheating",title:"Proving Reheating Method",description:"Reheating validation",icon:Jt,onClick:()=>e("/module/proving-reheating")}),n.jsx(ne,{id:"proving-time-temp",title:"Proving the Cooking Method",description:"Method validation records",icon:Jt,onClick:()=>e("/module/proving-time-temp")}),n.jsx(ne,{id:"proving-cooling",title:"Proving Cooling Method",description:"Cooling method validation",icon:fn,onClick:()=>e("/module/proving-cooling")}),n.jsx(ne,{id:"cooling-batch",title:"Cooling Food - Batch Checks",description:"Freshly cooked food cooling logs",icon:Og,onClick:()=>e("/module/cooling-batch")}),n.jsx(ne,{id:"processes-controls",title:"Processes & Controls",description:"Knowing your processes and controls",icon:eS,onClick:()=>e("/module/processes-controls")}),n.jsx(ne,{id:"selling-to-businesses",title:"Selling to Businesses",description:"B2B sales documentation",icon:Er,onClick:()=>e("/module/selling-to-businesses")})]})]})]})}var ll="Dialog",[ky,Dy]=gr(ll),[ED,nn]=ky(ll),Ty=e=>{const{__scopeDialog:t,children:r,open:s,defaultOpen:a,onOpenChange:o,modal:i=!0}=e,l=d.useRef(null),c=d.useRef(null),[u,h]=Xi({prop:s,defaultProp:a??!1,onChange:o,caller:ll});return n.jsx(ED,{scope:t,triggerRef:l,contentRef:c,contentId:xs(),titleId:xs(),descriptionId:xs(),open:u,onOpenChange:h,onOpenToggle:d.useCallback(()=>h(m=>!m),[h]),modal:i,children:r})};Ty.displayName=ll;var Ey="DialogTrigger",My=d.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,a=nn(Ey,r),o=Re(t,a.triggerRef);return n.jsx(be.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Bu(a.open),...s,ref:o,onClick:re(e.onClick,a.onOpenToggle)})});My.displayName=Ey;var Lu="DialogPortal",[MD,Ry]=ky(Lu,{forceMount:void 0}),Py=e=>{const{__scopeDialog:t,forceMount:r,children:s,container:a}=e,o=nn(Lu,t);return n.jsx(MD,{scope:t,forceMount:r,children:d.Children.map(s,i=>n.jsx(Fn,{present:r||o.open,children:n.jsx(Eu,{asChild:!0,container:a,children:i})}))})};Py.displayName=Lu;var Ni="DialogOverlay",Ay=d.forwardRef((e,t)=>{const r=Ry(Ni,e.__scopeDialog),{forceMount:s=r.forceMount,...a}=e,o=nn(Ni,e.__scopeDialog);return o.modal?n.jsx(Fn,{present:s||o.open,children:n.jsx(PD,{...a,ref:t})}):null});Ay.displayName=Ni;var RD=La("DialogOverlay.RemoveScroll"),PD=d.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,a=nn(Ni,r);return n.jsx(Mu,{as:RD,allowPinchZoom:!0,shards:[a.contentRef],children:n.jsx(be.div,{"data-state":Bu(a.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),_r="DialogContent",Oy=d.forwardRef((e,t)=>{const r=Ry(_r,e.__scopeDialog),{forceMount:s=r.forceMount,...a}=e,o=nn(_r,e.__scopeDialog);return n.jsx(Fn,{present:s||o.open,children:o.modal?n.jsx(AD,{...a,ref:t}):n.jsx(OD,{...a,ref:t})})});Oy.displayName=_r;var AD=d.forwardRef((e,t)=>{const r=nn(_r,e.__scopeDialog),s=d.useRef(null),a=Re(t,r.contentRef,s);return d.useEffect(()=>{const o=s.current;if(o)return bv(o)},[]),n.jsx(Iy,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:re(e.onCloseAutoFocus,o=>{var i;o.preventDefault(),(i=r.triggerRef.current)==null||i.focus()}),onPointerDownOutside:re(e.onPointerDownOutside,o=>{const i=o.detail.originalEvent,l=i.button===0&&i.ctrlKey===!0;(i.button===2||l)&&o.preventDefault()}),onFocusOutside:re(e.onFocusOutside,o=>o.preventDefault())})}),OD=d.forwardRef((e,t)=>{const r=nn(_r,e.__scopeDialog),s=d.useRef(!1),a=d.useRef(!1);return n.jsx(Iy,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,l;(i=e.onCloseAutoFocus)==null||i.call(e,o),o.defaultPrevented||(s.current||(l=r.triggerRef.current)==null||l.focus(),o.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:o=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(s.current=!0,o.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const i=o.target;((u=r.triggerRef.current)==null?void 0:u.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&a.current&&o.preventDefault()}})}),Iy=d.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:o,...i}=e,l=nn(_r,r),c=d.useRef(null),u=Re(t,c);return Gg(),n.jsxs(n.Fragment,{children:[n.jsx(ju,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:o,children:n.jsx(yu,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Bu(l.open),...i,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),n.jsxs(n.Fragment,{children:[n.jsx(FD,{titleId:l.titleId}),n.jsx(LD,{contentRef:c,descriptionId:l.descriptionId})]})]})}),$u="DialogTitle",Fy=d.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,a=nn($u,r);return n.jsx(be.h2,{id:a.titleId,...s,ref:t})});Fy.displayName=$u;var _y="DialogDescription",Ly=d.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,a=nn(_y,r);return n.jsx(be.p,{id:a.descriptionId,...s,ref:t})});Ly.displayName=_y;var $y="DialogClose",By=d.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,a=nn($y,r);return n.jsx(be.button,{type:"button",...s,ref:t,onClick:re(e.onClick,()=>a.onOpenChange(!1))})});By.displayName=$y;function Bu(e){return e?"open":"closed"}var zy="DialogTitleWarning",[ID,Wy]=oS(zy,{contentName:_r,titleName:$u,docsSlug:"dialog"}),FD=({titleId:e})=>{const t=Wy(zy),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return d.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},_D="DialogDescriptionWarning",LD=({contentRef:e,descriptionId:t})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Wy(_D).contentName}}.`;return d.useEffect(()=>{var o;const a=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(s))},[s,e,t]),null},Uy=Ty,$D=My,Yy=Py,zu=Ay,Wu=Oy,Uu=Fy,Yu=Ly,Gu=By,Gy="AlertDialog",[BD]=gr(Gy,[Dy]),_n=Dy(),Hy=e=>{const{__scopeAlertDialog:t,...r}=e,s=_n(t);return n.jsx(Uy,{...s,...r,modal:!0})};Hy.displayName=Gy;var zD="AlertDialogTrigger",WD=d.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,a=_n(r);return n.jsx($D,{...a,...s,ref:t})});WD.displayName=zD;var UD="AlertDialogPortal",Vy=e=>{const{__scopeAlertDialog:t,...r}=e,s=_n(t);return n.jsx(Yy,{...s,...r})};Vy.displayName=UD;var YD="AlertDialogOverlay",qy=d.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,a=_n(r);return n.jsx(zu,{...a,...s,ref:t})});qy.displayName=YD;var ys="AlertDialogContent",[GD,HD]=BD(ys),VD=mS("AlertDialogContent"),Ky=d.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:s,...a}=e,o=_n(r),i=d.useRef(null),l=Re(t,i),c=d.useRef(null);return n.jsx(ID,{contentName:ys,titleName:Qy,docsSlug:"alert-dialog",children:n.jsx(GD,{scope:r,cancelRef:c,children:n.jsxs(Wu,{role:"alertdialog",...o,...a,ref:l,onOpenAutoFocus:re(a.onOpenAutoFocus,u=>{var h;u.preventDefault(),(h=c.current)==null||h.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[n.jsx(VD,{children:s}),n.jsx(KD,{contentRef:i})]})})})});Ky.displayName=ys;var Qy="AlertDialogTitle",Zy=d.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,a=_n(r);return n.jsx(Uu,{...a,...s,ref:t})});Zy.displayName=Qy;var Xy="AlertDialogDescription",Jy=d.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,a=_n(r);return n.jsx(Yu,{...a,...s,ref:t})});Jy.displayName=Xy;var qD="AlertDialogAction",ej=d.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,a=_n(r);return n.jsx(Gu,{...a,...s,ref:t})});ej.displayName=qD;var tj="AlertDialogCancel",nj=d.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,{cancelRef:a}=HD(tj,r),o=_n(r),i=Re(t,a);return n.jsx(Gu,{...o,...s,ref:i})});nj.displayName=tj;var KD=({contentRef:e})=>{const t=`\`${ys}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${ys}\` by passing a \`${Xy}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${ys}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return d.useEffect(()=>{var s;document.getElementById((s=e.current)==null?void 0:s.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},QD=Hy,ZD=Vy,rj=qy,sj=Ky,aj=ej,oj=nj,ij=Zy,lj=Jy;const jt=QD,XD=ZD,cj=d.forwardRef(({className:e,...t},r)=>n.jsx(rj,{className:X("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));cj.displayName=rj.displayName;const at=d.forwardRef(({className:e,...t},r)=>n.jsxs(XD,{children:[n.jsx(cj,{}),n.jsx(sj,{ref:r,className:X("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));at.displayName=sj.displayName;const ot=({className:e,...t})=>n.jsx("div",{className:X("flex flex-col space-y-2 text-center sm:text-left",e),...t});ot.displayName="AlertDialogHeader";const it=({className:e,...t})=>n.jsx("div",{className:X("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});it.displayName="AlertDialogFooter";const lt=d.forwardRef(({className:e,...t},r)=>n.jsx(ij,{ref:r,className:X("text-lg font-semibold",e),...t}));lt.displayName=ij.displayName;const ct=d.forwardRef(({className:e,...t},r)=>n.jsx(lj,{ref:r,className:X("text-sm text-muted-foreground",e),...t}));ct.displayName=lj.displayName;const dt=d.forwardRef(({className:e,...t},r)=>n.jsx(aj,{ref:r,className:X(hu(),e),...t}));dt.displayName=aj.displayName;const ut=d.forwardRef(({className:e,...t},r)=>n.jsx(oj,{ref:r,className:X(hu({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));ut.displayName=oj.displayName;const JD="https://script.google.com/macros/s/AKfycbz27gmlc2swJgIXdayBHnP-b3KMIR-TiuY6Ib35piYo8m0TYDD1SzFbEDp2Q1EeywQg/exec",fd=_e()(Le((e,t)=>({temperatureRecords:[],isLoading:!1,lastFetchTime:null,fetchError:null,setLoading:r=>{e({isLoading:r})},fetchFromGoogleSheets:async()=>{console.log(" fetchFromGoogleSheets called for temperatures"),e({isLoading:!0,fetchError:null});try{const r=await fetch(JD,{method:"GET"});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const s=await r.json();if(s.success&&s.data)e({temperatureRecords:s.data,lastFetchTime:new Date().toISOString(),fetchError:null}),console.log(" Temperature records fetched:",s.data.length);else throw new Error(s.error||"Failed to fetch data")}catch(r){console.error("Error fetching from Google Sheets:",r),e({fetchError:r instanceof Error?r.message:"Unknown error"})}finally{e({isLoading:!1})}},addLocalRecord:r=>{e(s=>({temperatureRecords:[r,...s.temperatureRecords]}))},getTodayRecord:()=>{const r=new Date().toISOString().split("T")[0];return t().temperatureRecords.find(s=>s.date===r)||null}}),{name:"taquero-temperature"})),eT="https://script.google.com/macros/s/AKfycbz27gmlc2swJgIXdayBHnP-b3KMIR-TiuY6Ib35piYo8m0TYDD1SzFbEDp2Q1EeywQg/exec";function tT({onComplete:e,onShowToast:t,onWizardStart:r}){const[s,a]=d.useState("date"),[o,i]=d.useState({chiller1:3,chiller2:3,chiller3:3,chiller4:3,chiller5:3,chiller6:3,freezer:-18}),[l,c]=d.useState(!1),[u,h]=d.useState(!1),[m,g]=d.useState(""),[j,w]=d.useState(!1),v=Ie(k=>k.currentUser),p=ga(k=>k.getWhoSubmittedToday),f=ga(k=>k.recordUserSubmission),x=ga(k=>k.markTaskCompleted),y=fd(k=>k.addLocalRecord),N=fd(k=>k.getTodayRecord),T=Lb(new Date),D=(k,M)=>{i($=>({...$,[k]:Number(($[k]+M).toFixed(1))}))},E=()=>{a(1),r==null||r()},S=async()=>{console.log(" handleFinish called");const k=N();if(console.log(" Today record from Google Sheets:",k),k){console.log(" Showing existing record warning"),w(!0);return}const M=p("fridge-temps");if(console.log(" Previous submitter from localStorage:",M),M){console.log(" Showing duplicate alert"),g(M),h(!0);return}console.log(" No duplicates found, proceeding with submission");const $=new Date,I=$.getFullYear(),B=String($.getMonth()+1).padStart(2,"0"),z=String($.getDate()).padStart(2,"0"),A=`${I}-${B}-${z}`,F=(v==null?void 0:v.name)||"Unknown";await R(A,F)},C=async()=>{const k=new Date,M=k.getFullYear(),$=String(k.getMonth()+1).padStart(2,"0"),I=String(k.getDate()).padStart(2,"0"),B=`${M}-${$}-${I}`,z=(v==null?void 0:v.name)||"Unknown";await R(B,z)},R=async(k,M)=>{console.log(" submitTemperatures called with:",{dateString:k,userName:M});const $={date:k,timestamp:new Date().toISOString(),user:M,chillers:[{unit:"Chiller #1",temperature:o.chiller1},{unit:"Chiller #2",temperature:o.chiller2},{unit:"Chiller #3",temperature:o.chiller3},{unit:"Chiller #4",temperature:o.chiller4},{unit:"Chiller #5",temperature:o.chiller5},{unit:"Chiller #6",temperature:o.chiller6}],freezer:{unit:"Freezer",temperature:o.freezer}};c(!0);try{await fetch(eT,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify($)});const I=JSON.parse(localStorage.getItem("fridge_temp_records")||"[]");I.push($),localStorage.setItem("fridge_temp_records",JSON.stringify(I)),y($),f("fridge-temps",M),x("fridge-temps"),t("Temperature check saved to Google Sheets!","success"),e()}catch(I){console.error("Error saving temperature data:",I),t("Error saving temperature data","error")}finally{c(!1)}};if(s==="date")return n.jsx(V,{className:"p-8 max-w-2xl mx-auto",children:n.jsxs("div",{className:"space-y-6 text-center",children:[n.jsx("h3",{className:"text-2xl font-semibold",children:"Writing Records for:"}),n.jsx("div",{className:"text-xl text-muted-foreground",children:T}),n.jsx(P,{onClick:E,size:"lg",className:"w-full",children:"Continue"})]})});if(typeof s=="number"&&s<=6){const k=s,M=`chiller${k}`,$=o[M];return n.jsx(V,{className:"p-8 max-w-2xl mx-auto",children:n.jsxs("div",{className:"space-y-8",children:[n.jsxs("h3",{className:"text-3xl font-bold text-center",children:["Chiller #",k]}),n.jsxs("div",{className:"flex items-center justify-center gap-4",children:[n.jsx(P,{variant:"outline",size:"icon",className:"h-16 w-16",onClick:()=>D(M,-.5),children:n.jsx(Lf,{className:"h-6 w-6"})}),n.jsx("div",{className:"text-center min-w-[180px]",children:n.jsxs("div",{className:"text-5xl font-bold inline",children:[$,n.jsx("span",{className:"text-3xl text-muted-foreground ml-2",children:"C"})]})}),n.jsx(P,{variant:"outline",size:"icon",className:"h-16 w-16",onClick:()=>D(M,.5),children:n.jsx(oe,{className:"h-6 w-6"})})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx(P,{variant:"outline",onClick:()=>a(k===1?"date":k-1),className:"flex-1",children:"Previous"}),n.jsx(P,{onClick:()=>a(k+1),className:"flex-1",children:"Continue"})]})]})})}return n.jsxs(n.Fragment,{children:[n.jsx(jt,{open:j,onOpenChange:w,children:n.jsxs(at,{children:[n.jsxs(ot,{children:[n.jsx(lt,{children:"Record Already Exists"}),n.jsx(ct,{children:"A temperature check has already been completed for today. Creating another record will result in duplicate entries. Do you want to continue anyway?"})]}),n.jsxs(it,{children:[n.jsx(ut,{onClick:()=>{w(!1),t("Temperature check cancelled","warning")},children:"Cancel"}),n.jsx(dt,{onClick:async()=>{w(!1),await C()},children:"Continue Anyway"})]})]})}),n.jsx(jt,{open:u,onOpenChange:h,children:n.jsxs(at,{children:[n.jsxs(ot,{children:[n.jsx(lt,{children:"Duplicate Entry Warning"}),n.jsxs(ct,{children:["Temperature check already completed for this date by ",m,". Submitting again will create a duplicate entry in Google Sheets."]})]}),n.jsxs(it,{children:[n.jsx(ut,{onClick:()=>{h(!1),t("Temperature check cancelled","warning")},children:"Cancel"}),n.jsx(dt,{onClick:async()=>{h(!1),await C()},children:"Continue Anyway"})]})]})}),n.jsx(V,{className:"p-8 max-w-2xl mx-auto",children:n.jsxs("div",{className:"space-y-8",children:[n.jsx("h3",{className:"text-3xl font-bold text-center",children:"Freezer"}),n.jsxs("div",{className:"flex items-center justify-center gap-4",children:[n.jsx(P,{variant:"outline",size:"icon",className:"h-16 w-16",onClick:()=>D("freezer",-.5),children:n.jsx(Lf,{className:"h-6 w-6"})}),n.jsx("div",{className:"text-center min-w-[180px]",children:n.jsxs("div",{className:"text-5xl font-bold inline",children:[o.freezer,n.jsx("span",{className:"text-3xl text-muted-foreground ml-2",children:"C"})]})}),n.jsx(P,{variant:"outline",size:"icon",className:"h-16 w-16",onClick:()=>D("freezer",.5),children:n.jsx(oe,{className:"h-6 w-6"})})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"text-center text-sm text-muted-foreground",children:"Saving temperature check for:"}),n.jsx("div",{className:"text-center text-lg font-medium",children:T})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx(P,{variant:"outline",onClick:()=>a(6),className:"flex-1",disabled:l,children:"Previous"}),n.jsx(P,{onClick:S,className:"flex-1",disabled:l,children:l?"Saving...":"Finish & Submit"})]})]})})]})}function vn({message:e,type:t="info",onClose:r}){const s={success:"bg-green-500/10 border-green-500/20 text-green-400",error:"bg-red-600/20 border-red-500/40 text-red-400",info:"bg-slate-500/10 border-slate-500/20 text-slate-300",warning:"bg-red-600/20 border-red-500/40 text-red-400"};return d.useEffect(()=>{const a=setTimeout(r,4e3);return()=>clearTimeout(a)},[r]),n.jsxs("div",{className:X("flex items-center gap-2 rounded-md border p-4 shadow-lg animate-in slide-in-from-bottom-2",s[t]),children:[n.jsx("p",{className:"flex-1 text-sm font-medium",children:e}),n.jsx("button",{onClick:r,className:"rounded-sm opacity-70 hover:opacity-100 transition-opacity",children:n.jsx(Lg,{className:"h-4 w-4"})})]})}function yn({children:e}){return n.jsx("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col gap-2 max-w-md",children:e})}function rn(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Lr(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const dj=6048e5,nT=864e5;let rT={};function cl(){return rT}function Ua(e,t){var l,c,u,h;const r=cl(),s=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((h=(u=r.locale)==null?void 0:u.options)==null?void 0:h.weekStartsOn)??0,a=rn(e),o=a.getDay(),i=(o<s?7:0)+o-s;return a.setDate(a.getDate()-i),a.setHours(0,0,0,0),a}function bi(e){return Ua(e,{weekStartsOn:1})}function uj(e){const t=rn(e),r=t.getFullYear(),s=Lr(e,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const a=bi(s),o=Lr(e,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const i=bi(o);return t.getTime()>=a.getTime()?r+1:t.getTime()>=i.getTime()?r:r-1}function dh(e){const t=rn(e);return t.setHours(0,0,0,0),t}function uh(e){const t=rn(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function sT(e,t){const r=dh(e),s=dh(t),a=+r-uh(r),o=+s-uh(s);return Math.round((a-o)/nT)}function aT(e){const t=uj(e),r=Lr(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),bi(r)}function oT(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function iT(e){if(!oT(e)&&typeof e!="number")return!1;const t=rn(e);return!isNaN(Number(t))}function lT(e){const t=rn(e),r=Lr(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}const cT={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},dT=(e,t,r)=>{let s;const a=cT[e];return typeof a=="string"?s=a:t===1?s=a.one:s=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};function ec(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const uT={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},mT={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},fT={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},hT={date:ec({formats:uT,defaultWidth:"full"}),time:ec({formats:mT,defaultWidth:"full"}),dateTime:ec({formats:fT,defaultWidth:"full"})},pT={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},xT=(e,t,r,s)=>pT[e];function Qs(e){return(t,r)=>{const s=r!=null&&r.context?String(r.context):"standalone";let a;if(s==="formatting"&&e.formattingValues){const i=e.defaultFormattingWidth||e.defaultWidth,l=r!=null&&r.width?String(r.width):i;a=e.formattingValues[l]||e.formattingValues[i]}else{const i=e.defaultWidth,l=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[l]||e.values[i]}const o=e.argumentCallback?e.argumentCallback(t):t;return a[o]}}const gT={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},vT={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},yT={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},jT={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},wT={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},NT={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},bT=(e,t)=>{const r=Number(e),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},ST={ordinalNumber:bT,era:Qs({values:gT,defaultWidth:"wide"}),quarter:Qs({values:vT,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Qs({values:yT,defaultWidth:"wide"}),day:Qs({values:jT,defaultWidth:"wide"}),dayPeriod:Qs({values:wT,defaultWidth:"wide",formattingValues:NT,defaultFormattingWidth:"wide"})};function Zs(e){return(t,r={})=>{const s=r.width,a=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],o=t.match(a);if(!o)return null;const i=o[0],l=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?kT(l,m=>m.test(i)):CT(l,m=>m.test(i));let u;u=e.valueCallback?e.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const h=t.slice(i.length);return{value:u,rest:h}}}function CT(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function kT(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function DT(e){return(t,r={})=>{const s=t.match(e.matchPattern);if(!s)return null;const a=s[0],o=t.match(e.parsePattern);if(!o)return null;let i=e.valueCallback?e.valueCallback(o[0]):o[0];i=r.valueCallback?r.valueCallback(i):i;const l=t.slice(a.length);return{value:i,rest:l}}}const TT=/^(\d+)(th|st|nd|rd)?/i,ET=/\d+/i,MT={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},RT={any:[/^b/i,/^(a|c)/i]},PT={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},AT={any:[/1/i,/2/i,/3/i,/4/i]},OT={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},IT={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},FT={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},_T={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},LT={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},$T={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},BT={ordinalNumber:DT({matchPattern:TT,parsePattern:ET,valueCallback:e=>parseInt(e,10)}),era:Zs({matchPatterns:MT,defaultMatchWidth:"wide",parsePatterns:RT,defaultParseWidth:"any"}),quarter:Zs({matchPatterns:PT,defaultMatchWidth:"wide",parsePatterns:AT,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Zs({matchPatterns:OT,defaultMatchWidth:"wide",parsePatterns:IT,defaultParseWidth:"any"}),day:Zs({matchPatterns:FT,defaultMatchWidth:"wide",parsePatterns:_T,defaultParseWidth:"any"}),dayPeriod:Zs({matchPatterns:LT,defaultMatchWidth:"any",parsePatterns:$T,defaultParseWidth:"any"})},zT={code:"en-US",formatDistance:dT,formatLong:hT,formatRelative:xT,localize:ST,match:BT,options:{weekStartsOn:0,firstWeekContainsDate:1}};function WT(e){const t=rn(e);return sT(t,lT(t))+1}function UT(e){const t=rn(e),r=+bi(t)-+aT(t);return Math.round(r/dj)+1}function mj(e,t){var h,m,g,j;const r=rn(e),s=r.getFullYear(),a=cl(),o=(t==null?void 0:t.firstWeekContainsDate)??((m=(h=t==null?void 0:t.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??a.firstWeekContainsDate??((j=(g=a.locale)==null?void 0:g.options)==null?void 0:j.firstWeekContainsDate)??1,i=Lr(e,0);i.setFullYear(s+1,0,o),i.setHours(0,0,0,0);const l=Ua(i,t),c=Lr(e,0);c.setFullYear(s,0,o),c.setHours(0,0,0,0);const u=Ua(c,t);return r.getTime()>=l.getTime()?s+1:r.getTime()>=u.getTime()?s:s-1}function YT(e,t){var l,c,u,h;const r=cl(),s=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((h=(u=r.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??1,a=mj(e,t),o=Lr(e,0);return o.setFullYear(a,0,s),o.setHours(0,0,0,0),Ua(o,t)}function GT(e,t){const r=rn(e),s=+Ua(r,t)-+YT(r,t);return Math.round(s/dj)+1}function de(e,t){const r=e<0?"-":"",s=Math.abs(e).toString().padStart(t,"0");return r+s}const Wn={y(e,t){const r=e.getFullYear(),s=r>0?r:1-r;return de(t==="yy"?s%100:s,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):de(r+1,2)},d(e,t){return de(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return de(e.getHours()%12||12,t.length)},H(e,t){return de(e.getHours(),t.length)},m(e,t){return de(e.getMinutes(),t.length)},s(e,t){return de(e.getSeconds(),t.length)},S(e,t){const r=t.length,s=e.getMilliseconds(),a=Math.trunc(s*Math.pow(10,r-3));return de(a,t.length)}},qr={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},mh={G:function(e,t,r){const s=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const s=e.getFullYear(),a=s>0?s:1-s;return r.ordinalNumber(a,{unit:"year"})}return Wn.y(e,t)},Y:function(e,t,r,s){const a=mj(e,s),o=a>0?a:1-a;if(t==="YY"){const i=o%100;return de(i,2)}return t==="Yo"?r.ordinalNumber(o,{unit:"year"}):de(o,t.length)},R:function(e,t){const r=uj(e);return de(r,t.length)},u:function(e,t){const r=e.getFullYear();return de(r,t.length)},Q:function(e,t,r){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(s);case"QQ":return de(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,t,r){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(s);case"qq":return de(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,t,r){const s=e.getMonth();switch(t){case"M":case"MM":return Wn.M(e,t);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(e,t,r){const s=e.getMonth();switch(t){case"L":return String(s+1);case"LL":return de(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(e,t,r,s){const a=GT(e,s);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):de(a,t.length)},I:function(e,t,r){const s=UT(e);return t==="Io"?r.ordinalNumber(s,{unit:"week"}):de(s,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):Wn.d(e,t)},D:function(e,t,r){const s=WT(e);return t==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):de(s,t.length)},E:function(e,t,r){const s=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(e,t,r,s){const a=e.getDay(),o=(a-s.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return de(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,s){const a=e.getDay(),o=(a-s.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return de(o,t.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const s=e.getDay(),a=s===0?7:s;switch(t){case"i":return String(a);case"ii":return de(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(e,t,r){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){const s=e.getHours();let a;switch(s===12?a=qr.noon:s===0?a=qr.midnight:a=s/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const s=e.getHours();let a;switch(s>=17?a=qr.evening:s>=12?a=qr.afternoon:s>=4?a=qr.morning:a=qr.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let s=e.getHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return Wn.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):Wn.H(e,t)},K:function(e,t,r){const s=e.getHours()%12;return t==="Ko"?r.ordinalNumber(s,{unit:"hour"}):de(s,t.length)},k:function(e,t,r){let s=e.getHours();return s===0&&(s=24),t==="ko"?r.ordinalNumber(s,{unit:"hour"}):de(s,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):Wn.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):Wn.s(e,t)},S:function(e,t){return Wn.S(e,t)},X:function(e,t,r){const s=e.getTimezoneOffset();if(s===0)return"Z";switch(t){case"X":return hh(s);case"XXXX":case"XX":return Nr(s);case"XXXXX":case"XXX":default:return Nr(s,":")}},x:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"x":return hh(s);case"xxxx":case"xx":return Nr(s);case"xxxxx":case"xxx":default:return Nr(s,":")}},O:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+fh(s,":");case"OOOO":default:return"GMT"+Nr(s,":")}},z:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+fh(s,":");case"zzzz":default:return"GMT"+Nr(s,":")}},t:function(e,t,r){const s=Math.trunc(e.getTime()/1e3);return de(s,t.length)},T:function(e,t,r){const s=e.getTime();return de(s,t.length)}};function fh(e,t=""){const r=e>0?"-":"+",s=Math.abs(e),a=Math.trunc(s/60),o=s%60;return o===0?r+String(a):r+String(a)+t+de(o,2)}function hh(e,t){return e%60===0?(e>0?"-":"+")+de(Math.abs(e)/60,2):Nr(e,t)}function Nr(e,t=""){const r=e>0?"-":"+",s=Math.abs(e),a=de(Math.trunc(s/60),2),o=de(s%60,2);return r+a+t+o}const ph=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},fj=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},HT=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],s=r[1],a=r[2];if(!a)return ph(e,t);let o;switch(s){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;case"PPPP":default:o=t.dateTime({width:"full"});break}return o.replace("{{date}}",ph(s,t)).replace("{{time}}",fj(a,t))},VT={p:fj,P:HT},qT=/^D+$/,KT=/^Y+$/,QT=["D","DD","YY","YYYY"];function ZT(e){return qT.test(e)}function XT(e){return KT.test(e)}function JT(e,t,r){const s=eE(e,t,r);if(console.warn(s),QT.includes(e))throw new RangeError(s)}function eE(e,t,r){const s=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${s} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const tE=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,nE=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,rE=/^'([^]*?)'?$/,sE=/''/g,aE=/[a-zA-Z]/;function Cn(e,t,r){var h,m,g,j;const s=cl(),a=s.locale??zT,o=s.firstWeekContainsDate??((m=(h=s.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,i=s.weekStartsOn??((j=(g=s.locale)==null?void 0:g.options)==null?void 0:j.weekStartsOn)??0,l=rn(e);if(!iT(l))throw new RangeError("Invalid time value");let c=t.match(nE).map(w=>{const v=w[0];if(v==="p"||v==="P"){const p=VT[v];return p(w,a.formatLong)}return w}).join("").match(tE).map(w=>{if(w==="''")return{isToken:!1,value:"'"};const v=w[0];if(v==="'")return{isToken:!1,value:oE(w)};if(mh[v])return{isToken:!0,value:w};if(v.match(aE))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");return{isToken:!1,value:w}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const u={firstWeekContainsDate:o,weekStartsOn:i,locale:a};return c.map(w=>{if(!w.isToken)return w.value;const v=w.value;(XT(v)||ZT(v))&&JT(v,t,String(e));const p=mh[v[0]];return p(l,v,a.localize,u)}).join("")}function oE(e){const t=e.match(rE);return t?t[1].replace(sE,"'"):e}function iE(){const e=$t(),[t,r]=d.useState([]),[s,a]=d.useState(!1),{temperatureRecords:o,isLoading:i,fetchFromGoogleSheets:l,getTodayRecord:c}=fd(),{markTaskCompleted:u,recordUserSubmission:h}=ga();d.useEffect(()=>{(async()=>{await l();const f=c();f&&(u("fridge-temps"),h("fridge-temps",f.user))})()},[l,c,u,h]);const m=(p,f="info")=>{const x=Date.now();r(y=>[...y,{id:x,message:p,type:f}])},g=p=>{r(f=>f.filter(x=>x.id!==p))},j=()=>{l(),a(!1),e(-1)},w=()=>{a(!0)},v=o.slice(0,5);return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"space-y-8 max-w-4xl mx-auto",children:[n.jsxs("div",{className:"space-y-2 text-center md:text-left",children:[n.jsxs("h2",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[n.jsx(He,{className:"h-8 w-8"}),"Fridge/Chiller Temperature Checks"]}),n.jsx("p",{className:"text-muted-foreground text-lg",children:"Daily temperature monitoring for all chillers and freezer"})]}),n.jsx(tT,{onComplete:j,onShowToast:m,onWizardStart:w}),!s&&n.jsxs(V,{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:[n.jsx(ee,{children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:n.jsx(He,{className:"h-5 w-5 text-primary"})}),n.jsxs("div",{children:[n.jsx(te,{children:"Recent Temperature Checks"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Last 5 temperature records"})]})]})}),n.jsx(K,{children:i?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(ke,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):v.length===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No temperature records found"}):n.jsx("div",{className:"space-y-4",children:v.map((p,f)=>{const x=b=>{if(!b)return new Date;if(b.includes("/")){const[T,D,E]=b.split("/");return new Date(`${E}-${D}-${T}`)}return new Date(b)},y=x(p.date),N=x(p.timestamp||p.date);return n.jsxs("div",{className:"border rounded-lg p-4 space-y-3 transition-all duration-300 hover:shadow-md hover:border-primary/30 hover:scale-[1.01] animate-in fade-in slide-in-from-left-4",style:{animationDelay:`${f*100}ms`},children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold",children:isNaN(y.getTime())?p.date:Cn(y,"EEEE, MMMM d, yyyy")}),n.jsxs("div",{className:"text-sm text-muted-foreground",children:["Recorded by ",p.user]})]}),n.jsx("div",{className:"text-xs text-muted-foreground",children:isNaN(N.getTime())?"":Cn(N,"h:mm a")})]}),n.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 text-sm",children:[p.chillers.map((b,T)=>n.jsxs("div",{className:"text-center p-2 bg-muted/50 rounded",children:[n.jsx("div",{className:"text-xs text-muted-foreground",children:b.unit}),n.jsxs("div",{className:"font-mono font-semibold",children:[b.temperature,"C"]})]},T)),p.freezer&&n.jsxs("div",{className:"text-center p-2 bg-muted/50 rounded",children:[n.jsx("div",{className:"text-xs text-muted-foreground",children:p.freezer.unit}),n.jsxs("div",{className:"font-mono font-semibold",children:[p.freezer.temperature,"C"]})]})]})]},p.id||f)})})})]})]}),n.jsx(yn,{children:t.map(p=>n.jsx(vn,{message:p.message,type:p.type,onClose:()=>g(p.id)},p.id))})]})}function yr({title:e,description:t}){return n.jsxs("div",{className:"space-y-8 max-w-4xl mx-auto",children:[n.jsxs("div",{className:"space-y-2 text-center md:text-left",children:[n.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:e}),n.jsx("p",{className:"text-muted-foreground text-lg",children:t})]}),n.jsxs(V,{children:[n.jsxs(ee,{className:"text-center pb-3",children:[n.jsx(Yb,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),n.jsx(te,{className:"text-2xl",children:"Coming Soon"}),n.jsx(Ce,{className:"text-base",children:"This module is currently under development"})]}),n.jsx(K,{className:"text-center text-sm text-muted-foreground",children:"Check back later for updates"})]})]})}const Pe=Uy,lE=Yy,hj=d.forwardRef(({className:e,...t},r)=>n.jsx(zu,{ref:r,className:X("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));hj.displayName=zu.displayName;const De=d.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(lE,{children:[n.jsx(hj,{}),n.jsxs(Wu,{ref:s,className:X("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,n.jsxs(Gu,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground flex items-center justify-center",children:[n.jsx(Lg,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));De.displayName=Wu.displayName;const Te=({className:e,...t})=>n.jsx("div",{className:X("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Te.displayName="DialogHeader";const pj=({className:e,...t})=>n.jsx("div",{className:X("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});pj.displayName="DialogFooter";const Ee=d.forwardRef(({className:e,...t},r)=>n.jsx(Uu,{ref:r,className:X("text-lg font-semibold leading-none tracking-tight",e),...t}));Ee.displayName=Uu.displayName;const Hu=d.forwardRef(({className:e,...t},r)=>n.jsx(Yu,{ref:r,className:X("text-sm text-muted-foreground",e),...t}));Hu.displayName=Yu.displayName;var cE=Symbol.for("react.lazy"),Si=Va[" use ".trim().toString()];function dE(e){return typeof e=="object"&&e!==null&&"then"in e}function xj(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===cE&&"_payload"in e&&dE(e._payload)}function uE(e){const t=mE(e),r=d.forwardRef((s,a)=>{let{children:o,...i}=s;xj(o)&&typeof Si=="function"&&(o=Si(o._payload));const l=d.Children.toArray(o),c=l.find(hE);if(c){const u=c.props.children,h=l.map(m=>m===c?d.Children.count(u)>1?d.Children.only(null):d.isValidElement(u)?u.props.children:null:m);return n.jsx(t,{...i,ref:a,children:d.isValidElement(u)?d.cloneElement(u,void 0,h):null})}return n.jsx(t,{...i,ref:a,children:o})});return r.displayName=`${e}.Slot`,r}function mE(e){const t=d.forwardRef((r,s)=>{let{children:a,...o}=r;if(xj(a)&&typeof Si=="function"&&(a=Si(a._payload)),d.isValidElement(a)){const i=xE(a),l=pE(o,a.props);return a.type!==d.Fragment&&(l.ref=s?_s(s,i):i),d.cloneElement(a,l)}return d.Children.count(a)>1?d.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var fE=Symbol("radix.slottable");function hE(e){return d.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===fE}function pE(e,t){const r={...t};for(const s in t){const a=e[s],o=t[s];/^on[A-Z]/.test(s)?a&&o?r[s]=(...l)=>{const c=o(...l);return a(...l),c}:a&&(r[s]=a):s==="style"?r[s]={...a,...o}:s==="className"&&(r[s]=[a,o].filter(Boolean).join(" "))}return{...e,...r}}function xE(e){var s,a;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var gE=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],vE=gE.reduce((e,t)=>{const r=uE(`Primitive.${t}`),s=d.forwardRef((a,o)=>{const{asChild:i,...l}=a,c=i?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(c,{...l,ref:o})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{}),yE="Label",gj=d.forwardRef((e,t)=>n.jsx(vE.label,{...e,ref:t,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));gj.displayName=yE;var vj=gj;const jE=mu("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),_=d.forwardRef(({className:e,...t},r)=>n.jsx(vj,{ref:r,className:X(jE(),e),...t}));_.displayName=vj.displayName;function wE(e,t=[]){let r=[];function s(o,i){const l=d.createContext(i);l.displayName=o+"Context";const c=r.length;r=[...r,i];const u=m=>{var f;const{scope:g,children:j,...w}=m,v=((f=g==null?void 0:g[e])==null?void 0:f[c])||l,p=d.useMemo(()=>w,Object.values(w));return n.jsx(v.Provider,{value:p,children:j})};u.displayName=o+"Provider";function h(m,g){var v;const j=((v=g==null?void 0:g[e])==null?void 0:v[c])||l,w=d.useContext(j);if(w)return w;if(i!==void 0)return i;throw new Error(`\`${m}\` must be used within \`${o}\``)}return[u,h]}const a=()=>{const o=r.map(i=>d.createContext(i));return function(l){const c=(l==null?void 0:l[e])||o;return d.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[s,NE(a,...t)]}function NE(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const s=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const i=s.reduce((l,{useScope:c,scopeName:u})=>{const m=c(o)[`__scope${u}`];return{...l,...m}},{});return d.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return r.scopeName=t.scopeName,r}var bE=Symbol.for("react.lazy"),Ci=Va[" use ".trim().toString()];function SE(e){return typeof e=="object"&&e!==null&&"then"in e}function yj(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===bE&&"_payload"in e&&SE(e._payload)}function CE(e){const t=kE(e),r=d.forwardRef((s,a)=>{let{children:o,...i}=s;yj(o)&&typeof Ci=="function"&&(o=Ci(o._payload));const l=d.Children.toArray(o),c=l.find(TE);if(c){const u=c.props.children,h=l.map(m=>m===c?d.Children.count(u)>1?d.Children.only(null):d.isValidElement(u)?u.props.children:null:m);return n.jsx(t,{...i,ref:a,children:d.isValidElement(u)?d.cloneElement(u,void 0,h):null})}return n.jsx(t,{...i,ref:a,children:o})});return r.displayName=`${e}.Slot`,r}function kE(e){const t=d.forwardRef((r,s)=>{let{children:a,...o}=r;if(yj(a)&&typeof Ci=="function"&&(a=Ci(a._payload)),d.isValidElement(a)){const i=ME(a),l=EE(o,a.props);return a.type!==d.Fragment&&(l.ref=s?_s(s,i):i),d.cloneElement(a,l)}return d.Children.count(a)>1?d.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var DE=Symbol("radix.slottable");function TE(e){return d.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===DE}function EE(e,t){const r={...t};for(const s in t){const a=e[s],o=t[s];/^on[A-Z]/.test(s)?a&&o?r[s]=(...l)=>{const c=o(...l);return a(...l),c}:a&&(r[s]=a):s==="style"?r[s]={...a,...o}:s==="className"&&(r[s]=[a,o].filter(Boolean).join(" "))}return{...e,...r}}function ME(e){var s,a;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var RE=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],jj=RE.reduce((e,t)=>{const r=CE(`Primitive.${t}`),s=d.forwardRef((a,o)=>{const{asChild:i,...l}=a,c=i?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(c,{...l,ref:o})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{}),Vu="Progress",qu=100,[PE]=wE(Vu),[AE,OE]=PE(Vu),wj=d.forwardRef((e,t)=>{const{__scopeProgress:r,value:s=null,max:a,getValueLabel:o=IE,...i}=e;(a||a===0)&&!xh(a)&&console.error(FE(`${a}`,"Progress"));const l=xh(a)?a:qu;s!==null&&!gh(s,l)&&console.error(_E(`${s}`,"Progress"));const c=gh(s,l)?s:null,u=ki(c)?o(c,l):void 0;return n.jsx(AE,{scope:r,value:c,max:l,children:n.jsx(jj.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":ki(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":Sj(c,l),"data-value":c??void 0,"data-max":l,...i,ref:t})})});wj.displayName=Vu;var Nj="ProgressIndicator",bj=d.forwardRef((e,t)=>{const{__scopeProgress:r,...s}=e,a=OE(Nj,r);return n.jsx(jj.div,{"data-state":Sj(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...s,ref:t})});bj.displayName=Nj;function IE(e,t){return`${Math.round(e/t*100)}%`}function Sj(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function ki(e){return typeof e=="number"}function xh(e){return ki(e)&&!isNaN(e)&&e>0}function gh(e,t){return ki(e)&&!isNaN(e)&&e<=t&&e>=0}function FE(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${qu}\`.`}function _E(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${qu} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Cj=wj,LE=bj;const $e=d.forwardRef(({className:e,value:t,...r},s)=>n.jsx(Cj,{ref:s,className:X("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...r,children:n.jsx(LE,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));$e.displayName=Cj.displayName;const $E="https://script.google.com/macros/s/AKfycbxgS84Em_zCCa7xWbGaB0YcBEXbG24zZ2LO6D3H8fhJi0OxSYAqescXD99r2CK5bpSy/exec",kj=_e()(Le((e,t)=>({batchChecks:[],isLoading:!1,lastFetchTime:null,fetchError:null,setLoading:r=>{e({isLoading:r})},fetchFromGoogleSheets:async()=>{console.log(" fetchFromGoogleSheets called for batch checks"),e({isLoading:!0,fetchError:null});try{const r=await fetch($E,{method:"GET"});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const s=await r.json();if(s.success&&s.data)e({batchChecks:s.data,lastFetchTime:new Date().toISOString(),fetchError:null}),console.log(" Batch checks fetched:",s.data.length);else throw new Error(s.error||"Failed to fetch data")}catch(r){console.error("Error fetching from Google Sheets:",r),e({fetchError:r instanceof Error?r.message:"Unknown error"})}finally{e({isLoading:!1})}},addBatchCheck:r=>{e(s=>({batchChecks:[r,...s.batchChecks]}))},addLocalRecord:r=>{e(s=>({batchChecks:[r,...s.batchChecks]}))},getBatchChecks:()=>t().batchChecks,getTodayChecks:()=>{const r=new Date().toISOString().split("T")[0];return t().batchChecks.filter(s=>s.date===r)},deleteBatchCheck:r=>{e(s=>({batchChecks:s.batchChecks.filter(a=>a.id!==r)}))},clearAll:()=>{e({batchChecks:[]})}}),{name:"taquero-batch-checks"})),BE="https://script.google.com/macros/s/AKfycbxgS84Em_zCCa7xWbGaB0YcBEXbG24zZ2LO6D3H8fhJi0OxSYAqescXD99r2CK5bpSy/exec";function zE({open:e,onClose:t,onSuccess:r}){const{currentUser:s}=Ie(),{addLocalRecord:a}=kj(),[o,i]=d.useState(1),[l]=d.useState(new Date().toISOString().split("T")[0]),[c]=d.useState(new Date().toTimeString().slice(0,5)),[u,h]=d.useState(""),[m,g]=d.useState(""),[j,w]=d.useState(""),[v,p]=d.useState(""),[f,x]=d.useState(""),[y,N]=d.useState("minutes"),[b,T]=d.useState(!1),[D,E]=d.useState(!1),S=5,C=o/S*100,R=parseFloat(v),k=v.trim()!=="",M=()=>{i(1),h(""),g(""),w(""),p(""),x(""),N("minutes"),T(!1),E(!1)},$=()=>{b&&!window.confirm("You have unsaved data. Are you sure you want to close?")||(M(),t())},I=()=>{o===1&&T(!0),o<S&&i(o+1)},B=()=>{o>1&&i(o-1)},z=W=>{i(W)},A=async()=>{if(!s){alert("Error: No user logged in");return}E(!0);const W=`batch-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,O={unixTimestamp:Math.floor(new Date().getTime()/1e3),staffName:s.name,proteinCooked:u==="Other"?m:u,typeOfCheck:F(j),temperature:R,durationInTemperature:`${f} ${y}`,cookingProteinBatchID:W};try{await fetch(BE,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(O)});const H={id:W,date:l,time:c,foodType:u,customFood:u==="Other"?m:void 0,checkType:j,temperature:R,timeAtTemperature:`${f} ${y}`,completedBy:s.name,timestamp:new Date().toISOString()};a(H),console.log(" Batch check submitted successfully"),M(),t(),r==null||r()}catch(H){console.error(" Error submitting batch check:",H),alert("Error submitting batch check. Please try again."),E(!1)}},F=W=>{switch(W){case"initial":return"Individual";case"weekly":return"Weekly Batch";case"confirm":return"One item in each batch";default:return""}};return n.jsx(Pe,{open:e,onOpenChange:$,children:n.jsxs(De,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[D&&n.jsx("div",{className:"absolute inset-0 bg-background/80 backdrop-blur-sm z-50 flex items-center justify-center rounded-lg",children:n.jsxs("div",{className:"flex flex-col items-center gap-4",children:[n.jsx("div",{className:"h-12 w-12 animate-spin rounded-full border-4 border-primary border-t-transparent"}),n.jsx("div",{className:"text-lg font-semibold",children:"Saving to Google Sheets..."})]})}),n.jsx(Te,{children:n.jsx(Ee,{children:o===S?"Review Your Batch Check":"New Batch Check"})}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[n.jsxs("span",{children:["Step ",o," of ",S]}),n.jsxs("span",{children:[Math.round(C),"%"]})]}),n.jsx($e,{value:C,className:"h-2"})]}),n.jsxs("div",{className:"py-6",children:[o===1&&n.jsxs("div",{className:"space-y-4",children:[n.jsx(_,{className:"text-base",children:"What food are you checking?"}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[n.jsx(V,{className:`cursor-pointer transition-all duration-200 hover:shadow-md ${u==="Chicken"?"border-primary ring-2 ring-primary bg-primary/5":"hover:border-primary/50"}`,onClick:()=>h("Chicken"),children:n.jsxs(K,{className:"p-4 text-center space-y-2",children:[n.jsx("div",{className:"w-10 h-10 mx-auto rounded-full bg-primary/10 flex items-center justify-center",children:n.jsx(Dn,{className:"h-5 w-5 text-primary"})}),n.jsx("div",{className:"font-medium",children:"Chicken"})]})}),n.jsx(V,{className:`cursor-pointer transition-all duration-200 hover:shadow-md ${u==="Beef"?"border-primary ring-2 ring-primary bg-primary/5":"hover:border-primary/50"}`,onClick:()=>h("Beef"),children:n.jsxs(K,{className:"p-4 text-center space-y-2",children:[n.jsx("div",{className:"w-10 h-10 mx-auto rounded-full bg-primary/10 flex items-center justify-center",children:n.jsx(Dn,{className:"h-5 w-5 text-primary"})}),n.jsx("div",{className:"font-medium",children:"Beef"})]})}),n.jsx(V,{className:`cursor-pointer transition-all duration-200 hover:shadow-md ${u==="Pork"?"border-primary ring-2 ring-primary bg-primary/5":"hover:border-primary/50"}`,onClick:()=>h("Pork"),children:n.jsxs(K,{className:"p-4 text-center space-y-2",children:[n.jsx("div",{className:"w-10 h-10 mx-auto rounded-full bg-primary/10 flex items-center justify-center",children:n.jsx(Dn,{className:"h-5 w-5 text-primary"})}),n.jsx("div",{className:"font-medium",children:"Pork"})]})}),n.jsx(V,{className:`cursor-pointer transition-all duration-200 hover:shadow-md ${u==="Other"?"border-primary ring-2 ring-primary bg-primary/5":"hover:border-primary/50"}`,onClick:()=>h("Other"),children:n.jsxs(K,{className:"p-4 text-center space-y-2",children:[n.jsx("div",{className:"w-10 h-10 mx-auto rounded-full bg-primary/10 flex items-center justify-center",children:n.jsx(Hb,{className:"h-5 w-5 text-primary"})}),n.jsx("div",{className:"font-medium",children:"Other"})]})})]}),u==="Other"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{children:"Specify food type"}),n.jsx(Y,{value:m,onChange:W=>g(W.target.value),placeholder:"Enter food type...",className:"h-12"})]})]}),o===2&&n.jsxs("div",{className:"space-y-4",children:[n.jsx(_,{className:"text-base",children:"Which type of check?"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[n.jsx(V,{className:`cursor-pointer transition-all duration-200 hover:shadow-md ${j==="weekly"?"border-primary ring-2 ring-primary bg-primary/5":"hover:border-primary/50"}`,onClick:()=>w("weekly"),children:n.jsxs(K,{className:"p-4 text-center space-y-2",children:[n.jsx("div",{className:"w-10 h-10 mx-auto rounded-full bg-primary/10 flex items-center justify-center",children:n.jsx(Xb,{className:"h-5 w-5 text-primary"})}),n.jsx("div",{className:"font-medium",children:"Weekly Batch"})]})}),n.jsx(V,{className:`cursor-pointer transition-all duration-200 hover:shadow-md ${j==="initial"?"border-primary ring-2 ring-primary bg-primary/5":"hover:border-primary/50"}`,onClick:()=>w("initial"),children:n.jsxs(K,{className:"p-4 text-center space-y-2",children:[n.jsx("div",{className:"w-10 h-10 mx-auto rounded-full bg-primary/10 flex items-center justify-center",children:n.jsx(nS,{className:"h-5 w-5 text-primary"})}),n.jsx("div",{className:"font-medium",children:"Individual"})]})}),n.jsx(V,{className:`cursor-pointer transition-all duration-200 hover:shadow-md ${j==="confirm"?"border-primary ring-2 ring-primary bg-primary/5":"hover:border-primary/50"}`,onClick:()=>w("confirm"),children:n.jsxs(K,{className:"p-4 text-center space-y-2",children:[n.jsx("div",{className:"w-10 h-10 mx-auto rounded-full bg-primary/10 flex items-center justify-center",children:n.jsx(He,{className:"h-5 w-5 text-primary"})}),n.jsx("div",{className:"font-medium text-sm",children:"One item in each batch"})]})})]})]}),o===3&&n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{className:"text-base",children:"What temperature did the probe read?"}),n.jsxs("div",{className:"relative",children:[n.jsx(Y,{type:"text",inputMode:"decimal",value:v,onChange:W=>{const L=W.target.value;if(L===""||/^\d*\.?\d*$/.test(L)){const O=parseFloat(L);(L===""||O>=0&&O<=300)&&p(L)}},placeholder:"Enter temperature",className:"h-16 text-2xl pr-12"}),n.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-xl text-muted-foreground",children:"C"})]})]})}),o===4&&n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{className:"text-base",children:"How long did it stay at this temperature?"}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx(Y,{type:"text",inputMode:"numeric",value:f,onChange:W=>{const L=W.target.value;if(L===""||/^\d+$/.test(L)){const O=parseInt(L);(L===""||O>=0&&O<=999)&&x(L)}},placeholder:"Enter duration",className:"h-16 text-xl flex-1"}),n.jsxs("div",{className:"flex border rounded-md",children:[n.jsx(P,{type:"button",variant:y==="minutes"?"default":"ghost",onClick:()=>N("minutes"),className:"h-16 rounded-r-none",children:"Minutes"}),n.jsx(P,{type:"button",variant:y==="hours"?"default":"ghost",onClick:()=>N("hours"),className:"h-16 rounded-l-none",children:"Hours"})]})]})]})}),o===5&&n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsx("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-muted/30",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ki,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-muted-foreground",children:"Date"}),n.jsx("div",{className:"font-medium text-sm",children:new Date(l+"T00:00").toLocaleDateString("en-NZ",{month:"short",day:"numeric"})})]})]})}),n.jsx("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-muted/30",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Zt,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-muted-foreground",children:"Time"}),n.jsx("div",{className:"font-medium text-sm",children:c})]})]})})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Food"}),n.jsx("div",{className:"font-medium",children:u==="Other"?m:u})]}),n.jsx(P,{variant:"ghost",size:"sm",onClick:()=>z(1),className:"h-8 w-8 p-0",children:n.jsx(qt,{className:"h-3 w-3"})})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Check Type"}),n.jsx("div",{className:"font-medium",children:F(j)})]}),n.jsx(P,{variant:"ghost",size:"sm",onClick:()=>z(2),className:"h-8 w-8 p-0",children:n.jsx(qt,{className:"h-3 w-3"})})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Temperature"}),n.jsxs("div",{className:"font-medium",children:[v,"C"]})]}),n.jsx(P,{variant:"ghost",size:"sm",onClick:()=>z(3),className:"h-8 w-8 p-0",children:n.jsx(qt,{className:"h-3 w-3"})})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Time at Temp"}),n.jsxs("div",{className:"font-medium",children:[f," ",y]})]}),n.jsx(P,{variant:"ghost",size:"sm",onClick:()=>z(4),className:"h-8 w-8 p-0",children:n.jsx(qt,{className:"h-3 w-3"})})]}),n.jsx("div",{className:"flex items-center p-3 border rounded-lg bg-muted/30",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Zi,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-muted-foreground",children:"Completed by"}),n.jsx("div",{className:"font-medium text-sm",children:s==null?void 0:s.name})]})]})})]})]}),n.jsxs("div",{className:"flex gap-3 border-t pt-4",children:[o>1&&o<=S&&n.jsx(P,{variant:"outline",onClick:B,className:"h-12 min-h-[48px] flex-1",children:" Back"}),o<S&&n.jsx(P,{onClick:I,disabled:o===1&&!u||o===1&&u==="Other"&&!m.trim()||o===2&&!j||o===3&&!k||o===4&&!f.trim(),className:"h-12 min-h-[48px] flex-1",children:"Continue "}),o===S&&n.jsx(P,{onClick:A,disabled:D,className:"h-12 min-h-[48px] flex-1",children:D?"Saving...":"Save & Close"})]})]})})}function WE(){const{batchChecks:e,fetchFromGoogleSheets:t,isLoading:r}=kj(),[s,a]=d.useState(!1),[o,i]=d.useState([]);d.useEffect(()=>{t()},[t]);const l=(m,g="info")=>{const j=Date.now();i(w=>[...w,{id:j,message:m,type:g}])},c=m=>{i(g=>g.filter(j=>j.id!==m))},u=()=>{t(),l("Batch check saved to Google Sheets!","success")},h=m=>{switch(m){case"initial":return"Initial probe";case"weekly":return"Weekly batch check";case"confirm":return"Confirm method";case"doner":return"Doner kebabs";default:return m}};return n.jsxs("div",{className:"space-y-8 max-w-4xl mx-auto",children:[n.jsxs("div",{className:"space-y-2 text-center md:text-left",children:[n.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Cooking Proteins - Batch"}),n.jsx("p",{className:"text-muted-foreground text-lg",children:"Temperature batch checks for chicken, beef, and pork"})]}),n.jsxs(P,{size:"lg",onClick:()=>a(!0),className:"h-12 px-6 min-h-[48px] w-full sm:w-auto",children:[n.jsx(oe,{className:"h-5 w-5 mr-2"}),"Add Batch Check"]}),n.jsxs(V,{children:[n.jsx(ee,{children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:n.jsx(Jt,{className:"h-5 w-5 text-primary"})}),n.jsxs("div",{children:[n.jsx(te,{children:"Recent Batch Checks"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Last 10 temperature records"})]})]})}),n.jsx(K,{children:r?n.jsxs("div",{className:"flex flex-col items-center justify-center py-12 space-y-3",children:[n.jsx(ke,{className:"h-8 w-8 animate-spin text-muted-foreground"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Fetching Data"})]}):e.length===0?n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx("p",{className:"text-lg font-medium",children:"No batch checks recorded yet"}),n.jsx("p",{className:"text-sm mt-2",children:'Click "Add Batch Check" to create your first record'})]}):n.jsx("div",{className:"space-y-4",children:e.slice(0,10).map((m,g)=>n.jsxs("div",{className:"border rounded-lg p-4 space-y-3 transition-all duration-300 hover:shadow-md hover:border-primary/30 hover:scale-[1.01]",style:{animationDelay:`${g*100}ms`},children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("div",{className:"font-semibold",children:new Date(m.date+"T00:00").toLocaleDateString("en-NZ",{weekday:"short",month:"long",day:"numeric"})}),n.jsx("span",{className:"text-muted-foreground",children:""}),n.jsx("div",{className:"text-sm text-muted-foreground",children:m.time})]}),n.jsxs("div",{className:"text-sm text-muted-foreground",children:[m.completedBy,"  ",h(m.checkType)]})]}),n.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3 text-sm",children:[n.jsxs("div",{className:"p-2 bg-muted/50 rounded",children:[n.jsx("div",{className:"text-xs text-muted-foreground",children:"Food"}),n.jsx("div",{className:"font-medium",children:m.foodType==="Other"?m.customFood:m.foodType})]}),n.jsxs("div",{className:"p-2 bg-muted/50 rounded",children:[n.jsx("div",{className:"text-xs text-muted-foreground",children:"Temp"}),n.jsxs("div",{className:"font-mono font-semibold",children:[m.temperature,"C"]})]}),n.jsxs("div",{className:"p-2 bg-muted/50 rounded",children:[n.jsx("div",{className:"text-xs text-muted-foreground",children:"Duration"}),n.jsx("div",{className:"font-medium",children:m.timeAtTemperature})]})]})]},m.id))})})]}),n.jsx(zE,{open:s,onClose:()=>a(!1),onSuccess:u}),n.jsx(yn,{children:o.map(m=>n.jsx(vn,{message:m.message,type:m.type,onClose:()=>c(m.id)},m.id))})]})}const Dj="https://script.google.com/macros/s/AKfycbxCuLVrqdTBnjPZpbMVyWArCR78Iq6fi6a8vGTZTJSAFjcL65J934tcHp23Z0Oxr4dbhw/exec";async function Tj(e,t){try{const r={methodId:e.id,itemDescription:e.itemDescription,cookingMethod:e.cookingMethod,batchNumber:t.batchNumber,date:t.date,temperature:t.temperature,timeAtTemp:t.timeAtTemp,completedBy:t.completedBy,unixTimestamp:Math.floor(new Date(t.timestamp).getTime()/1e3),status:t.batchNumber===3?"proven":e.status,createdBy:e.createdBy,createdAt:e.createdAt};return await fetch(Dj,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),{success:!0}}catch(r){return console.error(" Error saving to Google Sheets:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}const Ku=_e()(Le((e,t)=>({methods:[],isLoading:!1,lastFetchTime:null,fetchError:null,fetchFromGoogleSheets:async()=>{console.log(" fetchFromGoogleSheets called for proving methods"),e({isLoading:!0,fetchError:null});try{const r=await fetch(Dj,{method:"GET"});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const s=await r.json();if(s.success&&s.data)e({methods:s.data,lastFetchTime:new Date().toISOString(),fetchError:null}),console.log(" Proving methods fetched:",s.data.length);else throw new Error(s.error||"Failed to fetch data")}catch(r){console.error("Error fetching from Google Sheets:",r),e({fetchError:r instanceof Error?r.message:"Unknown error"})}finally{e({isLoading:!1})}},createMethod:r=>{e(s=>({methods:[r,...s.methods]}))},addBatchToMethod:(r,s)=>{e(a=>({methods:a.methods.map(o=>{if(o.id===r){const i=[...o.batches,s],l=i.length===3;return{...o,batches:i,status:l?"proven":"in-progress",provenAt:l?new Date().toISOString():o.provenAt}}return o})}))},deleteMethod:r=>{e(s=>({methods:s.methods.filter(a=>a.id!==r)}))},resetMethod:r=>{e(s=>({methods:s.methods.map(a=>a.id===r?{...a,batches:[],status:"in-progress",provenAt:void 0}:a)}))},getMethods:()=>t().methods,getInProgressMethods:()=>t().methods.filter(r=>r.status==="in-progress"),getProvenMethods:()=>t().methods.filter(r=>r.status==="proven"),getMethodById:r=>t().methods.find(s=>s.id===r)}),{name:"taquero-proving-methods"})),ce=d.forwardRef(({className:e,...t},r)=>n.jsx("textarea",{className:X("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));ce.displayName="Textarea";function UE({open:e,onClose:t,onSuccess:r}){const{currentUser:s}=Ie(),{createMethod:a}=Ku(),[o,i]=d.useState(1),[l,c]=d.useState(""),[u,h]=d.useState(""),[m,g]=d.useState(""),[j,w]=d.useState(""),[v]=d.useState(new Date().toISOString().split("T")[0]),[p]=d.useState(new Date().toTimeString().slice(0,5)),[f,x]=d.useState(!1),[y,N]=d.useState(!1),b=5,T=o/b*100,D=parseFloat(m),E=m.trim()!=="",S=()=>{i(1),c(""),h(""),g(""),w(""),x(!1)},C=()=>{f&&!window.confirm("You have unsaved data. Are you sure you want to close?")||(S(),t())},R=()=>{o===1&&x(!0),o<b&&i(o+1)},k=()=>{o>1&&i(o-1)},M=I=>{i(I)},$=async()=>{if(!s){alert("Error: No user logged in");return}N(!0);const I=`method-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,B={batchNumber:1,date:v,temperature:D,timeAtTemp:`${j} ${j==="1"?"minute":"minutes"}`,completedBy:s.name,timestamp:new Date().toISOString()},z={id:I,itemDescription:l,cookingMethod:u,status:"in-progress",batches:[B],createdAt:new Date().toISOString(),createdBy:s.name};try{const A=await Tj(z,B);A.success||console.warn(" Failed to save to Google Sheets:",A.error),a(z),S(),t(),r==null||r()}catch(A){console.error(" Error creating method:",A),alert("Error creating method. Please try again.")}finally{N(!1)}};return n.jsx(Pe,{open:e,onOpenChange:C,children:n.jsxs(De,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[y&&n.jsx("div",{className:"absolute inset-0 bg-background/80 backdrop-blur-sm z-50 flex items-center justify-center rounded-lg",children:n.jsxs("div",{className:"flex flex-col items-center gap-4",children:[n.jsx("div",{className:"h-12 w-12 animate-spin rounded-full border-4 border-primary border-t-transparent"}),n.jsx("div",{className:"text-lg font-semibold",children:"Saving to Google Sheets..."})]})}),n.jsx(Te,{children:n.jsx(Ee,{children:o===b?"Review & Create Method":"Create New Method"})}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[n.jsxs("span",{children:["Step ",o," of ",b]}),n.jsxs("span",{children:[Math.round(T),"%"]})]}),n.jsx($e,{value:T,className:"h-2"})]}),n.jsxs("div",{className:"py-6",children:[o===1&&n.jsxs("div",{className:"space-y-4",children:[n.jsx(_,{className:"text-base",children:"What are you cooking?"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Describe the item, including type, size, and weight"}),n.jsx(Y,{value:l,onChange:I=>c(I.target.value),placeholder:"e.g., 2kg chicken roast x4",className:"h-16 text-xl"})]}),o===2&&n.jsxs("div",{className:"space-y-4",children:[n.jsx(_,{className:"text-base",children:"Describe your cooking method"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Include oven temperature, cooking time, and target internal temperature"}),n.jsx(ce,{value:u,onChange:I=>h(I.target.value),placeholder:"e.g., Put in pre-heated oven at 220C for 2 hours intended that the thickest part of the meat reaches 75C for 30 seconds",className:"min-h-[120px] text-lg"})]}),o===3&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"p-3 bg-muted rounded-lg border",children:[n.jsx("p",{className:"text-sm font-medium",children:"Recording Batch 1 of 3"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"You'll need to record 2 more batches to prove this method works"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{className:"text-base",children:"Internal temperature at thickest part"}),n.jsxs("div",{className:"relative",children:[n.jsx(Y,{type:"text",inputMode:"decimal",value:m,onChange:I=>{const B=I.target.value;if(B===""||/^\d*\.?\d*$/.test(B)){const z=parseFloat(B);(B===""||z>=0&&z<=300)&&g(B)}},placeholder:"Enter temperature",className:"h-16 text-2xl pr-12"}),n.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-xl text-muted-foreground",children:"C"})]})]})]}),o===4&&n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{className:"text-base",children:"Time at this temperature (minutes)"}),n.jsxs("div",{className:"relative",children:[n.jsx(Y,{type:"text",inputMode:"numeric",value:j,onChange:I=>{const B=I.target.value;if(B===""||/^\d+$/.test(B)){const z=parseInt(B);(B===""||z>=0&&z<=999)&&w(B)}},placeholder:"Enter time in minutes",className:"h-16 text-xl pr-24"}),n.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-lg text-muted-foreground",children:"minutes"})]})]})}),o===5&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"font-semibold text-lg",children:"Review Your Method"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Item"}),n.jsx("div",{className:"font-medium",children:l})]}),n.jsx(P,{variant:"ghost",size:"sm",onClick:()=>M(1),className:"h-8 w-8 p-0",children:n.jsx(qt,{className:"h-3 w-3"})})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Cooking Method"}),n.jsx("div",{className:"font-medium text-sm line-clamp-2",children:u})]}),n.jsx(P,{variant:"ghost",size:"sm",onClick:()=>M(2),className:"h-8 w-8 p-0",children:n.jsx(qt,{className:"h-3 w-3"})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsx("div",{className:"flex items-center p-3 border rounded-lg bg-muted/30",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ki,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-muted-foreground",children:"Batch 1 Date"}),n.jsx("div",{className:"font-medium text-sm",children:new Date(v+"T00:00").toLocaleDateString("en-NZ",{month:"long",day:"numeric"})})]})]})}),n.jsx("div",{className:"flex items-center p-3 border rounded-lg bg-muted/30",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Zt,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-muted-foreground",children:"Time"}),n.jsx("div",{className:"font-medium text-sm",children:p})]})]})})]}),n.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg border space-y-2",children:[n.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[n.jsx(He,{className:"h-4 w-4"}),"Batch 1 Results"]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Temperature:"})," ",n.jsxs("span",{className:"font-mono font-semibold",children:[m,"C"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Time:"})," ",n.jsxs("span",{className:"font-medium",children:[j," ",j==="1"?"minute":"minutes"]})]})]}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:["By ",s==null?void 0:s.name]})]}),n.jsx("div",{className:"p-3 bg-muted/30 border rounded-lg",children:n.jsxs("p",{className:"text-sm",children:["You'll need to record ",n.jsx("strong",{children:"2 more batches"})," to prove this method works"]})})]})]})]}),n.jsxs("div",{className:"flex gap-3 border-t pt-4",children:[o>1&&o<=b&&n.jsx(P,{variant:"outline",onClick:k,className:"h-12 min-h-[48px] flex-1",children:" Back"}),o<b&&n.jsx(P,{onClick:R,disabled:o===1&&!l.trim()||o===2&&!u.trim()||o===3&&!E,className:"h-12 min-h-[48px] flex-1",children:"Continue "}),o===b&&n.jsx(P,{onClick:$,disabled:y||!j.trim(),className:"h-12 min-h-[48px] flex-1",children:y?"Creating...":"Create Method & Record Batch 1"})]})]})})}function YE({selected:e,onSelect:t,className:r}){const[s,a]=d.useState(e||new Date),o=new Date(s.getFullYear(),s.getMonth()+1,0).getDate(),i=new Date(s.getFullYear(),s.getMonth(),1).getDay(),l=["January","February","March","April","May","June","July","August","September","October","November","December"],c=[];for(let w=0;w<i;w++)c.push(null);for(let w=1;w<=o;w++)c.push(w);const u=()=>{a(new Date(s.getFullYear(),s.getMonth()-1))},h=()=>{a(new Date(s.getFullYear(),s.getMonth()+1))},m=w=>{const v=new Date(s.getFullYear(),s.getMonth(),w);t==null||t(v)},g=w=>e?e.getDate()===w&&e.getMonth()===s.getMonth()&&e.getFullYear()===s.getFullYear():!1,j=w=>{const v=new Date;return v.getDate()===w&&v.getMonth()===s.getMonth()&&v.getFullYear()===s.getFullYear()};return n.jsxs("div",{className:X("p-3",r),children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx(P,{variant:"outline",size:"icon",onClick:u,className:"h-8 w-8",children:n.jsx(Qi,{className:"h-4 w-4"})}),n.jsxs("div",{className:"font-semibold text-sm",children:[l[s.getMonth()]," ",s.getFullYear()]}),n.jsx(P,{variant:"outline",size:"icon",onClick:h,className:"h-8 w-8",children:n.jsx(Fs,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[["Su","Mo","Tu","We","Th","Fr","Sa"].map(w=>n.jsx("div",{className:"text-center text-xs text-muted-foreground font-medium py-2",children:w},w)),c.map((w,v)=>w?n.jsx(P,{variant:g(w)?"default":"ghost",className:X("h-9 w-9 p-0 font-normal",j(w)&&!g(w)&&"border border-primary",g(w)&&"bg-primary text-primary-foreground"),onClick:()=>m(w),children:w},v):n.jsx("div",{},v))]})]})}function GE({children:e,open:t,onOpenChange:r}){const[s,a]=d.useState(t??!1),o=d.useRef(null);d.useEffect(()=>{t!==void 0&&a(t)},[t]),d.useEffect(()=>{const l=c=>{o.current&&!o.current.contains(c.target)&&s&&(a(!1),r==null||r(!1))};return s&&(document.addEventListener("mousedown",l),document.addEventListener("touchstart",l)),()=>{document.removeEventListener("mousedown",l),document.removeEventListener("touchstart",l)}},[s,r]);const i=()=>{const l=!s;a(l),r==null||r(l)};return n.jsx(Qu.Provider,{value:{isOpen:s,setIsOpen:i},children:n.jsx("div",{className:"relative",ref:o,children:e})})}const Qu=d.createContext({isOpen:!1,setIsOpen:()=>{}});function HE({children:e,asChild:t}){const{setIsOpen:r}=d.useContext(Qu);return t&&d.isValidElement(e)?d.cloneElement(e,{onClick:r}):n.jsx("div",{onClick:r,children:e})}function VE({children:e,className:t,align:r="center"}){const{isOpen:s}=d.useContext(Qu);if(!s)return null;const a={start:"left-0",center:"left-1/2 -translate-x-1/2",end:"right-0"};return n.jsx("div",{className:X("absolute z-50 mt-2 rounded-md border border-border bg-popover text-popover-foreground shadow-md outline-none animate-in fade-in-0 zoom-in-95",a[r],t),children:e})}function Fe({value:e,onChange:t,placeholder:r="DD/MM/YYYY",className:s,disabled:a=!1}){const[o,i]=d.useState(!1),[l,c]=d.useState(e);d.useEffect(()=>{c(e)},[e]);const u=v=>{if(!v||v.length<10)return;const p=v.split("/");if(p.length!==3)return;const f=parseInt(p[0],10),x=parseInt(p[1],10),y=parseInt(p[2],10);if(isNaN(f)||isNaN(x)||isNaN(y)||f<1||f>31||x<1||x>12||y<1900)return;const N=new Date(y,x-1,f);if(!(N.getDate()!==f||N.getMonth()!==x-1||N.getFullYear()!==y))return N},h=v=>{const p=v.getDate().toString().padStart(2,"0"),f=(v.getMonth()+1).toString().padStart(2,"0"),x=v.getFullYear();return`${p}/${f}/${x}`},m=u(l),g=v=>{if(v){const p=h(v);c(p),t(p),i(!1)}},j=v=>{let p=v.target.value;p=p.replace(/[^\d/]/g,""),(p.length===2&&l.length===1||p.length===5&&l.length===4)&&(p=p+"/"),p.length>10&&(p=p.substring(0,10)),c(p),p.length===10&&u(p)&&t(p)},w=()=>{if(l.length===10){const v=u(l);if(v){const p=h(v);c(p),t(p)}}};return n.jsx("div",{className:X("relative flex gap-2",s),children:n.jsxs(GE,{open:o,onOpenChange:i,children:[n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(Y,{type:"text",value:l,onChange:j,onBlur:w,placeholder:r,disabled:a,className:"pr-12 h-16 text-xl",pattern:"\\d{2}/\\d{2}/\\d{4}"}),n.jsx(HE,{asChild:!0,children:n.jsx(P,{type:"button",variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 -translate-y-1/2 h-14 w-14",disabled:a,children:n.jsx(Ki,{className:"h-6 w-6"})})})]}),n.jsx(VE,{className:"w-auto p-0",align:"start",children:n.jsx(YE,{selected:m,onSelect:g})})]})})}const vh=e=>{const[t,r,s]=e.split("-");return`${s}/${r}/${t}`},qE=e=>{const[t,r,s]=e.split("/");return`${s}-${r}-${t}`};function KE({open:e,onClose:t,onSuccess:r,method:s}){const{addBatchToMethod:a}=Ku(),{currentUser:o}=Ie(),[i,l]=d.useState(1),[c,u]=d.useState(vh(new Date().toISOString().split("T")[0])),[h,m]=d.useState(""),[g,j]=d.useState(""),[w,v]=d.useState(!1),p=4,f=s.batches.length+1,x=()=>{l(1),u(vh(new Date().toISOString().split("T")[0])),m(""),j(""),t()},y=()=>{i<p&&l(i+1)},N=()=>{i>1&&l(i-1)},b=async()=>{if(!o){alert("Error: No user logged in");return}v(!0);try{const D={batchNumber:f,date:qE(c),temperature:parseFloat(h),timeAtTemp:`${g} ${g==="1"?"minute":"minutes"}`,completedBy:o.name,timestamp:new Date().toISOString()},E=await Tj(s,D);E.success||console.warn(" Failed to save to Google Sheets:",E.error),a(s.id,D);const S=f===3;x(),r(S)}catch(D){console.error(" Error saving batch:",D),alert("Error saving batch. Please try again.")}finally{v(!1)}},T=()=>{switch(i){case 1:return c!=="";case 2:return h!==""&&parseFloat(h)>0;case 3:return g!==""&&parseFloat(g)>0;case 4:return!0;default:return!1}};return n.jsx(Pe,{open:e,onOpenChange:x,children:n.jsxs(De,{className:"sm:max-w-2xl max-h-[90vh] overflow-y-auto",children:[w&&n.jsx("div",{className:"absolute inset-0 bg-background/80 backdrop-blur-sm z-50 flex items-center justify-center rounded-lg",children:n.jsxs("div",{className:"flex flex-col items-center gap-4",children:[n.jsx("div",{className:"h-12 w-12 animate-spin rounded-full border-4 border-primary border-t-transparent"}),n.jsx("div",{className:"text-lg font-semibold",children:"Saving to Google Sheets..."})]})}),n.jsx(Te,{children:n.jsxs(Ee,{className:"text-2xl",children:["Add Batch ",f,"/3"]})}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[n.jsxs("span",{children:["Step ",i," of ",p]}),n.jsxs("span",{children:[Math.round(i/p*100),"%"]})]}),n.jsx($e,{value:i/p*100,className:"h-2"})]}),n.jsxs("div",{className:"bg-muted rounded-lg border p-4",children:[n.jsx("p",{className:"text-sm font-medium mb-1",children:"Recording batch for:"}),n.jsx("p",{className:"text-base font-semibold",children:s.itemDescription})]}),i===1&&n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"date",className:"text-base",children:"What date was this batch cooked?"}),n.jsx(Fe,{value:c,onChange:u,placeholder:"DD/MM/YYYY"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Select the date when this batch was prepared"})]})}),i===2&&n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"temperature",className:"text-base",children:"Temperature at thickest part (C)"}),n.jsxs("div",{className:"relative",children:[n.jsx(Y,{id:"temperature",type:"text",inputMode:"decimal",value:h,onChange:D=>{const E=D.target.value;(E===""||/^\d*\.?\d*$/.test(E))&&m(E)},placeholder:"e.g., 75",className:"h-16 text-xl pr-12"}),n.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-xl text-muted-foreground",children:"C"})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Measure at the thickest part of the food"})]})}),i===3&&n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{className:"text-base",children:"Time at this temperature (minutes)"}),n.jsxs("div",{className:"relative",children:[n.jsx(Y,{type:"text",inputMode:"numeric",value:g,onChange:D=>{const E=D.target.value;(E===""||/^\d*\.?\d*$/.test(E))&&j(E)},placeholder:"Enter time in minutes",className:"h-16 text-xl pr-24"}),n.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-lg text-muted-foreground",children:"minutes"})]})]})}),i===4&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"font-semibold text-lg",children:["Review Batch ",f]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"bg-muted/50 rounded-lg border p-3",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Date"}),n.jsx("p",{className:"font-medium",children:new Date(c).toLocaleDateString("en-NZ",{day:"numeric",month:"long",year:"numeric"})})]}),n.jsxs("div",{className:"bg-muted/50 rounded-lg border p-3",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Temperature at thickest part"}),n.jsxs("p",{className:"font-medium",children:[h,"C"]})]}),n.jsxs("div",{className:"bg-muted/50 rounded-lg border p-3",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Time at temperature"}),n.jsxs("p",{className:"font-medium",children:[g," ",g==="1"?"minute":"minutes"]})]})]}),n.jsxs("div",{className:"bg-muted/50 rounded-lg border p-3",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Completed by"}),n.jsx("p",{className:"font-medium",children:o==null?void 0:o.name})]}),f===3&&n.jsx("div",{className:"bg-muted/30 border rounded-lg p-4",children:n.jsxs("p",{className:"text-sm font-medium",children:["This is the final batch! Once recorded, this method will be marked as ",n.jsx("span",{className:"text-green-600 font-semibold",children:"Proven"}),"."]})})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[i>1&&n.jsxs(P,{variant:"outline",onClick:N,className:"flex-1",size:"lg",children:[n.jsx(Qi,{className:"h-4 w-4 mr-1"}),"Back"]}),i<p?n.jsxs(P,{onClick:y,disabled:!T(),className:"flex-1",size:"lg",children:["Next",n.jsx(Fs,{className:"h-4 w-4 ml-1"})]}):n.jsx(P,{onClick:b,disabled:!T()||w,className:"flex-1",size:"lg",children:w?"Saving...":f===3?"Complete & Prove Method":"Record Batch"})]})]})]})})}function QE(){const{methods:e,isLoading:t,fetchFromGoogleSheets:r}=Ku(),[s,a]=d.useState([]),[o,i]=d.useState(!1),[l,c]=d.useState(!1),[u,h]=d.useState(null);d.useEffect(()=>{r()},[r]);const m=(f,x="info")=>{const y=Date.now();a(N=>[...N,{id:y,message:f,type:x}])},g=f=>{a(x=>x.filter(y=>y.id!==f))},j=()=>{m("Method created with Batch 1! Record 2 more batches to prove it works.","success")},w=f=>{h(f),c(!0)},v=f=>{m(f?" Method proven! You have completed 3 successful batches.":`Batch recorded! ${u?3-u.batches.length-1:0} more batch${u&&3-u.batches.length-1===1?"":"es"} to go.`,"success"),h(null)},p=e.slice(0,99);return n.jsxs("div",{className:"space-y-8 max-w-4xl mx-auto",children:[n.jsxs("div",{className:"space-y-2 text-center md:text-left",children:[n.jsxs("h2",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[n.jsx(Jt,{className:"h-8 w-8"}),"Proving the Cooking Method"]}),n.jsx("p",{className:"text-muted-foreground text-lg",children:"Validate cooking methods with 3 consecutive successful batches"})]}),n.jsxs(P,{size:"lg",onClick:()=>i(!0),className:"h-12 px-6 min-h-[48px] w-full sm:w-auto",children:[n.jsx(oe,{className:"h-5 w-5 mr-2"}),"Create New Method"]}),n.jsxs(V,{children:[n.jsx(ee,{children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:n.jsx(Jt,{className:"h-5 w-5 text-primary"})}),n.jsxs("div",{children:[n.jsx(te,{children:"Your Methods"}),e.length>=100&&n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Last 99 methods (in-progress and proven)"})]})]})}),n.jsx(K,{children:t?n.jsxs("div",{className:"flex flex-col items-center justify-center py-12 space-y-3",children:[n.jsx(ke,{className:"h-8 w-8 animate-spin text-muted-foreground"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Fetching Data"})]}):p.length===0?n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx("p",{className:"text-lg font-medium",children:"No methods created yet"}),n.jsx("p",{className:"text-sm mt-2",children:'Click "Create New Method" to validate your first cooking method'})]}):n.jsx("div",{className:"space-y-4",children:p.map((f,x)=>n.jsxs("div",{className:"border rounded-lg p-4 space-y-4 transition-all duration-300 hover:shadow-md hover:border-primary/30 hover:scale-[1.01]",style:{animationDelay:`${x*100}ms`},children:[n.jsx("div",{className:"flex items-start justify-between gap-3",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("h3",{className:"font-semibold text-lg",children:f.itemDescription}),f.status==="proven"?n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-green-100 text-green-800 text-xs font-medium",children:[n.jsx(Es,{className:"h-3 w-3"}),"Method Proven"]}):n.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full bg-background border text-foreground text-xs font-medium",children:[f.batches.length,"/3 Batches"]})]}),n.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:f.cookingMethod})]})}),n.jsxs("div",{className:"space-y-2",children:[n.jsx($e,{value:f.batches.length/3*100,className:"h-2"}),n.jsx("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:n.jsx("span",{children:f.batches.length===3?`Proven on ${new Date(f.provenAt).toLocaleDateString("en-NZ",{day:"numeric",month:"long",year:"numeric"})}`:`${f.batches.length}/3 batches complete`})})]}),n.jsx("div",{className:"space-y-2",children:[1,2,3].map(y=>{const N=f.batches.find(b=>b.batchNumber===y);return N?n.jsxs("div",{className:"flex items-center gap-3 text-sm p-2 bg-muted/30 rounded",children:[n.jsx(Es,{className:"h-4 w-4 text-green-600 flex-shrink-0"}),n.jsxs("div",{className:"flex-1 flex items-center gap-2 flex-wrap",children:[n.jsxs("span",{className:"font-medium",children:[y,y===1?"st":y===2?"nd":"rd",":"]}),n.jsx("span",{children:new Date(N.date).toLocaleDateString("en-NZ",{day:"numeric",month:"short"})}),n.jsx("span",{className:"text-muted-foreground",children:""}),n.jsxs("span",{className:"font-mono",children:[N.temperature,"C"]}),n.jsx("span",{className:"text-muted-foreground",children:""}),n.jsx("span",{children:N.timeAtTemp}),n.jsx("span",{className:"text-muted-foreground",children:""}),n.jsx("span",{children:N.completedBy})]})]},y):n.jsxs("div",{className:"flex items-center gap-3 text-sm p-2 text-muted-foreground",children:[n.jsx("div",{className:"h-4 w-4 rounded-full border-2 border-muted-foreground/30 flex-shrink-0"}),n.jsxs("span",{children:[y,y===1?"st":y===2?"nd":"rd",": Not recorded yet"]})]},y)})}),f.status==="in-progress"&&n.jsxs(P,{onClick:()=>w(f),className:"w-full",size:"lg",children:[n.jsx(oe,{className:"h-4 w-4 mr-2"}),"Add Next Batch (",f.batches.length+1,"/3)"]})]},f.id))})})]}),n.jsx(UE,{open:o,onClose:()=>i(!1),onSuccess:j}),u&&n.jsx(KE,{open:l,onClose:()=>{c(!1),h(null)},onSuccess:v,method:u}),n.jsx(yn,{children:s.map(f=>n.jsx(vn,{message:f.message,type:f.type,onClose:()=>g(f.id)},f.id))})]})}const Ej="https://script.google.com/macros/s/AKfycbyOtf6NcCqd8YUnfhkOgMSb1oLvp0DdQc0m-cMS0Du7auPw6G4e4P77SEhLoxEmtPAN/exec";async function Mj(e,t){try{const r={methodId:e.id,foodItem:e.foodItem,coolingMethod:e.coolingMethod,batchNumber:t.batchNumber,date:t.date,startTime:t.startTime,startTemp:t.startTemp,secondTimeCheck:t.secondTimeCheck,secondTempCheck:t.secondTempCheck,thirdTimeCheck:t.thirdTimeCheck,thirdTempCheck:t.thirdTempCheck,completedBy:t.completedBy,unixTimestamp:Math.floor(new Date(t.timestamp).getTime()/1e3),status:t.batchNumber===3?"proven":e.status,createdBy:e.createdBy,createdAt:e.createdAt};return await fetch(Ej,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),{success:!0}}catch(r){return console.error(" Error saving to Google Sheets:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}const Zu=_e()(Le((e,t)=>({methods:[],isLoading:!1,lastFetchTime:null,fetchError:null,fetchFromGoogleSheets:async()=>{console.log(" fetchFromGoogleSheets called for cooling methods"),e({isLoading:!0,fetchError:null});try{const r=await fetch(Ej,{method:"GET"});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const s=await r.json();if(s.success&&s.data)e({methods:s.data,lastFetchTime:new Date().toISOString(),fetchError:null}),console.log(" Cooling methods fetched:",s.data.length);else throw new Error(s.error||"Failed to fetch data")}catch(r){console.error("Error fetching from Google Sheets:",r),e({fetchError:r instanceof Error?r.message:"Unknown error"})}finally{e({isLoading:!1})}},createMethod:r=>{e(s=>({methods:[r,...s.methods]}))},addBatchToMethod:(r,s)=>{e(a=>({methods:a.methods.map(o=>{if(o.id===r){const i=[...o.batches,s],l=i.length===3;return{...o,batches:i,status:l?"proven":"in-progress",provenAt:l?new Date().toISOString():o.provenAt}}return o})}))},deleteMethod:r=>{e(s=>({methods:s.methods.filter(a=>a.id!==r)}))},resetMethod:r=>{e(s=>({methods:s.methods.map(a=>a.id===r?{...a,batches:[],status:"in-progress",provenAt:void 0}:a)}))},getMethods:()=>t().methods,getInProgressMethods:()=>t().methods.filter(r=>r.status==="in-progress"),getProvenMethods:()=>t().methods.filter(r=>r.status==="proven"),getMethodById:r=>t().methods.find(s=>s.id===r)}),{name:"taquero-proving-cooling"})),ZE=e=>{const[t,r,s]=e.split("-");return`${s}/${r}/${t}`},XE=e=>{const[t,r,s]=e.split("/");return`${s}-${r}-${t}`};function JE({open:e,onClose:t,onSuccess:r}){const{currentUser:s}=Ie(),{createMethod:a}=Zu(),[o,i]=d.useState(1),[l,c]=d.useState(""),[u,h]=d.useState(""),[m,g]=d.useState(new Date().toTimeString().slice(0,5)),[j,w]=d.useState("60"),[v,p]=d.useState(""),[f,x]=d.useState(""),[y,N]=d.useState(""),[b,T]=d.useState(""),[D,E]=d.useState(ZE(new Date().toISOString().split("T")[0])),[S,C]=d.useState(!1),[R,k]=d.useState(!1),[M,$]=d.useState(""),I=7,B=o/I*100,z=()=>{i(1),c(""),h(""),g(new Date().toTimeString().slice(0,5)),w("60"),p(""),x(""),N(""),T(""),C(!1)},A=()=>{S&&!window.confirm("You have unsaved data. Are you sure you want to close?")||(z(),t())},F=()=>{o===1&&C(!0),o<I&&i(o+1)},W=()=>{o>1&&i(o-1)},L=async()=>{if(!s){alert("Error: No user logged in");return}k(!0),$("Creating cooling method...");const O=`cooling-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,H={batchNumber:1,date:XE(D),startTime:m,startTemp:parseFloat(j),secondTimeCheck:v,secondTempCheck:parseFloat(f),thirdTimeCheck:y,thirdTempCheck:parseFloat(b),completedBy:s.name,timestamp:new Date().toISOString()},J={id:O,foodItem:l,coolingMethod:u,status:"in-progress",batches:[H],createdAt:new Date().toISOString(),createdBy:s.name};a(J);try{$("Saving to Google Sheets...");const me=await Mj(J,H);me.success?console.log(" Saved to Google Sheets"):console.warn(" Failed to save to Google Sheets:",me.error)}catch(me){console.error(" Error saving to Google Sheets:",me)}k(!1),z(),r==null||r(),t()};return n.jsx(Pe,{open:e,onOpenChange:A,children:n.jsxs(De,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[R&&n.jsx("div",{className:"absolute inset-0 bg-background/80 backdrop-blur-sm flex items-center justify-center z-50",children:n.jsxs("div",{className:"text-center space-y-3",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-primary border-t-transparent mx-auto"}),n.jsx("p",{className:"text-lg font-medium",children:M})]})}),n.jsx(Te,{children:n.jsxs(Ee,{className:"flex items-center gap-2",children:[n.jsx(fn,{className:"h-5 w-5 text-primary"}),"New Cooling method - Batch 1"]})}),n.jsxs("div",{className:"space-y-6 py-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsxs("span",{className:"text-muted-foreground",children:["Step ",o," of ",I]}),n.jsxs("span",{className:"text-muted-foreground",children:[Math.round(B),"%"]})]}),n.jsx($e,{value:B,className:"h-2"})]}),o===1&&n.jsxs("div",{className:"space-y-4",children:[n.jsx(_,{className:"text-base",children:"What food are you cooling?"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Describe the food item (type, size, weight, etc.)"}),n.jsx(ce,{value:l,onChange:O=>c(O.target.value),placeholder:"e.g., 1 litre of butter chicken curry",className:"min-h-[120px] text-lg",autoFocus:!0})]}),o===2&&n.jsxs("div",{className:"space-y-4",children:[n.jsx(_,{className:"text-base",children:"Describe your cooling method"}),n.jsx(ce,{value:u,onChange:O=>h(O.target.value),placeholder:"e.g., Curry was divided into five (5) 250mL containers and placed on cooling racks, then placed in the fridge at the second temperature check",className:"min-h-[140px] text-lg",autoFocus:!0})]}),o===3&&n.jsxs("div",{className:"space-y-4",children:[n.jsx(_,{className:"text-base",children:"Date of Batch 1"}),n.jsx(Fe,{value:D,onChange:E,placeholder:"DD/MM/YYYY"})]}),o===4&&n.jsxs("div",{className:"space-y-4",children:[n.jsx(_,{className:"text-base",children:"Start time (when food reaches 60C)"}),n.jsxs("div",{className:"relative",children:[n.jsx(Zt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground pointer-events-none"}),n.jsx(Y,{type:"time",value:m,onChange:O=>g(O.target.value),className:"h-16 text-xl pl-12",autoFocus:!0})]}),n.jsx(_,{className:"text-base mt-6",children:"Start temperature"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Temperature when food reaches 60C"}),n.jsxs("div",{className:"relative",children:[n.jsx(He,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground pointer-events-none"}),n.jsx(Y,{type:"number",step:"0.1",value:j,onChange:O=>w(O.target.value),placeholder:"60.0",className:"h-16 text-xl pl-12 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"})]})]}),o===5&&n.jsxs("div",{className:"space-y-4",children:[n.jsx(_,{className:"text-base",children:"2nd temperature check"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Food needs to get from 60C to 21C (or room temp, whichever is lower) in 2 hours or less"}),n.jsx(_,{className:"text-base mt-4",children:"2nd check time"}),n.jsxs("div",{className:"relative",children:[n.jsx(Zt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground pointer-events-none"}),n.jsx(Y,{type:"time",value:v,onChange:O=>p(O.target.value),className:"h-16 text-xl pl-12",autoFocus:!0})]}),n.jsx(_,{className:"text-base mt-4",children:"2nd check temperature"}),n.jsxs("div",{className:"relative",children:[n.jsx(He,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground pointer-events-none"}),n.jsx(Y,{type:"number",step:"0.1",value:f,onChange:O=>x(O.target.value),placeholder:"21.0 or below",className:"h-16 text-xl pl-12 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"})]})]}),o===6&&n.jsxs("div",{className:"space-y-4",children:[n.jsx(_,{className:"text-base",children:"3rd temperature check"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Food needs to get from 21C to 5C (or lower) in a further 4 hours or less"}),n.jsx(_,{className:"text-base mt-4",children:"3rd check time"}),n.jsxs("div",{className:"relative",children:[n.jsx(Zt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground pointer-events-none"}),n.jsx(Y,{type:"time",value:y,onChange:O=>N(O.target.value),className:"h-16 text-xl pl-12",autoFocus:!0})]}),n.jsx(_,{className:"text-base mt-4",children:"3rd check temperature"}),n.jsxs("div",{className:"relative",children:[n.jsx(He,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground pointer-events-none"}),n.jsx(Y,{type:"number",step:"0.1",value:b,onChange:O=>T(O.target.value),placeholder:"5.0 or below",className:"h-16 text-xl pl-12 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"})]})]}),o===7&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"font-semibold text-lg",children:"Review Batch 1"}),n.jsxs("div",{className:"space-y-3 p-4 bg-muted/30 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Food Item"}),n.jsx("p",{className:"font-medium",children:l})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Cooling Method"}),n.jsx("p",{className:"font-medium",children:u})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Date"}),n.jsx("p",{className:"font-medium",children:new Date(D).toLocaleDateString("en-NZ",{day:"numeric",month:"long",year:"numeric"})})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Start (60C)"}),n.jsxs("p",{className:"font-medium",children:[m," - ",j,"C"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"2nd Check (60C  21C)"}),n.jsxs("p",{className:"font-medium",children:[v," - ",f,"C"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"3rd Check (21C  5C)"}),n.jsxs("p",{className:"font-medium",children:[y," - ",b,"C"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Completed By"}),n.jsx("p",{className:"font-medium",children:s==null?void 0:s.name})]})]})]})]}),n.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[o===1&&n.jsx(P,{variant:"outline",onClick:A,className:"flex-1",disabled:R,children:"Cancel"}),o>1&&n.jsx(P,{variant:"outline",onClick:W,className:"flex-1",disabled:R,children:"Back"}),o<I&&n.jsx(P,{onClick:F,className:"flex-1",disabled:o===1&&!l.trim()||o===2&&!u.trim()||o===4&&(!m||!j)||o===5&&(!v||!f)||o===6&&(!y||!b),children:"Next"}),o===I&&n.jsx(P,{onClick:L,className:"flex-1",disabled:R,children:"Create Method"})]})]})})}const eM=e=>{const[t,r,s]=e.split("-");return`${s}/${r}/${t}`},tM=e=>{const[t,r,s]=e.split("/");return`${s}-${r}-${t}`};function nM({open:e,onClose:t,onSuccess:r,method:s}){const{currentUser:a}=Ie(),{addBatchToMethod:o}=Zu(),i=s.batches.length+1,[l,c]=d.useState(1),[u,h]=d.useState(new Date().toTimeString().slice(0,5)),[m,g]=d.useState("60"),[j,w]=d.useState(""),[v,p]=d.useState(""),[f,x]=d.useState(""),[y,N]=d.useState(""),[b,T]=d.useState(eM(new Date().toISOString().split("T")[0])),[D,E]=d.useState(!1),[S,C]=d.useState(""),R=5,k=l/R*100,M=()=>{c(1),h(new Date().toTimeString().slice(0,5)),g("60"),w(""),p(""),x(""),N("")},$=()=>{l<R&&c(l+1)},I=()=>{l>1&&c(l-1)},B=async()=>{if(!a){alert("Error: No user logged in");return}E(!0),C(`Adding Batch ${i}...`);const z={batchNumber:i,date:tM(b),startTime:u,startTemp:parseFloat(m),secondTimeCheck:j,secondTempCheck:parseFloat(v),thirdTimeCheck:f,thirdTempCheck:parseFloat(y),completedBy:a.name,timestamp:new Date().toISOString()};o(s.id,z);const A=i===3;try{C("Saving to Google Sheets...");const F=await Mj(s,z);F.success?console.log(" Saved to Google Sheets"):console.warn(" Failed to save to Google Sheets:",F.error)}catch(F){console.error(" Error saving to Google Sheets:",F)}E(!1),M(),r==null||r(A),t()};return n.jsx(Pe,{open:e,onOpenChange:t,children:n.jsxs(De,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[D&&n.jsx("div",{className:"absolute inset-0 bg-background/80 backdrop-blur-sm flex items-center justify-center z-50",children:n.jsxs("div",{className:"text-center space-y-3",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-primary border-t-transparent mx-auto"}),n.jsx("p",{className:"text-lg font-medium",children:S})]})}),n.jsx(Te,{children:n.jsxs(Ee,{className:"flex items-center gap-2",children:[n.jsx(fn,{className:"h-5 w-5 text-primary"}),"Add Batch ",i]})}),n.jsxs("div",{className:"space-y-6 py-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsxs("span",{className:"text-muted-foreground",children:["Step ",l," of ",R]}),n.jsxs("span",{className:"text-muted-foreground",children:[Math.round(k),"%"]})]}),n.jsx($e,{value:k,className:"h-2"})]}),n.jsxs("div",{className:"p-4 bg-muted/30 rounded-lg space-y-2",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Food Item"}),n.jsx("p",{className:"font-medium",children:s.foodItem})]}),l===1&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs(_,{className:"text-base",children:["Date of Batch ",i]}),n.jsx(Fe,{value:b,onChange:T,placeholder:"DD/MM/YYYY"})]}),l===2&&n.jsxs("div",{className:"space-y-4",children:[n.jsx(_,{className:"text-base",children:"Start time (when food reaches 60C)"}),n.jsxs("div",{className:"relative",children:[n.jsx(Zt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground pointer-events-none"}),n.jsx(Y,{type:"time",value:u,onChange:z=>h(z.target.value),className:"h-16 text-xl pl-12",autoFocus:!0})]}),n.jsx(_,{className:"text-base mt-6",children:"Start temperature"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Temperature when food reaches 60C"}),n.jsxs("div",{className:"relative",children:[n.jsx(He,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground pointer-events-none"}),n.jsx(Y,{type:"number",step:"0.1",value:m,onChange:z=>g(z.target.value),placeholder:"60.0",className:"h-16 text-xl pl-12 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"})]})]}),l===3&&n.jsxs("div",{className:"space-y-4",children:[n.jsx(_,{className:"text-base",children:"2nd temperature check"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Food needs to get from 60C to 21C (or room temp, whichever is lower) in 2 hours or less"}),n.jsx(_,{className:"text-base mt-4",children:"2nd check time"}),n.jsxs("div",{className:"relative",children:[n.jsx(Zt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground pointer-events-none"}),n.jsx(Y,{type:"time",value:j,onChange:z=>w(z.target.value),className:"h-16 text-xl pl-12",autoFocus:!0})]}),n.jsx(_,{className:"text-base mt-4",children:"2nd check temperature"}),n.jsxs("div",{className:"relative",children:[n.jsx(He,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground pointer-events-none"}),n.jsx(Y,{type:"number",step:"0.1",value:v,onChange:z=>p(z.target.value),placeholder:"21.0 or below",className:"h-16 text-xl pl-12 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"})]})]}),l===4&&n.jsxs("div",{className:"space-y-4",children:[n.jsx(_,{className:"text-base",children:"3rd temperature check"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Food needs to get from 21C to 5C (or lower) in a further 4 hours or less"}),n.jsx(_,{className:"text-base mt-4",children:"3rd check time"}),n.jsxs("div",{className:"relative",children:[n.jsx(Zt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground pointer-events-none"}),n.jsx(Y,{type:"time",value:f,onChange:z=>x(z.target.value),className:"h-16 text-xl pl-12",autoFocus:!0})]}),n.jsx(_,{className:"text-base mt-4",children:"3rd check temperature"}),n.jsxs("div",{className:"relative",children:[n.jsx(He,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground pointer-events-none"}),n.jsx(Y,{type:"number",step:"0.1",value:y,onChange:z=>N(z.target.value),placeholder:"5.0 or below",className:"h-16 text-xl pl-12 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"})]})]}),l===5&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"font-semibold text-lg",children:["Review Batch ",i]}),n.jsxs("div",{className:"space-y-3 p-4 bg-muted/30 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Date"}),n.jsx("p",{className:"font-medium",children:new Date(b).toLocaleDateString("en-NZ",{day:"numeric",month:"long",year:"numeric"})})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Start (60C)"}),n.jsxs("p",{className:"font-medium",children:[u," - ",m,"C"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"2nd Check (60C  21C)"}),n.jsxs("p",{className:"font-medium",children:[j," - ",v,"C"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"3rd Check (21C  5C)"}),n.jsxs("p",{className:"font-medium",children:[f," - ",y,"C"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Completed By"}),n.jsx("p",{className:"font-medium",children:a==null?void 0:a.name})]})]})]})]}),n.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[l===1&&n.jsx(P,{variant:"outline",onClick:t,className:"flex-1",disabled:D,children:"Cancel"}),l>1&&n.jsx(P,{variant:"outline",onClick:I,className:"flex-1",disabled:D,children:"Back"}),l<R&&n.jsx(P,{onClick:$,className:"flex-1",disabled:l===2&&(!u||!m)||l===3&&(!j||!v)||l===4&&(!f||!y),children:"Next"}),l===R&&n.jsxs(P,{onClick:B,className:"flex-1",disabled:D,children:["Add Batch ",i]})]})]})})}function rM(){const{methods:e,isLoading:t,fetchFromGoogleSheets:r}=Zu(),[s,a]=d.useState([]),[o,i]=d.useState(!1),[l,c]=d.useState(!1),[u,h]=d.useState(null);d.useEffect(()=>{r()},[r]);const m=(f,x="info")=>{const y=Date.now();a(N=>[...N,{id:y,message:f,type:x}])},g=f=>{a(x=>x.filter(y=>y.id!==f))},j=()=>{m("Cooling method created with Batch 1! Record 2 more batches to prove it works.","success")},w=f=>{h(f),c(!0)},v=f=>{m(f?" Cooling method proven! You have completed 3 successful batches.":`Batch recorded! ${u?3-u.batches.length-1:0} more batch${u&&3-u.batches.length-1===1?"":"es"} to go.`,"success"),h(null)},p=e.slice(0,99);return n.jsxs("div",{className:"space-y-8 max-w-4xl mx-auto",children:[n.jsxs("div",{className:"space-y-2 text-center md:text-left",children:[n.jsxs("h2",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[n.jsx(fn,{className:"h-8 w-8"}),"Proving Cooling Method"]}),n.jsx("p",{className:"text-muted-foreground text-lg",children:"Validate cooling methods with 3 consecutive successful batches"})]}),n.jsxs(P,{size:"lg",onClick:()=>i(!0),className:"h-12 px-6 min-h-[48px] w-full sm:w-auto",children:[n.jsx(oe,{className:"h-5 w-5 mr-2"}),"Create New Cooling Method"]}),n.jsxs(V,{children:[n.jsx(ee,{children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:n.jsx(fn,{className:"h-5 w-5 text-primary"})}),n.jsxs("div",{children:[n.jsx(te,{children:"Your Cooling Methods"}),e.length>=100&&n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Last 99 methods (in-progress and proven)"})]})]})}),n.jsx(K,{children:t?n.jsxs("div",{className:"flex flex-col items-center justify-center py-12 space-y-3",children:[n.jsx(ke,{className:"h-8 w-8 animate-spin text-muted-foreground"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Fetching Data"})]}):p.length===0?n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx("p",{className:"text-lg font-medium",children:"No cooling methods created yet"}),n.jsx("p",{className:"text-sm mt-2",children:'Click "Create New Cooling Method" to validate your first cooling method'})]}):n.jsx("div",{className:"space-y-4",children:p.map((f,x)=>n.jsxs("div",{className:"border rounded-lg p-4 space-y-4 transition-all duration-300 hover:shadow-md hover:border-primary/30 hover:scale-[1.01]",style:{animationDelay:`${x*100}ms`},children:[n.jsx("div",{className:"flex items-start justify-between gap-3",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("h3",{className:"font-semibold text-lg",children:f.foodItem}),f.status==="proven"?n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-green-100 text-green-800 text-xs font-medium",children:[n.jsx(Es,{className:"h-3 w-3"}),"Method Proven"]}):n.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full bg-background border text-foreground text-xs font-medium",children:[f.batches.length,"/3 Batches"]})]}),n.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:f.coolingMethod})]})}),n.jsxs("div",{className:"space-y-2",children:[n.jsx($e,{value:f.batches.length/3*100,className:"h-2"}),n.jsx("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:n.jsx("span",{children:f.batches.length===3?`Proven on ${new Date(f.provenAt).toLocaleDateString("en-NZ",{day:"numeric",month:"long",year:"numeric"})}`:`${f.batches.length}/3 batches complete`})})]}),n.jsx("div",{className:"space-y-2",children:[1,2,3].map(y=>{const N=f.batches.find(b=>b.batchNumber===y);return N?n.jsxs("div",{className:"flex items-center gap-3 text-sm p-2 bg-muted/30 rounded",children:[n.jsx(Es,{className:"h-4 w-4 text-green-600 flex-shrink-0"}),n.jsxs("div",{className:"flex-1 flex items-center gap-2 flex-wrap",children:[n.jsxs("span",{className:"font-medium",children:[y,y===1?"st":y===2?"nd":"rd",":"]}),n.jsx("span",{children:new Date(N.date).toLocaleDateString("en-NZ",{day:"numeric",month:"short"})}),n.jsx("span",{className:"text-muted-foreground",children:""}),n.jsxs("span",{className:"font-mono",children:[N.startTemp,"C  ",N.secondTempCheck,"C  ",N.thirdTempCheck,"C"]}),n.jsx("span",{className:"text-muted-foreground",children:""}),n.jsx("span",{children:N.completedBy})]})]},y):n.jsxs("div",{className:"flex items-center gap-3 text-sm p-2 text-muted-foreground",children:[n.jsx("div",{className:"h-4 w-4 rounded-full border-2 border-muted-foreground/30 flex-shrink-0"}),n.jsxs("span",{children:[y,y===1?"st":y===2?"nd":"rd",": Not recorded yet"]})]},y)})}),f.status==="in-progress"&&n.jsxs(P,{onClick:()=>w(f),className:"w-full",size:"lg",children:[n.jsx(oe,{className:"h-4 w-4 mr-2"}),"Add Next Batch (",f.batches.length+1,"/3)"]})]},f.id))})})]}),n.jsx(JE,{open:o,onClose:()=>i(!1),onSuccess:j}),u&&n.jsx(nM,{open:l,onClose:()=>{c(!1),h(null)},onSuccess:v,method:u}),n.jsx(yn,{children:s.map(f=>n.jsx(vn,{message:f.message,type:f.type,onClose:()=>g(f.id)},f.id))})]})}const Rj="https://script.google.com/macros/s/AKfycbxDT8PJzuo1sPDVldlHDH-rkYJp5O6wleomkSFsKBBlu8GKLJmhjC2mlL54WQ1p41onJQ/exec";async function Pj(e,t){try{const r={methodId:e.id,itemDescription:e.itemDescription,reheatingMethod:e.reheatingMethod,batchNumber:t.batchNumber,date:t.date,internalTemp:t.internalTemp,completedBy:t.completedBy,unixTimestamp:Math.floor(new Date(t.timestamp).getTime()/1e3),status:t.batchNumber===3?"proven":e.status,createdBy:e.createdBy,createdAt:e.createdAt};return await fetch(Rj,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),{success:!0}}catch(r){return console.error(" Error saving to Google Sheets:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}const Xu=_e()(Le((e,t)=>({methods:[],isLoading:!1,lastFetchTime:null,fetchError:null,fetchFromGoogleSheets:async()=>{e({isLoading:!0,fetchError:null});try{const r=await fetch(Rj,{method:"GET"});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const s=await r.json();if(s.success&&s.data)e({methods:s.data,lastFetchTime:new Date().toISOString(),fetchError:null});else throw new Error(s.error||"Failed to fetch data")}catch(r){console.error("Error fetching from Google Sheets:",r),e({fetchError:r instanceof Error?r.message:"Unknown error"})}finally{e({isLoading:!1})}},createMethod:r=>{e(s=>({methods:[r,...s.methods]}))},addBatchToMethod:(r,s)=>{e(a=>({methods:a.methods.map(o=>{if(o.id===r){const i=[...o.batches,s],l=i.length===3;return{...o,batches:i,status:l?"proven":"in-progress",provenAt:l?new Date().toISOString():o.provenAt}}return o})}))},getMethods:()=>t().methods,getMethodById:r=>t().methods.find(s=>s.id===r)}),{name:"taquero-proving-reheating"})),yh=e=>{const[t,r,s]=e.split("-");return`${s}/${r}/${t}`},sM=e=>{const[t,r,s]=e.split("/");return`${s}-${r}-${t}`};function aM({open:e,onClose:t,onSuccess:r}){const{currentUser:s}=Ie(),{createMethod:a}=Xu(),[o,i]=d.useState(1),[l,c]=d.useState(""),[u,h]=d.useState(""),[m,g]=d.useState(yh(new Date().toISOString().split("T")[0])),[j,w]=d.useState("75"),[v,p]=d.useState(!1),[f,x]=d.useState(!1),[y,N]=d.useState(""),b=5,T=o/b*100,D=()=>{i(1),c(""),h(""),g(yh(new Date().toISOString().split("T")[0])),w("75"),p(!1)},E=()=>{v&&!window.confirm("You have unsaved data. Are you sure you want to close?")||(D(),t())},S=()=>{o===1&&p(!0),o<b&&i(o+1)},C=()=>{o>1&&i(o-1)},R=async()=>{if(!s){alert("Error: No user logged in");return}x(!0),N("Creating reheating method...");const k=`reheating-method-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,M={batchNumber:1,date:sM(m),internalTemp:parseFloat(j),completedBy:s.name,timestamp:new Date().toISOString()},$={id:k,itemDescription:l,reheatingMethod:u,status:"in-progress",batches:[M],createdAt:new Date().toISOString(),createdBy:s.name};a($);try{N("Saving to Google Sheets...");const I=await Pj($,M);I.success?console.log(" Saved to Google Sheets"):console.warn(" Failed to save to Google Sheets:",I.error)}catch(I){console.error(" Error saving to Google Sheets:",I)}x(!1),D(),r==null||r(),t()};return n.jsx(Pe,{open:e,onOpenChange:E,children:n.jsxs(De,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[f&&n.jsx("div",{className:"absolute inset-0 bg-background/80 backdrop-blur-sm flex items-center justify-center z-50",children:n.jsxs("div",{className:"text-center space-y-3",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-primary border-t-transparent mx-auto"}),n.jsx("p",{className:"text-lg font-medium",children:y})]})}),n.jsx(Te,{children:n.jsxs(Ee,{className:"flex items-center gap-2",children:[n.jsx(Jt,{className:"h-5 w-5 text-primary"}),"New Reheating Method"]})}),n.jsxs("div",{className:"space-y-6 py-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsxs("span",{className:"text-muted-foreground",children:["Step ",o," of ",b]}),n.jsxs("span",{className:"text-muted-foreground",children:[Math.round(T),"%"]})]}),n.jsx($e,{value:T,className:"h-2"})]}),o===1&&n.jsxs("div",{className:"space-y-4",children:[n.jsx(_,{className:"text-base",children:"Item Description"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Type, size, weight"}),n.jsx(Y,{value:l,onChange:k=>c(k.target.value),placeholder:"e.g., 5 litres vegetable soup",className:"h-16 text-xl",autoFocus:!0})]}),o===2&&n.jsxs("div",{className:"space-y-4",children:[n.jsx(_,{className:"text-base",children:"Reheating Method"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Describe the full reheating process"}),n.jsx(ce,{value:u,onChange:k=>h(k.target.value),placeholder:"e.g., Heat all 5 litres in a 10 litre pot on stove on med/high for 15 minutes until the center of the liquid is 75C",className:"min-h-[140px] text-lg",autoFocus:!0})]}),o===3&&n.jsxs("div",{className:"space-y-4",children:[n.jsx(_,{className:"text-base",children:"Batch 1: Date"}),n.jsx(Fe,{value:m,onChange:g,placeholder:"DD/MM/YYYY"})]}),o===4&&n.jsxs("div",{className:"space-y-4",children:[n.jsx(_,{className:"text-base",children:"Batch 1: Internal Temperature"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Must be at least 75C at the coolest part (liquid) or middle (solid)"}),n.jsxs("div",{className:"relative",children:[n.jsx(He,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground pointer-events-none"}),n.jsx(Y,{type:"number",step:"0.1",value:j,onChange:k=>w(k.target.value),placeholder:"75.0",className:"h-16 text-xl pl-12 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",autoFocus:!0})]})]}),o===5&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"font-semibold text-lg",children:"Review Reheating Method"}),n.jsxs("div",{className:"space-y-3 p-4 bg-muted/30 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Item Description"}),n.jsx("p",{className:"font-medium",children:l})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Reheating Method"}),n.jsx("p",{className:"font-medium",children:u})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Batch 1 - Date"}),n.jsx("p",{className:"font-medium",children:new Date(m).toLocaleDateString("en-NZ",{day:"numeric",month:"long",year:"numeric"})})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Batch 1 - Internal Temperature"}),n.jsxs("p",{className:"font-medium",children:[j,"C"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Created By"}),n.jsx("p",{className:"font-medium",children:s==null?void 0:s.name})]})]})]})]}),n.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[o===1&&n.jsx(P,{variant:"outline",onClick:E,className:"flex-1",disabled:f,children:"Cancel"}),o>1&&n.jsx(P,{variant:"outline",onClick:C,className:"flex-1",disabled:f,children:"Back"}),o<b&&n.jsx(P,{onClick:S,className:"flex-1",disabled:o===1&&!l.trim()||o===2&&!u.trim()||o===4&&!j,children:"Next"}),o===b&&n.jsx(P,{onClick:R,className:"flex-1",disabled:f,children:"Create Method"})]})]})})}const jh=e=>{const[t,r,s]=e.split("-");return`${s}/${r}/${t}`},oM=e=>{const[t,r,s]=e.split("/");return`${s}-${r}-${t}`};function iM({open:e,onClose:t,onSuccess:r,method:s}){const{currentUser:a}=Ie(),{addBatchToMethod:o}=Xu(),[i,l]=d.useState(1),[c,u]=d.useState(jh(new Date().toISOString().split("T")[0])),[h,m]=d.useState("75"),[g,j]=d.useState(!1),[w,v]=d.useState(!1),[p,f]=d.useState(""),x=s.batches.length+1,y=3,N=i/y*100,b=()=>{l(1),u(jh(new Date().toISOString().split("T")[0])),m("75"),j(!1)},T=()=>{g&&!window.confirm("You have unsaved data. Are you sure you want to close?")||(b(),t())},D=()=>{i===1&&j(!0),i<y&&l(i+1)},E=()=>{i>1&&l(i-1)},S=async()=>{if(!a){alert("Error: No user logged in");return}v(!0),f("Adding batch...");const C={batchNumber:x,date:oM(c),internalTemp:parseFloat(h),completedBy:a.name,timestamp:new Date().toISOString()};o(s.id,C);const R=x===3;try{f("Saving to Google Sheets...");const k=await Pj(s,C);k.success?console.log(" Saved to Google Sheets"):console.warn(" Failed to save to Google Sheets:",k.error)}catch(k){console.error(" Error saving to Google Sheets:",k)}v(!1),b(),r==null||r(R),t()};return n.jsx(Pe,{open:e,onOpenChange:T,children:n.jsxs(De,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[w&&n.jsx("div",{className:"absolute inset-0 bg-background/80 backdrop-blur-sm flex items-center justify-center z-50",children:n.jsxs("div",{className:"text-center space-y-3",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-primary border-t-transparent mx-auto"}),n.jsx("p",{className:"text-lg font-medium",children:p})]})}),n.jsx(Te,{children:n.jsxs(Ee,{className:"flex items-center gap-2",children:[n.jsx(Jt,{className:"h-5 w-5 text-primary"}),"Add Batch ",x,"/3"]})}),n.jsxs("div",{className:"space-y-6 py-4",children:[n.jsxs("div",{className:"p-4 bg-muted/30 rounded-lg",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Reheating Method"}),n.jsx("p",{className:"font-medium text-lg",children:s.itemDescription})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsxs("span",{className:"text-muted-foreground",children:["Step ",i," of ",y]}),n.jsxs("span",{className:"text-muted-foreground",children:[Math.round(N),"%"]})]}),n.jsx($e,{value:N,className:"h-2"})]}),i===1&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs(_,{className:"text-base",children:["Batch ",x,": Date"]}),n.jsx(Fe,{value:c,onChange:u,placeholder:"DD/MM/YYYY"})]}),i===2&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs(_,{className:"text-base",children:["Batch ",x,": Internal Temperature"]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Must be at least 75C at the coolest part (liquid) or middle (solid)"}),n.jsxs("div",{className:"relative",children:[n.jsx(He,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground pointer-events-none"}),n.jsx(Y,{type:"number",step:"0.1",value:h,onChange:C=>m(C.target.value),placeholder:"75.0",className:"h-16 text-xl pl-12 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",autoFocus:!0})]})]}),i===3&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"font-semibold text-lg",children:["Review Batch ",x]}),n.jsxs("div",{className:"space-y-3 p-4 bg-muted/30 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Item"}),n.jsx("p",{className:"font-medium",children:s.itemDescription})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Date"}),n.jsx("p",{className:"font-medium",children:new Date(c).toLocaleDateString("en-NZ",{day:"numeric",month:"long",year:"numeric"})})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Internal Temperature"}),n.jsxs("p",{className:"font-medium",children:[h,"C"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Completed By"}),n.jsx("p",{className:"font-medium",children:a==null?void 0:a.name})]})]})]})]}),n.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[i===1&&n.jsx(P,{variant:"outline",onClick:T,className:"flex-1",disabled:w,children:"Cancel"}),i>1&&n.jsx(P,{variant:"outline",onClick:E,className:"flex-1",disabled:w,children:"Back"}),i<y&&n.jsx(P,{onClick:D,className:"flex-1",disabled:i===2&&!h,children:"Next"}),i===y&&n.jsx(P,{onClick:S,className:"flex-1",disabled:w,children:"Add Batch"})]})]})})}function lM(){const{methods:e,isLoading:t,fetchFromGoogleSheets:r}=Xu(),[s,a]=d.useState([]),[o,i]=d.useState(!1),[l,c]=d.useState(!1),[u,h]=d.useState(null);d.useEffect(()=>{r()},[r]);const m=(f,x="info")=>{const y=Date.now();a(N=>[...N,{id:y,message:f,type:x}])},g=f=>{a(x=>x.filter(y=>y.id!==f))},j=()=>{m("Reheating method created with Batch 1! Record 2 more batches to prove it works.","success")},w=f=>{h(f),c(!0)},v=f=>{m(f?" Reheating method proven! You have completed 3 successful batches.":`Batch recorded! ${u?3-u.batches.length-1:0} more batch${u&&3-u.batches.length-1===1?"":"es"} to go.`,"success"),h(null)},p=e.slice(0,99);return n.jsxs("div",{className:"space-y-8 max-w-4xl mx-auto",children:[n.jsxs("div",{className:"space-y-2 text-center md:text-left",children:[n.jsxs("h2",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[n.jsx(Jt,{className:"h-8 w-8"}),"Proving Reheating Method"]}),n.jsx("p",{className:"text-muted-foreground text-lg",children:"Validate reheating methods with 3 consecutive successful batches"})]}),n.jsxs(P,{size:"lg",onClick:()=>i(!0),className:"h-12 px-6 min-h-[48px] w-full sm:w-auto",children:[n.jsx(oe,{className:"h-5 w-5 mr-2"}),"Create New Reheating Method"]}),n.jsxs(V,{children:[n.jsx(ee,{children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:n.jsx(Jt,{className:"h-5 w-5 text-primary"})}),n.jsxs("div",{children:[n.jsx(te,{children:"Your Reheating Methods"}),e.length>=100&&n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Last 99 methods (in-progress and proven)"})]})]})}),n.jsx(K,{children:t?n.jsxs("div",{className:"flex flex-col items-center justify-center py-12 space-y-3",children:[n.jsx(ke,{className:"h-8 w-8 animate-spin text-muted-foreground"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Fetching Data"})]}):p.length===0?n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx("p",{className:"text-lg font-medium",children:"No reheating methods created yet"}),n.jsx("p",{className:"text-sm mt-2",children:'Click "Create New Reheating Method" to validate your first reheating method'})]}):n.jsx("div",{className:"space-y-4",children:p.map((f,x)=>n.jsxs("div",{className:"border rounded-lg p-4 space-y-4 transition-all duration-300 hover:shadow-md hover:border-primary/30 hover:scale-[1.01]",style:{animationDelay:`${x*100}ms`},children:[n.jsx("div",{className:"flex items-start justify-between gap-3",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("h3",{className:"font-semibold text-lg",children:f.itemDescription}),f.status==="proven"?n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-green-100 text-green-800 text-xs font-medium",children:[n.jsx(Es,{className:"h-3 w-3"}),"Method Proven"]}):n.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full bg-background border text-foreground text-xs font-medium",children:[f.batches.length,"/3 Batches"]})]}),n.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:f.reheatingMethod})]})}),n.jsxs("div",{className:"space-y-2",children:[n.jsx($e,{value:f.batches.length/3*100,className:"h-2"}),n.jsx("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:n.jsx("span",{children:f.batches.length===3?`Proven on ${new Date(f.provenAt).toLocaleDateString("en-NZ",{day:"numeric",month:"long",year:"numeric"})}`:`${f.batches.length}/3 batches complete`})})]}),n.jsx("div",{className:"space-y-2",children:[1,2,3].map(y=>{const N=f.batches.find(b=>b.batchNumber===y);return N?n.jsxs("div",{className:"flex items-center gap-3 text-sm p-2 bg-muted/30 rounded",children:[n.jsx(Es,{className:"h-4 w-4 text-green-600 flex-shrink-0"}),n.jsxs("div",{className:"flex-1 flex items-center gap-2 flex-wrap",children:[n.jsxs("span",{className:"font-medium",children:[y,y===1?"st":y===2?"nd":"rd",":"]}),n.jsx("span",{children:new Date(N.date).toLocaleDateString("en-NZ",{day:"numeric",month:"short"})}),n.jsx("span",{className:"text-muted-foreground",children:""}),n.jsxs("span",{className:"font-mono",children:[N.internalTemp,"C"]}),n.jsx("span",{className:"text-muted-foreground",children:""}),n.jsx("span",{children:N.completedBy})]})]},y):n.jsxs("div",{className:"flex items-center gap-3 text-sm p-2 text-muted-foreground",children:[n.jsx("div",{className:"h-4 w-4 rounded-full border-2 border-muted-foreground/30 flex-shrink-0"}),n.jsxs("span",{children:[y,y===1?"st":y===2?"nd":"rd",": Not recorded yet"]})]},y)})}),f.status==="in-progress"&&n.jsxs(P,{onClick:()=>w(f),className:"w-full",size:"lg",children:[n.jsx(oe,{className:"h-4 w-4 mr-2"}),"Add Next Batch (",f.batches.length+1,"/3)"]})]},f.id))})})]}),n.jsx(aM,{open:o,onClose:()=>i(!1),onSuccess:j}),u&&n.jsx(iM,{open:l,onClose:()=>{c(!1),h(null)},onSuccess:v,method:u}),n.jsx(yn,{children:s.map(f=>n.jsx(vn,{message:f.message,type:f.type,onClose:()=>g(f.id)},f.id))})]})}const Aj="https://script.google.com/macros/s/AKfycbwKeROQFAY1e7uKNa1iQ5kP9m5r7FpURvC7Wy7CkhWGgyW8f_3wktIMKvivRE3YyolR/exec";async function Oj(e){try{const t={id:e.id,staffName:e.staffName,symptoms:e.symptoms||"",dateSick:e.dateSick,dateReturned:e.dateReturned||"",actionTaken:e.actionTaken||"",checkedBy:e.checkedBy,unixTimestamp:Math.floor(new Date(e.timestamp).getTime()/1e3),status:e.status};return await fetch(`${Aj}?module=staff-sickness`,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),{success:!0}}catch(t){return console.error(" Error saving to Google Sheets:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}const Ju=_e()(Le((e,t)=>({records:[],isLoading:!1,lastFetchTime:null,fetchError:null,fetchFromGoogleSheets:async()=>{e({isLoading:!0,fetchError:null});try{const r=await fetch(`${Aj}?module=staff-sickness`,{method:"GET"});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const s=await r.json();if(s.success&&s.data)e({records:s.data,lastFetchTime:new Date().toISOString(),fetchError:null});else throw new Error(s.error||"Failed to fetch data")}catch(r){console.error("Error fetching from Google Sheets:",r),e({fetchError:r instanceof Error?r.message:"Unknown error"})}finally{e({isLoading:!1})}},addRecord:r=>{e(s=>({records:[r,...s.records]}))},updateRecordStatus:(r,s)=>{e(a=>({records:a.records.map(o=>o.id===r?{...o,dateReturned:s,status:"returned"}:o)}))},deleteRecord:r=>{e(s=>({records:s.records.filter(a=>a.id!==r)}))},getRecords:()=>t().records,getSickRecords:()=>t().records.filter(r=>r.status==="sick"),getReturnedRecords:()=>t().records.filter(r=>r.status==="returned"),getRecordById:r=>t().records.find(s=>s.id===r)}),{name:"taquero-staff-sickness"})),wh=e=>{const[t,r,s]=e.split("-");return`${s}/${r}/${t}`},Nh=e=>{const[t,r,s]=e.split("/");return`${s}-${r}-${t}`};function cM({open:e,onClose:t,onSuccess:r}){const{currentUser:s}=Ie(),{addRecord:a}=Ju(),[o,i]=d.useState(1),[l,c]=d.useState(""),[u,h]=d.useState(""),[m,g]=d.useState(wh(new Date().toISOString().split("T")[0])),[j,w]=d.useState(""),[v,p]=d.useState(""),[f,x]=d.useState(!1),[y,N]=d.useState(!1),b=4,T=o/b*100,D=()=>{i(1),c(""),h(""),g(wh(new Date().toISOString().split("T")[0])),w(""),p(""),x(!1)},E=()=>{f&&!window.confirm("You have unsaved data. Are you sure you want to close?")||(D(),t())},S=()=>{o===1&&x(!0),o<b&&i(o+1)},C=()=>{o>1&&i(o-1)},R=M=>{i(M)},k=async()=>{if(!s){alert("Error: No user logged in");return}N(!0);const M=`sick-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,$=j.trim()!=="",I={id:M,staffName:l,symptoms:u.trim()||void 0,dateSick:Nh(m),dateReturned:$?Nh(j):void 0,actionTaken:v.trim()||void 0,checkedBy:s.name,timestamp:new Date().toISOString(),status:$?"returned":"sick"};try{const B=await Oj(I);B.success||console.warn(" Failed to save to Google Sheets:",B.error),a(I),D(),t(),r==null||r()}catch(B){console.error(" Error creating record:",B),alert("Error creating record. Please try again.")}finally{N(!1)}};return n.jsx(Pe,{open:e,onOpenChange:E,children:n.jsxs(De,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[y&&n.jsx("div",{className:"absolute inset-0 bg-background/80 backdrop-blur-sm z-50 flex items-center justify-center rounded-lg",children:n.jsxs("div",{className:"flex flex-col items-center gap-4",children:[n.jsx("div",{className:"h-12 w-12 animate-spin rounded-full border-4 border-primary border-t-transparent"}),n.jsx("div",{className:"text-lg font-semibold",children:"Saving to Google Sheets..."})]})}),n.jsx(Te,{children:n.jsx(Ee,{children:o===b?"Review Sickness Record":"Record Staff Sickness"})}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[n.jsxs("span",{children:["Step ",o," of ",b]}),n.jsxs("span",{children:[Math.round(T),"%"]})]}),n.jsx($e,{value:T,className:"h-2"})]}),n.jsxs("div",{className:"py-6",children:[o===1&&n.jsxs("div",{className:"space-y-4",children:[n.jsx(_,{className:"text-base",children:"Who is sick?"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Enter the staff member's full name"}),n.jsxs("div",{className:"relative",children:[n.jsx(Zi,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),n.jsx(Y,{value:l,onChange:M=>c(M.target.value),placeholder:"e.g., John Smith",className:"h-16 text-xl pl-12"})]})]}),o===2&&n.jsxs("div",{className:"space-y-4",children:[n.jsx(_,{className:"text-base",children:"What are their symptoms? (Optional)"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"This is optional but can be useful for tracking patterns"}),n.jsxs("div",{className:"relative",children:[n.jsx(tS,{className:"absolute left-3 top-3 h-5 w-5 text-muted-foreground"}),n.jsx(ce,{value:u,onChange:M=>h(M.target.value),placeholder:"e.g., Fever and vomiting",className:"min-h-[120px] text-lg pl-12 pt-3"})]})]}),o===3&&n.jsxs("div",{className:"space-y-4",children:[n.jsx(_,{className:"text-base",children:"When did they become sick?"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Select the date they were unable to work"}),n.jsx(Fe,{value:m,onChange:g,placeholder:"DD/MM/YYYY"})]}),o===4&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx(_,{htmlFor:"dateReturned",className:"text-base",children:"Date returned to work (Optional)"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Leave blank if still sick"}),n.jsx(Fe,{value:j,onChange:w,placeholder:"DD/MM/YYYY"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx(_,{className:"text-base",children:"Action taken (Optional)"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:'Record any actions taken (e.g., "Stayed home, symptoms stopped 02/04/17")'}),n.jsxs("div",{className:"relative",children:[n.jsx(Ig,{className:"absolute left-3 top-3 h-5 w-5 text-muted-foreground"}),n.jsx(ce,{value:v,onChange:M=>p(M.target.value),placeholder:"e.g., Stayed home, symptoms stopped after 2 days",className:"min-h-[100px] text-lg pl-12 pt-3"})]})]}),n.jsxs("div",{className:"border-t pt-4 mt-6",children:[n.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Review Record"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Staff Member"}),n.jsx("div",{className:"font-medium",children:l})]}),n.jsx(P,{variant:"ghost",size:"sm",onClick:()=>R(1),className:"h-8 w-8 p-0",children:n.jsx(qt,{className:"h-3 w-3"})})]}),u&&n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Symptoms"}),n.jsx("div",{className:"font-medium text-sm",children:u})]}),n.jsx(P,{variant:"ghost",size:"sm",onClick:()=>R(2),className:"h-8 w-8 p-0",children:n.jsx(qt,{className:"h-3 w-3"})})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Date Became Sick"}),n.jsx("div",{className:"font-medium",children:new Date(m).toLocaleDateString("en-NZ",{day:"numeric",month:"long",year:"numeric"})})]}),n.jsx(P,{variant:"ghost",size:"sm",onClick:()=>R(3),className:"h-8 w-8 p-0",children:n.jsx(qt,{className:"h-3 w-3"})})]}),j&&n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Date Returned"}),n.jsx("div",{className:"font-medium",children:new Date(j).toLocaleDateString("en-NZ",{day:"numeric",month:"long",year:"numeric"})})]}),n.jsx(P,{variant:"ghost",size:"sm",onClick:()=>R(4),className:"h-8 w-8 p-0",children:n.jsx(qt,{className:"h-3 w-3"})})]}),v&&n.jsxs("div",{className:"p-3 border rounded-lg",children:[n.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Action Taken"}),n.jsx("div",{className:"font-medium text-sm",children:v})]}),n.jsx("div",{className:"flex items-center p-3 border rounded-lg bg-muted/30",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-muted-foreground",children:"Checked by"}),n.jsx("div",{className:"font-medium text-sm",children:s==null?void 0:s.name})]})})]})]})]})]}),n.jsxs("div",{className:"flex gap-3 border-t pt-4",children:[o>1&&o<=b&&n.jsx(P,{variant:"outline",onClick:C,className:"h-12 min-h-[48px] flex-1",children:" Back"}),o<b&&n.jsx(P,{onClick:S,disabled:o===1&&!l.trim()||o===3&&!m,className:"h-12 min-h-[48px] flex-1",children:"Continue "}),o===b&&n.jsx(P,{onClick:k,disabled:y,className:"h-12 min-h-[48px] flex-1",children:y?"Saving...":"Save Record"})]})]})})}const bh=e=>{const[t,r,s]=e.split("-");return`${s}/${r}/${t}`},Sh=e=>{const[t,r,s]=e.split("/");return`${s}-${r}-${t}`};function dM({open:e,onClose:t,onSuccess:r,record:s}){const{updateRecordStatus:a}=Ju(),[o,i]=d.useState(""),[l,c]=d.useState(!1);d.useEffect(()=>{s&&i(s.dateReturned?bh(s.dateReturned):bh(new Date().toISOString().split("T")[0]))},[s]);const u=()=>{i(""),t()},h=async()=>{if(s){c(!0);try{const m={...s,dateReturned:Sh(o),status:"returned"},g=await Oj(m);g.success||console.warn(" Failed to save to Google Sheets:",g.error),a(s.id,Sh(o)),u(),r==null||r()}catch(m){console.error(" Error updating record:",m),alert("Error updating record. Please try again.")}finally{c(!1)}}};return s?n.jsx(Pe,{open:e,onOpenChange:u,children:n.jsxs(De,{className:"max-w-md",children:[l&&n.jsx("div",{className:"absolute inset-0 bg-background/80 backdrop-blur-sm z-50 flex items-center justify-center rounded-lg",children:n.jsxs("div",{className:"flex flex-col items-center gap-4",children:[n.jsx("div",{className:"h-12 w-12 animate-spin rounded-full border-4 border-primary border-t-transparent"}),n.jsx("div",{className:"text-lg font-semibold",children:"Updating record..."})]})}),n.jsx(Te,{children:n.jsxs(Ee,{className:"flex items-center gap-2",children:[n.jsx(Lt,{className:"h-5 w-5"}),(s==null?void 0:s.status)==="returned"?"Edit Return Date":"Mark as Recovered"]})}),n.jsxs("div",{className:"space-y-6 py-4",children:[n.jsxs("div",{className:"p-4 bg-muted rounded-lg border",children:[n.jsx("div",{className:"text-sm text-muted-foreground",children:"Staff Member"}),n.jsx("div",{className:"font-semibold text-lg",children:s.staffName}),n.jsxs("div",{className:"text-sm text-muted-foreground mt-2",children:["Sick since ",new Date(s.dateSick).toLocaleDateString("en-NZ",{day:"numeric",month:"long",year:"numeric"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"returnDate",className:"text-base",children:"When did they return to work?"}),n.jsx(Fe,{value:o,onChange:i,placeholder:"DD/MM/YYYY"})]})]}),n.jsxs("div",{className:"flex gap-3 border-t pt-4",children:[n.jsx(P,{variant:"outline",onClick:u,disabled:l,className:"h-12 flex-1",children:"Cancel"}),n.jsx(P,{onClick:h,disabled:l||!o,className:"h-12 flex-1",children:l?"Updating...":(s==null?void 0:s.status)==="returned"?"Update Return Date":"Mark as Recovered"})]})]})}):null}function uM(){const{records:e,isLoading:t,fetchFromGoogleSheets:r}=Ju(),[s,a]=d.useState([]),[o,i]=d.useState(!1),[l,c]=d.useState(!1),[u,h]=d.useState(null),[m,g]=d.useState(new Set);d.useEffect(()=>{r()},[r]);const j=(b,T="info")=>{const D=Date.now();a(E=>[...E,{id:D,message:b,type:T}])},w=b=>{a(T=>T.filter(D=>D.id!==b))},v=()=>{j("Sickness record added successfully","success")},p=(b,T)=>{T==null||T.stopPropagation(),h(b),c(!0)},f=()=>{j("Staff member marked as recovered","success"),h(null)},x=b=>{g(T=>{const D=new Set(T);return D.has(b)?D.delete(b):D.add(b),D})},y=b=>new Date(b).toLocaleDateString("en-NZ",{day:"numeric",month:"long",year:"numeric"}),N=[...e].sort((b,T)=>new Date(T.timestamp).getTime()-new Date(b.timestamp).getTime()).slice(0,50);return n.jsxs("div",{className:"space-y-8 max-w-7xl mx-auto",children:[n.jsxs("div",{className:"space-y-2 text-center md:text-left",children:[n.jsxs("h2",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[n.jsx(pa,{className:"h-8 w-8"}),"Staff Sickness"]}),n.jsx("p",{className:"text-muted-foreground text-lg",children:"Track staff health and sickness records"})]}),n.jsxs(P,{size:"lg",onClick:()=>i(!0),className:"h-12 px-6 min-h-[48px] w-full sm:w-auto",children:[n.jsx(oe,{className:"h-5 w-5 mr-2"}),"Record Staff Sickness"]}),t&&n.jsxs("div",{className:"flex flex-col items-center justify-center p-8 space-y-3",children:[n.jsx(ke,{className:"h-8 w-8 animate-spin text-muted-foreground"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Fetching Data"})]}),!t&&N.length>0&&n.jsxs(V,{children:[n.jsx(ee,{children:n.jsx(te,{children:"Sickness Records"})}),n.jsx(K,{children:n.jsx("div",{className:"space-y-2",children:N.map((b,T)=>{const D=m.has(b.id),E=b.status==="returned";return n.jsxs("div",{className:"border rounded-lg overflow-hidden transition-all duration-200 hover:border-primary/50",style:{animationDelay:`${T*50}ms`},children:[n.jsxs("div",{className:"flex items-center justify-between p-4 cursor-pointer bg-card hover:bg-muted/50 transition-colors",onClick:()=>x(b.id),children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[n.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center transition-colors ${D?"bg-primary text-primary-foreground":"bg-primary/10"}`,children:n.jsx(pa,{className:`h-5 w-5 ${D?"":"text-primary"}`})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h3",{className:"font-semibold text-lg truncate",children:b.staffName}),n.jsx(il,{variant:E?"default":"destructive",className:E?"bg-green-600 hover:bg-green-700":"",children:E?"Returned":"Currently Sick"})]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Sick since ",y(b.dateSick),E&&b.dateReturned&&`  Returned ${y(b.dateReturned)}`]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[n.jsx(P,{variant:"ghost",size:"sm",onClick:S=>p(b,S),className:"h-9 w-9 p-0",title:E?"Edit return date":"Mark as recovered",children:n.jsx(Lt,{className:"h-4 w-4"})}),n.jsx(P,{variant:"ghost",size:"sm",className:"h-9 w-9 p-0",children:D?n.jsx(Bt,{className:"h-5 w-5"}):n.jsx(Et,{className:"h-5 w-5"})})]})]}),D&&n.jsxs("div",{className:"border-t bg-muted/30 p-4 space-y-4 animate-in fade-in slide-in-from-top-2 duration-200",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[b.symptoms&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:"Symptoms"}),n.jsx("p",{className:"text-sm font-medium mt-1",children:b.symptoms})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:"Checked By"}),n.jsx("p",{className:"text-sm font-medium mt-1",children:b.checkedBy})]})]}),b.actionTaken&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:"Action Taken"}),n.jsx("p",{className:"text-sm font-medium mt-1 whitespace-pre-wrap",children:b.actionTaken})]}),!E&&n.jsx("div",{className:"pt-2 border-t",children:n.jsxs(P,{onClick:S=>p(b,S),className:"w-full sm:w-auto",variant:"default",children:[n.jsx(Lt,{className:"h-4 w-4 mr-2"}),"Mark as Recovered"]})})]})]},b.id)})})})]}),!t&&N.length===0&&n.jsx(V,{children:n.jsxs(K,{className:"flex flex-col items-center justify-center p-12",children:[n.jsx(pa,{className:"h-16 w-16 text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No sickness records yet"}),n.jsx("p",{className:"text-muted-foreground text-center mb-6",children:"Start tracking staff health by recording your first sickness entry"}),n.jsxs(P,{onClick:()=>i(!0),children:[n.jsx(oe,{className:"mr-2 h-5 w-5"}),"Record Staff Sickness"]})]})}),n.jsx(cM,{open:o,onClose:()=>i(!1),onSuccess:v}),n.jsx(dM,{open:l,onClose:()=>{c(!1),h(null)},onSuccess:f,record:u}),n.jsx(yn,{children:s.map(b=>n.jsx(vn,{message:b.message,type:b.type,onClose:()=>w(b.id)},b.id))})]})}const Ij="https://script.google.com/macros/s/AKfycby8gcfPCWLbzPlE5jHGavGNO39gUvcrJ59_i8SlWcqfTaDu0FCM79-HpZZpvfFHp-bH/exec";async function mM(e){try{const t={id:e.id,foodType:e.foodType,dateCooked:e.dateCooked,startTime:e.startTime,startTemp:e.startTemp,secondTimeCheck:e.secondTimeCheck,secondTempCheck:e.secondTempCheck,thirdTimeCheck:e.thirdTimeCheck,thirdTempCheck:e.thirdTempCheck,coolingMethod:e.coolingMethod,completedBy:e.completedBy,unixTimestamp:Math.floor(new Date(e.timestamp).getTime()/1e3)};return await fetch(`${Ij}?module=cooling-batch-checks`,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),{success:!0}}catch(t){return console.error(" Error saving to Google Sheets:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}const Fj=_e()(Le((e,t)=>({records:[],isLoading:!1,lastFetchTime:null,fetchError:null,fetchFromGoogleSheets:async()=>{e({isLoading:!0,fetchError:null});try{const r=await fetch(`${Ij}?module=cooling-batch-checks`,{method:"GET"});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const s=await r.json();if(s.success&&s.data)e({records:s.data,lastFetchTime:new Date().toISOString(),fetchError:null});else throw new Error(s.error||"Failed to fetch data")}catch(r){console.error("Error fetching from Google Sheets:",r),e({fetchError:r instanceof Error?r.message:"Unknown error"})}finally{e({isLoading:!1})}},addRecord:r=>{e(s=>({records:[r,...s.records]}))},deleteRecord:r=>{e(s=>({records:s.records.filter(a=>a.id!==r)}))},getRecords:()=>t().records}),{name:"taquero-cooling-batch-checks"})),Ch=e=>{const[t,r,s]=e.split("-");return`${s}/${r}/${t}`},fM=e=>{const[t,r,s]=e.split("/");return`${s}-${r}-${t}`};function hM({open:e,onClose:t,onSuccess:r}){const{currentUser:s}=Ie(),{addRecord:a}=Fj(),[o,i]=d.useState(1),[l,c]=d.useState(""),[u,h]=d.useState(Ch(new Date().toISOString().split("T")[0])),[m,g]=d.useState(new Date().toTimeString().slice(0,5)),[j,w]=d.useState("60"),[v,p]=d.useState(""),[f,x]=d.useState(""),[y,N]=d.useState(""),[b,T]=d.useState(""),[D,E]=d.useState(""),[S,C]=d.useState(!1),[R,k]=d.useState(!1),[M,$]=d.useState(""),I=7,B=o/I*100,z=()=>{i(1),c(""),h(Ch(new Date().toISOString().split("T")[0])),g(new Date().toTimeString().slice(0,5)),w("60"),p(""),x(""),N(""),T(""),E(""),C(!1)},A=()=>{S&&!window.confirm("You have unsaved data. Are you sure you want to close?")||(z(),t())},F=()=>{o===1&&C(!0),o<I&&i(o+1)},W=()=>{o>1&&i(o-1)},L=async()=>{if(!s){alert("Error: No user logged in");return}k(!0),$("Adding batch check...");const H={id:`batch-check-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,foodType:l,dateCooked:fM(u),startTime:m,startTemp:parseFloat(j),secondTimeCheck:v,secondTempCheck:parseFloat(f),thirdTimeCheck:y,thirdTempCheck:parseFloat(b),coolingMethod:D,completedBy:s.name,timestamp:new Date().toISOString()};a(H);try{$("Saving to Google Sheets...");const J=await mM(H);J.success?console.log(" Saved to Google Sheets"):console.warn(" Failed to save to Google Sheets:",J.error)}catch(J){console.error(" Error saving to Google Sheets:",J)}k(!1),z(),r==null||r(),t()};return n.jsx(Pe,{open:e,onOpenChange:A,children:n.jsxs(De,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[R&&n.jsx("div",{className:"absolute inset-0 bg-background/80 backdrop-blur-sm flex items-center justify-center z-50",children:n.jsxs("div",{className:"text-center space-y-3",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-primary border-t-transparent mx-auto"}),n.jsx("p",{className:"text-lg font-medium",children:M})]})}),n.jsx(Te,{children:n.jsxs(Ee,{className:"flex items-center gap-2",children:[n.jsx(fn,{className:"h-5 w-5 text-primary"}),"Add Batch Check"]})}),n.jsxs("div",{className:"space-y-6 py-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsxs("span",{className:"text-muted-foreground",children:["Step ",o," of ",I]}),n.jsxs("span",{className:"text-muted-foreground",children:[Math.round(B),"%"]})]}),n.jsx($e,{value:B,className:"h-2"})]}),o===1&&n.jsxs("div",{className:"space-y-4",children:[n.jsx(_,{className:"text-base",children:"Food Type"}),n.jsx(Y,{value:l,onChange:O=>c(O.target.value),placeholder:"e.g., Butter chicken curry",className:"h-16 text-xl",autoFocus:!0})]}),o===2&&n.jsxs("div",{className:"space-y-4",children:[n.jsx(_,{className:"text-base",children:"Date Cooked"}),n.jsx(Fe,{value:u,onChange:h,placeholder:"DD/MM/YYYY"})]}),o===3&&n.jsxs("div",{className:"space-y-4",children:[n.jsx(_,{className:"text-base",children:"Start time (when food reaches 60C)"}),n.jsxs("div",{className:"relative",children:[n.jsx(Zt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground pointer-events-none"}),n.jsx(Y,{type:"time",value:m,onChange:O=>g(O.target.value),className:"h-16 text-xl pl-12",autoFocus:!0})]}),n.jsx(_,{className:"text-base mt-6",children:"Start temperature"}),n.jsxs("div",{className:"relative",children:[n.jsx(He,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground pointer-events-none"}),n.jsx(Y,{type:"number",step:"0.1",value:j,onChange:O=>w(O.target.value),placeholder:"60.0",className:"h-16 text-xl pl-12 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"})]})]}),o===4&&n.jsxs("div",{className:"space-y-4",children:[n.jsx(_,{className:"text-base",children:"2nd temperature check"}),n.jsx(_,{className:"text-base mt-4",children:"2nd check time"}),n.jsxs("div",{className:"relative",children:[n.jsx(Zt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground pointer-events-none"}),n.jsx(Y,{type:"time",value:v,onChange:O=>p(O.target.value),className:"h-16 text-xl pl-12",autoFocus:!0})]}),n.jsx(_,{className:"text-base mt-4",children:"2nd check temperature"}),n.jsxs("div",{className:"relative",children:[n.jsx(He,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground pointer-events-none"}),n.jsx(Y,{type:"number",step:"0.1",value:f,onChange:O=>x(O.target.value),placeholder:"21.0 or below",className:"h-16 text-xl pl-12 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"})]})]}),o===5&&n.jsxs("div",{className:"space-y-4",children:[n.jsx(_,{className:"text-base",children:"3rd temperature check"}),n.jsx(_,{className:"text-base mt-4",children:"3rd check time"}),n.jsxs("div",{className:"relative",children:[n.jsx(Zt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground pointer-events-none"}),n.jsx(Y,{type:"time",value:y,onChange:O=>N(O.target.value),className:"h-16 text-xl pl-12",autoFocus:!0})]}),n.jsx(_,{className:"text-base mt-4",children:"3rd check temperature"}),n.jsxs("div",{className:"relative",children:[n.jsx(He,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground pointer-events-none"}),n.jsx(Y,{type:"number",step:"0.1",value:b,onChange:O=>T(O.target.value),placeholder:"5.0 or below",className:"h-16 text-xl pl-12 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"})]})]}),o===6&&n.jsxs("div",{className:"space-y-4",children:[n.jsx(_,{className:"text-base",children:"Cooling Method"}),n.jsx(ce,{value:D,onChange:O=>E(O.target.value),placeholder:"e.g., Divided into 5x250mL containers, placed on cooling racks, then placed in fridge at 2nd temperature check",className:"min-h-[140px] text-lg",autoFocus:!0})]}),o===7&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"font-semibold text-lg",children:"Review Batch Check"}),n.jsxs("div",{className:"space-y-3 p-4 bg-muted/30 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Food Type"}),n.jsx("p",{className:"font-medium",children:l})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Date Cooked"}),n.jsx("p",{className:"font-medium",children:new Date(u).toLocaleDateString("en-NZ",{day:"numeric",month:"long",year:"numeric"})})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Start (60C)"}),n.jsxs("p",{className:"font-medium",children:[m," - ",j,"C"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"2nd Check (60C  21C)"}),n.jsxs("p",{className:"font-medium",children:[v," - ",f,"C"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"3rd Check (21C  5C)"}),n.jsxs("p",{className:"font-medium",children:[y," - ",b,"C"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Cooling Method"}),n.jsx("p",{className:"font-medium",children:D})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Completed By"}),n.jsx("p",{className:"font-medium",children:s==null?void 0:s.name})]})]})]})]}),n.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[o===1&&n.jsx(P,{variant:"outline",onClick:A,className:"flex-1",disabled:R,children:"Cancel"}),o>1&&n.jsx(P,{variant:"outline",onClick:W,className:"flex-1",disabled:R,children:"Back"}),o<I&&n.jsx(P,{onClick:F,className:"flex-1",disabled:o===1&&!l.trim()||o===3&&(!m||!j)||o===4&&(!v||!f)||o===5&&(!y||!b)||o===6&&!D.trim(),children:"Next"}),o===I&&n.jsx(P,{onClick:L,className:"flex-1",disabled:R,children:"Add Batch Check"})]})]})})}function pM(){const{records:e,isLoading:t,fetchFromGoogleSheets:r}=Fj(),[s,a]=d.useState([]),[o,i]=d.useState(!1),[l,c]=d.useState(new Set);d.useEffect(()=>{r()},[r]);const u=(p,f="info")=>{const x=Date.now();a(y=>[...y,{id:x,message:p,type:f}])},h=p=>{a(f=>f.filter(x=>x.id!==p))},m=()=>{u("Batch check record added successfully","success")},g=p=>{c(f=>{const x=new Set(f);return x.has(p)?x.delete(p):x.add(p),x})},j=p=>new Date(p).toLocaleDateString("en-NZ",{day:"numeric",month:"long",year:"numeric"}),w=p=>{if(p.includes("T"))return new Date(p).toLocaleTimeString("en-NZ",{hour:"numeric",minute:"2-digit",hour12:!0});const[f,x]=p.split(":").map(Number),y=f>=12?"PM":"AM";return`${f%12||12}:${x.toString().padStart(2,"0")} ${y}`},v=[...e].sort((p,f)=>new Date(f.timestamp).getTime()-new Date(p.timestamp).getTime()).slice(0,50);return n.jsxs("div",{className:"space-y-8 max-w-7xl mx-auto",children:[n.jsxs("div",{className:"space-y-2 text-center md:text-left",children:[n.jsxs("h2",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[n.jsx(fn,{className:"h-8 w-8"}),"Cooling Batch Checks"]}),n.jsx("p",{className:"text-muted-foreground text-lg",children:"Weekly cooling checks for freshly cooked food"})]}),n.jsxs(P,{size:"lg",onClick:()=>i(!0),className:"h-12 px-6 min-h-[48px] w-full sm:w-auto",children:[n.jsx(oe,{className:"h-5 w-5 mr-2"}),"Add Batch Check"]}),t&&n.jsxs("div",{className:"flex flex-col items-center justify-center p-8 space-y-3",children:[n.jsx(ke,{className:"h-8 w-8 animate-spin text-muted-foreground"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Fetching Data"})]}),!t&&v.length>0&&n.jsxs(V,{children:[n.jsx(ee,{children:n.jsx(te,{children:"Recent Batch Checks"})}),n.jsx(K,{children:n.jsx("div",{className:"space-y-2",children:v.map((p,f)=>{const x=l.has(p.id);return n.jsxs("div",{className:"border rounded-lg overflow-hidden transition-all duration-200 hover:border-primary/50",style:{animationDelay:`${f*50}ms`},children:[n.jsxs("div",{className:"flex items-center justify-between p-4 cursor-pointer bg-card hover:bg-muted/50 transition-colors",onClick:()=>g(p.id),children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[n.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center transition-colors ${x?"bg-primary text-primary-foreground":"bg-primary/10"}`,children:n.jsx(fn,{className:`h-5 w-5 ${x?"":"text-primary"}`})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"font-semibold text-lg truncate",children:p.foodType}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[j(p.dateCooked),"  ",p.startTemp,"C  ",p.secondTempCheck,"C  ",p.thirdTempCheck,"C"]})]})]}),n.jsx("div",{className:"flex items-center gap-2 ml-4",children:n.jsx(P,{variant:"ghost",size:"sm",className:"h-9 w-9 p-0",children:x?n.jsx(Bt,{className:"h-5 w-5"}):n.jsx(Et,{className:"h-5 w-5"})})})]}),x&&n.jsxs("div",{className:"border-t bg-muted/30 p-4 space-y-4 animate-in fade-in slide-in-from-top-2 duration-200",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:"Start Check"}),n.jsxs("p",{className:"text-sm",children:[n.jsxs("span",{className:"font-mono font-semibold",children:[p.startTemp,"C"]}),n.jsxs("span",{className:"text-muted-foreground ml-2",children:["at ",w(p.startTime)]})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:"2nd Check"}),n.jsxs("p",{className:"text-sm",children:[n.jsxs("span",{className:"font-mono font-semibold",children:[p.secondTempCheck,"C"]}),n.jsxs("span",{className:"text-muted-foreground ml-2",children:["at ",w(p.secondTimeCheck)]})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:"3rd Check"}),n.jsxs("p",{className:"text-sm",children:[n.jsxs("span",{className:"font-mono font-semibold",children:[p.thirdTempCheck,"C"]}),n.jsxs("span",{className:"text-muted-foreground ml-2",children:["at ",w(p.thirdTimeCheck)]})]})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:"Cooling Method"}),n.jsx("p",{className:"text-sm whitespace-pre-line leading-relaxed",children:p.coolingMethod})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:"Completed By"}),n.jsx("p",{className:"text-sm",children:p.completedBy})]})]})]},p.id)})})})]}),!t&&v.length===0&&n.jsx(V,{children:n.jsxs(K,{className:"flex flex-col items-center justify-center p-12",children:[n.jsx(fn,{className:"h-16 w-16 text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No batch checks yet"}),n.jsx("p",{className:"text-muted-foreground text-center mb-6",children:"Start tracking your cooling batch checks"}),n.jsxs(P,{onClick:()=>i(!0),children:[n.jsx(oe,{className:"mr-2 h-5 w-5"}),"Add First Check"]})]})}),n.jsx(hM,{open:o,onClose:()=>i(!1),onSuccess:m}),n.jsx(yn,{children:s.map(p=>n.jsx(vn,{message:p.message,type:p.type,onClose:()=>h(p.id)},p.id))})]})}const em="https://script.google.com/macros/s/AKfycbwmSfN7KKDheU7KVXD3EyYkCApSN_Git6XgnG6yHaX7QENXlHlrvngCzHO582yVE68gHA/exec";async function kh(e){try{const t={id:e.id,dishName:e.dishName,ingredients:e.ingredients,allergens:e.allergens,createdBy:e.createdBy,createdAt:e.createdAt,updatedAt:e.updatedAt,status:e.status,unixTimestamp:Math.floor(new Date(e.createdAt).getTime()/1e3)};return await fetch(em,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),{success:!0}}catch(t){return console.error(" Error saving to Google Sheets:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}async function xM(e){try{const t={id:e.id,dishName:e.dishName,ingredients:e.ingredients,allergens:e.allergens,createdBy:e.createdBy,createdAt:e.createdAt,updatedAt:new Date().toISOString(),status:"deleted",unixTimestamp:Math.floor(new Date(e.createdAt).getTime()/1e3)};return await fetch(em,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),{success:!0}}catch(t){return console.error(" Error deleting from Google Sheets:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}const _j=_e()(Le((e,t)=>({records:[],isLoading:!1,lastFetchTime:null,fetchError:null,fetchFromGoogleSheets:async()=>{e({isLoading:!0,fetchError:null});try{const r=await fetch(em,{method:"GET"});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const s=await r.json();if(s.success&&s.data)e({records:s.data,lastFetchTime:new Date().toISOString(),fetchError:null});else throw new Error(s.error||"Failed to fetch data")}catch(r){console.error("Error fetching from Google Sheets:",r),e({fetchError:r instanceof Error?r.message:"Unknown error"})}finally{e({isLoading:!1})}},addRecord:r=>{e(s=>({records:[r,...s.records]}))},updateRecord:(r,s)=>{e(a=>({records:a.records.map(o=>o.id===r?{...o,...s,updatedAt:new Date().toISOString()}:o)}))},deleteRecord:r=>{e(s=>({records:s.records.map(a=>a.id===r?{...a,status:"deleted",updatedAt:new Date().toISOString()}:a)}))},getRecords:()=>t().records.filter(r=>r.status!=="deleted"),getRecordById:r=>t().records.find(s=>s.id===r)}),{name:"taquero-allergens"}));function gM(e){const t=d.useRef({value:e,previous:e});return d.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var dl="Checkbox",[vM]=gr(dl),[yM,tm]=vM(dl);function jM(e){const{__scopeCheckbox:t,checked:r,children:s,defaultChecked:a,disabled:o,form:i,name:l,onCheckedChange:c,required:u,value:h="on",internal_do_not_use_render:m}=e,[g,j]=Xi({prop:r,defaultProp:a??!1,onChange:c,caller:dl}),[w,v]=d.useState(null),[p,f]=d.useState(null),x=d.useRef(!1),y=w?!!i||!!w.closest("form"):!0,N={checked:g,disabled:o,setChecked:j,control:w,setControl:v,name:l,form:i,value:h,hasConsumerStoppedPropagationRef:x,required:u,defaultChecked:or(a)?!1:a,isFormControl:y,bubbleInput:p,setBubbleInput:f};return n.jsx(yM,{scope:t,...N,children:wM(m)?m(N):s})}var Lj="CheckboxTrigger",$j=d.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...s},a)=>{const{control:o,value:i,disabled:l,checked:c,required:u,setControl:h,setChecked:m,hasConsumerStoppedPropagationRef:g,isFormControl:j,bubbleInput:w}=tm(Lj,e),v=Re(a,h),p=d.useRef(c);return d.useEffect(()=>{const f=o==null?void 0:o.form;if(f){const x=()=>m(p.current);return f.addEventListener("reset",x),()=>f.removeEventListener("reset",x)}},[o,m]),n.jsx(be.button,{type:"button",role:"checkbox","aria-checked":or(c)?"mixed":c,"aria-required":u,"data-state":Yj(c),"data-disabled":l?"":void 0,disabled:l,value:i,...s,ref:v,onKeyDown:re(t,f=>{f.key==="Enter"&&f.preventDefault()}),onClick:re(r,f=>{m(x=>or(x)?!0:!x),w&&j&&(g.current=f.isPropagationStopped(),g.current||f.stopPropagation())})})});$j.displayName=Lj;var nm=d.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:s,checked:a,defaultChecked:o,required:i,disabled:l,value:c,onCheckedChange:u,form:h,...m}=e;return n.jsx(jM,{__scopeCheckbox:r,checked:a,defaultChecked:o,disabled:l,required:i,onCheckedChange:u,name:s,form:h,value:c,internal_do_not_use_render:({isFormControl:g})=>n.jsxs(n.Fragment,{children:[n.jsx($j,{...m,ref:t,__scopeCheckbox:r}),g&&n.jsx(Uj,{__scopeCheckbox:r})]})})});nm.displayName=dl;var Bj="CheckboxIndicator",zj=d.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:s,...a}=e,o=tm(Bj,r);return n.jsx(Fn,{present:s||or(o.checked)||o.checked===!0,children:n.jsx(be.span,{"data-state":Yj(o.checked),"data-disabled":o.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});zj.displayName=Bj;var Wj="CheckboxBubbleInput",Uj=d.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:s,hasConsumerStoppedPropagationRef:a,checked:o,defaultChecked:i,required:l,disabled:c,name:u,value:h,form:m,bubbleInput:g,setBubbleInput:j}=tm(Wj,e),w=Re(r,j),v=gM(o),p=av(s);d.useEffect(()=>{const x=g;if(!x)return;const y=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(y,"checked").set,T=!a.current;if(v!==o&&b){const D=new Event("click",{bubbles:T});x.indeterminate=or(o),b.call(x,or(o)?!1:o),x.dispatchEvent(D)}},[g,v,o,a]);const f=d.useRef(or(o)?!1:o);return n.jsx(be.input,{type:"checkbox","aria-hidden":!0,defaultChecked:i??f.current,required:l,disabled:c,name:u,value:h,form:m,...t,tabIndex:-1,ref:w,style:{...t.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Uj.displayName=Wj;function wM(e){return typeof e=="function"}function or(e){return e==="indeterminate"}function Yj(e){return or(e)?"indeterminate":e?"checked":"unchecked"}const Ya=d.forwardRef(({className:e,...t},r)=>n.jsx(nm,{ref:r,className:X("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:n.jsx(zj,{className:X("flex items-center justify-center text-current"),children:n.jsx(pu,{className:"h-4 w-4"})})}));Ya.displayName=nm.displayName;const NM=["Gluten","Milk","Egg","Soy","Peanuts","Nuts","Fish","Sesame","Sulphites","Crustacea"];function bM({open:e,onClose:t,onSuccess:r,editingRecord:s}){const{currentUser:a}=Ie(),{addRecord:o,updateRecord:i}=_j(),[l,c]=d.useState(1),[u,h]=d.useState(""),[m,g]=d.useState(""),[j,w]=d.useState([]),[v,p]=d.useState(!1),[f,x]=d.useState(!1),y=!!s,N=3,b=l/N*100;d.useEffect(()=>{s&&e&&(h(s.dishName),g(s.ingredients),w(s.allergens))},[s,e]);const T=()=>{c(1),h(""),g(""),w([]),p(!1)},D=()=>{v&&!y&&!window.confirm("You have unsaved data. Are you sure you want to close?")||(T(),t())},E=()=>{l===1&&p(!0),l<N&&c(l+1)},S=()=>{l>1&&c(l-1)},C=I=>{w(B=>B.includes(I)?B.filter(z=>z!==I):[...B,I])},R=async()=>{if(!a){alert("Error: No user logged in");return}x(!0);try{if(y&&s){const I={...s,dishName:u,ingredients:m,allergens:j,updatedAt:new Date().toISOString()},B=await kh(I);B.success||console.warn(" Failed to save to Google Sheets:",B.error),i(s.id,{dishName:u,ingredients:m,allergens:j})}else{const B={id:`allergen-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,dishName:u,ingredients:m,allergens:j,createdBy:a.name,createdAt:new Date().toISOString(),status:"active"},z=await kh(B);z.success||console.warn(" Failed to save to Google Sheets:",z.error),o(B)}T(),t(),r==null||r()}catch(I){console.error(" Error saving record:",I),alert("Error saving record. Please try again.")}finally{x(!1)}},k=u.trim().length>0,M=m.trim().length>0,$=j.length>0;return n.jsx(Pe,{open:e,onOpenChange:D,children:n.jsxs(De,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[f&&n.jsx("div",{className:"absolute inset-0 bg-background/80 backdrop-blur-sm z-50 flex items-center justify-center rounded-lg",children:n.jsxs("div",{className:"flex flex-col items-center gap-3",children:[n.jsx(ke,{className:"h-8 w-8 animate-spin text-muted-foreground"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Saving Data"})]})}),n.jsx(Te,{children:n.jsx(Ee,{children:y?"Edit Allergen Record":"Add Allergen Record"})}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[n.jsxs("span",{children:["Step ",l," of ",N]}),n.jsxs("span",{children:[Math.round(b),"%"]})]}),n.jsx($e,{value:b,className:"h-2"})]}),n.jsxs("div",{className:"space-y-6 py-4",children:[l===1&&n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"flex items-start gap-4 p-4 rounded-lg border bg-muted/30",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0",children:n.jsx(Dn,{className:"h-5 w-5 text-primary"})}),n.jsxs("div",{className:"flex-1 space-y-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-lg",children:"Dish Name"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Enter the name of the dish or menu item"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"dishName",children:"Dish Name *"}),n.jsx(Y,{id:"dishName",value:u,onChange:I=>h(I.target.value),placeholder:"e.g., Cookie, Beef Tacos, Caesar Salad",className:"text-base",autoFocus:!0})]})]})]})}),l===2&&n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"flex items-start gap-4 p-4 rounded-lg border bg-muted/30",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0",children:n.jsx(qb,{className:"h-5 w-5 text-primary"})}),n.jsxs("div",{className:"flex-1 space-y-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-lg",children:"Ingredients"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"List all ingredients used in this dish"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"ingredients",children:"Ingredients *"}),n.jsx(ce,{id:"ingredients",value:m,onChange:I=>g(I.target.value),placeholder:"e.g., Flour, eggs, butter, milk, sugar, chocolate chips",className:"text-base min-h-[120px]",autoFocus:!0}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Separate ingredients with commas or new lines"})]})]})]})}),l===3&&n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"flex items-start gap-4 p-4 rounded-lg border bg-muted/30",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-500/10 flex items-center justify-center flex-shrink-0",children:n.jsx(Zn,{className:"h-5 w-5 text-amber-600"})}),n.jsxs("div",{className:"flex-1 space-y-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-lg",children:"Allergens"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Select all allergens present in this dish"})]}),n.jsx("div",{className:"space-y-3",children:n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:NM.map(I=>n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ya,{id:`allergen-${I}`,checked:j.includes(I),onCheckedChange:()=>C(I)}),n.jsx(_,{htmlFor:`allergen-${I}`,className:"text-sm font-normal cursor-pointer",children:I})]},I))})}),j.length>0&&n.jsxs("div",{className:"pt-2",children:[n.jsxs("p",{className:"text-sm font-medium",children:["Selected allergens (",j.length,"):"]}),n.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:j.map(I=>n.jsx("span",{className:"inline-block px-2 py-1 text-xs font-medium rounded-full bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-300",children:I},I))})]})]})]})})]}),n.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[n.jsx("div",{children:l===1?n.jsx(P,{variant:"outline",onClick:D,children:"Cancel"}):n.jsx(P,{variant:"outline",onClick:S,children:"Back"})}),n.jsx("div",{children:l<N?n.jsx(P,{onClick:E,disabled:l===1&&!k||l===2&&!M,children:"Next"}):n.jsx(P,{onClick:R,disabled:!$||f,children:y?"Update Record":"Save Record"})})]})]})})}function SM(){const{records:e,isLoading:t,fetchFromGoogleSheets:r,deleteRecord:s}=_j(),[a,o]=d.useState([]),[i,l]=d.useState(!1),[c,u]=d.useState(null),[h,m]=d.useState(new Set),[g,j]=d.useState(!1),[w,v]=d.useState(null);d.useEffect(()=>{r()},[r]);const p=(S,C="info")=>{const R=Date.now();o(k=>[...k,{id:R,message:S,type:C}])},f=S=>{o(C=>C.filter(R=>R.id!==S))},x=()=>{p("Allergen record added successfully","success")},y=()=>{p("Allergen record updated successfully","success")},N=S=>{u(S),l(!0)},b=S=>{v(S),j(!0)},T=async()=>{w&&(await xM(w),s(w.id),p("Allergen record deleted successfully","success"),v(null)),j(!1)},D=S=>{m(C=>{const R=new Set(C);return R.has(S)?R.delete(S):R.add(S),R})},E=[...e].sort((S,C)=>new Date(C.createdAt).getTime()-new Date(S.createdAt).getTime()).slice(0,50);return n.jsxs("div",{className:"space-y-8 max-w-7xl mx-auto",children:[n.jsxs("div",{className:"space-y-2 text-center md:text-left",children:[n.jsxs("h2",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[n.jsx(Dn,{className:"h-8 w-8"}),"Allergens in My Food"]}),n.jsx("p",{className:"text-muted-foreground text-lg",children:"Track allergens in your dishes to help inform customers"})]}),n.jsxs(P,{size:"lg",onClick:()=>{u(null),l(!0)},className:"h-12 px-6 min-h-[48px] w-full sm:w-auto",children:[n.jsx(oe,{className:"h-5 w-5 mr-2"}),"Add Allergen Record"]}),t&&n.jsxs("div",{className:"flex flex-col items-center justify-center p-8 space-y-3",children:[n.jsx(ke,{className:"h-8 w-8 animate-spin text-muted-foreground"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Fetching Data"})]}),!t&&E.length>0&&n.jsxs(V,{children:[n.jsx(ee,{children:n.jsx(te,{children:"Allergen Records"})}),n.jsx(K,{children:n.jsx("div",{className:"space-y-2",children:E.map((S,C)=>{const R=h.has(S.id);return n.jsxs("div",{className:"border rounded-lg overflow-hidden transition-all duration-200 hover:border-primary/50",style:{animationDelay:`${C*50}ms`},children:[n.jsxs("div",{className:"flex items-center justify-between p-4 cursor-pointer bg-card hover:bg-muted/50 transition-colors",onClick:()=>D(S.id),children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[n.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center transition-colors ${R?"bg-primary text-primary-foreground":"bg-primary/10"}`,children:n.jsx(Dn,{className:`h-5 w-5 ${R?"":"text-primary"}`})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"font-semibold text-lg truncate",children:S.dishName}),n.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[S.allergens.slice(0,3).map((k,M)=>n.jsx("span",{className:"inline-block px-2 py-0.5 text-xs font-medium rounded-full bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-300",children:k},M)),S.allergens.length>3&&n.jsxs("span",{className:"inline-block px-2 py-0.5 text-xs font-medium rounded-full bg-muted text-muted-foreground",children:["+",S.allergens.length-3," more"]})]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[n.jsx(P,{variant:"ghost",size:"sm",onClick:k=>{k.stopPropagation(),N(S)},className:"h-9 w-9 p-0",children:n.jsx(Lt,{className:"h-4 w-4"})}),n.jsx(P,{variant:"ghost",size:"sm",onClick:k=>{k.stopPropagation(),b(S)},className:"h-9 w-9 p-0",children:n.jsx(Mt,{className:"h-4 w-4 text-destructive"})}),n.jsx(P,{variant:"ghost",size:"sm",className:"h-9 w-9 p-0",children:R?n.jsx(Bt,{className:"h-5 w-5"}):n.jsx(Et,{className:"h-5 w-5"})})]})]}),R&&n.jsxs("div",{className:"border-t bg-muted/30 p-4 space-y-4 animate-in fade-in slide-in-from-top-2 duration-200",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:"Ingredients"}),n.jsx("p",{className:"text-sm whitespace-pre-wrap leading-relaxed",children:S.ingredients})]}),n.jsxs("div",{children:[n.jsxs("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:["All Allergens (",S.allergens.length,")"]}),n.jsx("ul",{className:"space-y-1.5",children:S.allergens.map((k,M)=>n.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[n.jsx("span",{className:"inline-block w-1.5 h-1.5 rounded-full bg-amber-600 dark:bg-amber-400 mt-1.5 flex-shrink-0"}),n.jsx("span",{className:"leading-relaxed",children:k})]},M))})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-2 border-t",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:"Created By"}),n.jsx("p",{className:"text-sm font-medium mt-1",children:S.createdBy})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:"Created"}),n.jsx("p",{className:"text-sm font-medium mt-1",children:new Date(S.createdAt).toLocaleDateString("en-NZ",{day:"numeric",month:"long",year:"numeric"})})]})]}),S.updatedAt&&n.jsxs("div",{className:"text-xs text-muted-foreground pt-2",children:["Last updated: ",new Date(S.updatedAt).toLocaleDateString("en-NZ",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})]})]})]},S.id)})})})]}),!t&&E.length===0&&n.jsx(V,{children:n.jsxs(K,{className:"flex flex-col items-center justify-center p-12",children:[n.jsx(Dn,{className:"h-16 w-16 text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No allergen records yet"}),n.jsx("p",{className:"text-muted-foreground text-center mb-6",children:"Start tracking allergens in your dishes to inform customers"}),n.jsxs(P,{onClick:()=>l(!0),children:[n.jsx(oe,{className:"mr-2 h-5 w-5"}),"Add First Allergen Record"]})]})}),n.jsx(bM,{open:i,onClose:()=>{l(!1),u(null)},onSuccess:c?y:x,editingRecord:c}),n.jsx(jt,{open:g,onOpenChange:j,children:n.jsxs(at,{children:[n.jsxs(ot,{children:[n.jsx(lt,{children:"Delete Allergen Record"}),n.jsxs(ct,{children:['Are you sure you want to delete the allergen record for "',w==null?void 0:w.dishName,'"? This action cannot be undone.']})]}),n.jsxs(it,{children:[n.jsx(ut,{onClick:()=>v(null),children:"Cancel"}),n.jsx(dt,{onClick:T,className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})}),n.jsx(yn,{children:a.map(S=>n.jsx(vn,{message:S.message,type:S.type,onClose:()=>f(S.id)},S.id))})]})}const rm="https://script.google.com/macros/s/AKfycbxBp8M_cohQeaUNZP5R5nQrJ00XcQUfUCSF92_dAFj9ppPGkBE769DuAo-cMMNiGGcY/exec";async function Dh(e){try{const t={id:e.id,businessName:e.businessName,siteRegistrationNumber:e.siteRegistrationNumber,contactPerson:e.contactPerson,phone:e.phone,email:e.email,address:e.address,orderDays:e.orderDays,deliveryDays:e.deliveryDays,customArrangement:e.customArrangement,goodsSupplied:e.goodsSupplied,comments:e.comments,createdBy:e.createdBy,createdAt:e.createdAt,updatedAt:e.updatedAt,status:e.status,unixTimestamp:Math.floor(new Date(e.createdAt).getTime()/1e3)};return await fetch(rm,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),{success:!0}}catch(t){return console.error(" Error saving to Google Sheets:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}async function CM(e){try{const t={id:e.id,businessName:e.businessName,siteRegistrationNumber:e.siteRegistrationNumber,contactPerson:e.contactPerson,phone:e.phone,email:e.email,address:e.address,orderDays:e.orderDays,deliveryDays:e.deliveryDays,customArrangement:e.customArrangement,goodsSupplied:e.goodsSupplied,comments:e.comments,createdBy:e.createdBy,createdAt:e.createdAt,updatedAt:new Date().toISOString(),status:"deleted",unixTimestamp:Math.floor(new Date(e.createdAt).getTime()/1e3)};return await fetch(rm,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),{success:!0}}catch(t){return console.error(" Error deleting from Google Sheets:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}const Gj=_e()(Le((e,t)=>({records:[],isLoading:!1,lastFetchTime:null,fetchError:null,fetchFromGoogleSheets:async()=>{e({isLoading:!0,fetchError:null});try{const r=await fetch(rm,{method:"GET"});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const s=await r.json();if(s.success&&s.data)e({records:s.data,lastFetchTime:new Date().toISOString(),fetchError:null});else throw new Error(s.error||"Failed to fetch data")}catch(r){console.error("Error fetching from Google Sheets:",r),e({fetchError:r instanceof Error?r.message:"Unknown error"})}finally{e({isLoading:!1})}},addRecord:r=>{e(s=>({records:[r,...s.records]}))},updateRecord:(r,s)=>{e(a=>({records:a.records.map(o=>o.id===r?{...o,...s,updatedAt:new Date().toISOString()}:o)}))},deleteRecord:r=>{e(s=>({records:s.records.map(a=>a.id===r?{...a,status:"deleted",updatedAt:new Date().toISOString()}:a)}))},getRecords:()=>t().records.filter(r=>r.status!=="deleted"),getRecordById:r=>t().records.find(s=>s.id===r)}),{name:"taquero-suppliers"})),Th=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];function kM({open:e,onClose:t,onSuccess:r,editingRecord:s}){const{currentUser:a}=Ie(),{addRecord:o,updateRecord:i}=Gj(),[l,c]=d.useState(1),[u,h]=d.useState(""),[m,g]=d.useState(""),[j,w]=d.useState(""),[v,p]=d.useState(""),[f,x]=d.useState(""),[y,N]=d.useState(""),[b,T]=d.useState([]),[D,E]=d.useState([]),[S,C]=d.useState(""),[R,k]=d.useState(""),[M,$]=d.useState(""),[I,B]=d.useState(!1),[z,A]=d.useState(!1),F=!!s,W=4,L=l/W*100;d.useEffect(()=>{s&&e&&(h(s.businessName),g(s.siteRegistrationNumber||""),w(s.contactPerson),p(s.phone||""),x(s.email||""),N(s.address),T(s.orderDays),E(s.deliveryDays),C(s.customArrangement||""),k(s.goodsSupplied),$(s.comments||""))},[s,e]);const O=()=>{c(1),h(""),g(""),w(""),p(""),x(""),N(""),T([]),E([]),C(""),k(""),$(""),B(!1)},H=()=>{I&&!F&&!window.confirm("You have unsaved data. Are you sure you want to close?")||(O(),t())},J=()=>{l===1&&B(!0),l<W&&c(l+1)},me=()=>{l>1&&c(l-1)},he=Z=>{S.trim().length>0&&C(""),T(tt=>tt.includes(Z)?tt.filter(Ln=>Ln!==Z):[...tt,Z])},ye=Z=>{S.trim().length>0&&C(""),E(tt=>tt.includes(Z)?tt.filter(Ln=>Ln!==Z):[...tt,Z])},zt=Z=>{Z.trim().length>0&&(b.length>0||D.length>0)&&(T([]),E([])),C(Z)},We=async()=>{if(!a){alert("Error: No user logged in");return}A(!0);try{if(F&&s){const Z={...s,businessName:u,siteRegistrationNumber:m.trim()||void 0,contactPerson:j,phone:v.trim()||void 0,email:f.trim()||void 0,address:y,orderDays:b,deliveryDays:D,customArrangement:S.trim()||void 0,goodsSupplied:R,comments:M.trim()||void 0,updatedAt:new Date().toISOString()},tt=await Dh(Z);tt.success||console.warn(" Failed to save to Google Sheets:",tt.error),i(s.id,{businessName:u,siteRegistrationNumber:m.trim()||void 0,contactPerson:j,phone:v.trim()||void 0,email:f.trim()||void 0,address:y,orderDays:b,deliveryDays:D,customArrangement:S.trim()||void 0,goodsSupplied:R,comments:M.trim()||void 0})}else{const tt={id:`supplier-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,businessName:u,siteRegistrationNumber:m.trim()||void 0,contactPerson:j,phone:v.trim()||void 0,email:f.trim()||void 0,address:y,orderDays:b,deliveryDays:D,customArrangement:S.trim()||void 0,goodsSupplied:R,comments:M.trim()||void 0,createdBy:a.name,createdAt:new Date().toISOString(),status:"active"},Ln=await Dh(tt);Ln.success||console.warn(" Failed to save to Google Sheets:",Ln.error),o(tt)}O(),t(),r==null||r()}catch(Z){console.error(" Error saving record:",Z),alert("Error saving record. Please try again.")}finally{A(!1)}},Wt=u.trim().length>0,G=j.trim().length>0&&y.trim().length>0,Ut=b.length>0&&D.length>0||S.trim().length>0,vr=R.trim().length>0;return n.jsx(Pe,{open:e,onOpenChange:H,children:n.jsxs(De,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[z&&n.jsx("div",{className:"absolute inset-0 bg-background/80 backdrop-blur-sm z-50 flex items-center justify-center rounded-lg",children:n.jsxs("div",{className:"flex flex-col items-center gap-4",children:[n.jsx("div",{className:"h-12 w-12 animate-spin rounded-full border-4 border-primary border-t-transparent"}),n.jsx("div",{className:"text-lg font-semibold",children:"Saving to Google Sheets..."})]})}),n.jsx(Te,{children:n.jsx(Ee,{children:F?"Edit Supplier":"Add Trusted Supplier"})}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[n.jsxs("span",{children:["Step ",l," of ",W]}),n.jsxs("span",{children:[Math.round(L),"%"]})]}),n.jsx($e,{value:L,className:"h-2"})]}),n.jsxs("div",{className:"space-y-6 py-4",children:[l===1&&n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"flex items-start gap-4 p-4 rounded-lg border bg-muted/30",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0",children:n.jsx(Er,{className:"h-5 w-5 text-primary"})}),n.jsxs("div",{className:"flex-1 space-y-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-lg",children:"Business Information"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Enter the supplier's business details"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"businessName",children:"Business Name *"}),n.jsx(Y,{id:"businessName",value:u,onChange:Z=>h(Z.target.value),placeholder:"e.g., Cheesy Pete",className:"text-base",autoFocus:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"siteRegistrationNumber",children:"Site Registration Number (optional)"}),n.jsx(Y,{id:"siteRegistrationNumber",value:m,onChange:Z=>g(Z.target.value),placeholder:"e.g., MPI000010",className:"text-base font-mono"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"MPI registration number under Food Act or Animal Products Act"})]})]})]})}),l===2&&n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"flex items-start gap-4 p-4 rounded-lg border bg-muted/30",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0",children:n.jsx(Zi,{className:"h-5 w-5 text-primary"})}),n.jsxs("div",{className:"flex-1 space-y-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-lg",children:"Contact Information"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Enter contact details for this supplier"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"contactPerson",children:"Contact Person *"}),n.jsx(Y,{id:"contactPerson",value:j,onChange:Z=>w(Z.target.value),placeholder:"e.g., Peter Ronnie",className:"text-base",autoFocus:!0})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"phone",children:"Phone (optional)"}),n.jsx(Y,{id:"phone",value:v,onChange:Z=>p(Z.target.value),placeholder:"e.g., 021 123 456",className:"text-base"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"email",children:"Email (optional)"}),n.jsx(Y,{id:"email",type:"email",value:f,onChange:Z=>x(Z.target.value),placeholder:"e.g., orders@cheesypete.co.nz",className:"text-base"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"address",children:"Address *"}),n.jsx(ce,{id:"address",value:y,onChange:Z=>N(Z.target.value),placeholder:`e.g., Cheesy Pete
44 Main Street
Cityville`,className:"text-base min-h-[100px]"})]})]})]})}),l===3&&n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"flex items-start gap-4 p-4 rounded-lg border bg-muted/30",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0",children:n.jsx(Ki,{className:"h-5 w-5 text-primary"})}),n.jsxs("div",{className:"flex-1 space-y-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-lg",children:"Order & Delivery Schedule"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Select the days for ordering and delivery, or specify a custom arrangement"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(_,{children:"Days to place orders"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:Th.map(Z=>n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ya,{id:`order-${Z}`,checked:b.includes(Z),onCheckedChange:()=>he(Z)}),n.jsx(_,{htmlFor:`order-${Z}`,className:"text-sm font-normal cursor-pointer",children:Z})]},Z))})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(_,{children:"Days to receive delivery"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:Th.map(Z=>n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ya,{id:`delivery-${Z}`,checked:D.includes(Z),onCheckedChange:()=>ye(Z)}),n.jsx(_,{htmlFor:`delivery-${Z}`,className:"text-sm font-normal cursor-pointer",children:Z})]},Z))})]}),n.jsxs("div",{className:"space-y-2 pt-3 border-t",children:[n.jsx(_,{htmlFor:"customArrangement",children:"Custom arrangement (optional)"}),n.jsx(ce,{id:"customArrangement",value:S,onChange:Z=>zt(Z.target.value),placeholder:`e.g., We arrange deliveries on an ad-hoc basis
No fixed schedule - call when needed`,className:"text-base min-h-[80px]"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Use this if you have a custom arrangement instead of fixed days"})]})]})]})}),l===4&&n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"flex items-start gap-4 p-4 rounded-lg border bg-muted/30",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0",children:n.jsx(Fg,{className:"h-5 w-5 text-primary"})}),n.jsxs("div",{className:"flex-1 space-y-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-lg",children:"Products & Notes"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"List the goods supplied and any additional notes"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"goodsSupplied",children:"Goods Supplied *"}),n.jsx(ce,{id:"goodsSupplied",value:R,onChange:Z=>k(Z.target.value),placeholder:`e.g., cheddar
brie
mozzarella`,className:"text-base min-h-[120px]",autoFocus:!0}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"List each product on a new line"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"comments",children:"Comments (optional)"}),n.jsx(ce,{id:"comments",value:M,onChange:Z=>$(Z.target.value),placeholder:`e.g., doesn't like last minute orders but can do next day delivery
closes at 2pm on thursdays`,className:"text-base min-h-[100px]"})]})]})]})})]}),n.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[n.jsx("div",{children:l===1?n.jsx(P,{variant:"outline",onClick:H,children:"Cancel"}):n.jsx(P,{variant:"outline",onClick:me,children:"Back"})}),n.jsx("div",{children:l<W?n.jsx(P,{onClick:J,disabled:l===1&&!Wt||l===2&&!G||l===3&&!Ut,children:"Next"}):n.jsx(P,{onClick:We,disabled:!vr||z,children:F?"Update Supplier":"Add Supplier"})})]})]})})}function DM(){const{records:e,isLoading:t,fetchFromGoogleSheets:r,deleteRecord:s}=Gj(),[a,o]=d.useState([]),[i,l]=d.useState(!1),[c,u]=d.useState(null),[h,m]=d.useState(new Set),[g,j]=d.useState(!1),[w,v]=d.useState(null);d.useEffect(()=>{r()},[r]);const p=(S,C="info")=>{const R=Date.now();o(k=>[...k,{id:R,message:S,type:C}])},f=S=>{o(C=>C.filter(R=>R.id!==S))},x=()=>{p("Supplier added successfully","success")},y=()=>{p("Supplier updated successfully","success")},N=S=>{u(S),l(!0)},b=S=>{v(S),j(!0)},T=async()=>{w&&(await CM(w),s(w.id),p("Supplier deleted successfully","success"),v(null)),j(!1)},D=S=>{m(C=>{const R=new Set(C);return R.has(S)?R.delete(S):R.add(S),R})},E=[...e].sort((S,C)=>new Date(C.createdAt).getTime()-new Date(S.createdAt).getTime()).slice(0,50);return n.jsxs("div",{className:"space-y-8 max-w-7xl mx-auto",children:[n.jsxs("div",{className:"space-y-2 text-center md:text-left",children:[n.jsxs("h2",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[n.jsx(hn,{className:"h-8 w-8"}),"My Trusted Suppliers"]}),n.jsx("p",{className:"text-muted-foreground text-lg",children:"Track trusted suppliers for food safety and recall purposes"})]}),n.jsxs(P,{size:"lg",onClick:()=>{u(null),l(!0)},className:"h-12 px-6 min-h-[48px] w-full sm:w-auto",children:[n.jsx(oe,{className:"h-5 w-5 mr-2"}),"Add Supplier"]}),t&&n.jsxs("div",{className:"flex flex-col items-center justify-center p-8 space-y-3",children:[n.jsx(ke,{className:"h-8 w-8 animate-spin text-muted-foreground"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Fetching Data"})]}),!t&&E.length>0&&n.jsxs(V,{children:[n.jsx(ee,{children:n.jsx(te,{children:"Trusted Suppliers"})}),n.jsx(K,{children:n.jsx("div",{className:"space-y-2",children:E.map((S,C)=>{const R=h.has(S.id);return n.jsxs("div",{className:"border rounded-lg overflow-hidden transition-all duration-200 hover:border-primary/50",style:{animationDelay:`${C*50}ms`},children:[n.jsxs("div",{className:"flex items-center justify-between p-4 cursor-pointer bg-card hover:bg-muted/50 transition-colors",onClick:()=>D(S.id),children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[n.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center transition-colors ${R?"bg-primary text-primary-foreground":"bg-primary/10"}`,children:n.jsx(hn,{className:`h-5 w-5 ${R?"":"text-primary"}`})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"font-semibold text-lg truncate",children:S.businessName}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[S.contactPerson,"  ",S.phone]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[n.jsx(P,{variant:"ghost",size:"sm",onClick:k=>{k.stopPropagation(),N(S)},className:"h-9 w-9 p-0",children:n.jsx(Lt,{className:"h-4 w-4"})}),n.jsx(P,{variant:"ghost",size:"sm",onClick:k=>{k.stopPropagation(),b(S)},className:"h-9 w-9 p-0",children:n.jsx(Mt,{className:"h-4 w-4 text-destructive"})}),n.jsx(P,{variant:"ghost",size:"sm",className:"h-9 w-9 p-0",children:R?n.jsx(Bt,{className:"h-5 w-5"}):n.jsx(Et,{className:"h-5 w-5"})})]})]}),R&&n.jsxs("div",{className:"border-t bg-muted/30 p-4 space-y-4 animate-in fade-in slide-in-from-top-2 duration-200",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:"Email"}),n.jsx("p",{className:"text-sm",children:S.email})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:"Registration #"}),n.jsx("p",{className:"text-sm font-mono",children:S.siteRegistrationNumber})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:"Address"}),n.jsx("p",{className:"text-sm whitespace-pre-line leading-relaxed",children:S.address})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:"Order Days"}),S.orderDays.length>0?n.jsx("div",{className:"flex flex-wrap gap-1",children:S.orderDays.map((k,M)=>n.jsx("span",{className:"inline-block px-2 py-0.5 text-xs font-medium rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",children:k},M))}):n.jsx("p",{className:"text-sm text-muted-foreground",children:"N/A"})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:"Delivery Days"}),S.deliveryDays.length>0?n.jsx("div",{className:"flex flex-wrap gap-1",children:S.deliveryDays.map((k,M)=>n.jsx("span",{className:"inline-block px-2 py-0.5 text-xs font-medium rounded-full bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",children:k},M))}):n.jsx("p",{className:"text-sm text-muted-foreground",children:"N/A"})]})]}),S.customArrangement&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:"Custom Arrangement"}),n.jsx("p",{className:"text-sm whitespace-pre-line leading-relaxed",children:S.customArrangement})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:"Goods Supplied"}),n.jsx("p",{className:"text-sm whitespace-pre-line leading-relaxed",children:S.goodsSupplied})]}),S.comments&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:"Comments"}),n.jsx("p",{className:"text-sm whitespace-pre-line leading-relaxed",children:S.comments})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-2 border-t",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:"Created By"}),n.jsx("p",{className:"text-sm font-medium mt-1",children:S.createdBy})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:"Created"}),n.jsx("p",{className:"text-sm font-medium mt-1",children:new Date(S.createdAt).toLocaleDateString("en-NZ",{day:"numeric",month:"long",year:"numeric"})})]})]}),S.updatedAt&&n.jsxs("div",{className:"text-xs text-muted-foreground pt-2",children:["Last updated: ",new Date(S.updatedAt).toLocaleDateString("en-NZ",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})]})]})]},S.id)})})})]}),!t&&E.length===0&&n.jsx(V,{children:n.jsxs(K,{className:"flex flex-col items-center justify-center p-12",children:[n.jsx(hn,{className:"h-16 w-16 text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No suppliers yet"}),n.jsx("p",{className:"text-muted-foreground text-center mb-6",children:"Start tracking your trusted suppliers for food safety"}),n.jsxs(P,{onClick:()=>l(!0),children:[n.jsx(oe,{className:"mr-2 h-5 w-5"}),"Add First Supplier"]})]})}),n.jsx(kM,{open:i,onClose:()=>{l(!1),u(null)},onSuccess:c?y:x,editingRecord:c}),n.jsx(jt,{open:g,onOpenChange:j,children:n.jsxs(at,{children:[n.jsxs(ot,{children:[n.jsx(lt,{children:"Delete Supplier"}),n.jsxs(ct,{children:['Are you sure you want to delete "',w==null?void 0:w.businessName,'"? This action cannot be undone.']})]}),n.jsxs(it,{children:[n.jsx(ut,{onClick:()=>v(null),children:"Cancel"}),n.jsx(dt,{onClick:T,className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})}),n.jsx(yn,{children:a.map(S=>n.jsx(vn,{message:S.message,type:S.type,onClose:()=>f(S.id)},S.id))})]})}const sm="https://script.google.com/macros/s/AKfycbySJO0jwPwx04IFLE9ZfNQRGKPzNW0X9h64fOZfjnag3SZ9sH2Bh49SDntXrK8ycOaq9Q/exec";async function Eh(e){try{const t={id:e.id,deliveryDate:e.deliveryDate,supplierName:e.supplierName,supplierContact:e.supplierContact,batchLotId:e.batchLotId,typeOfFood:e.typeOfFood,quantity:e.quantity,unit:e.unit,requiresTempCheck:e.requiresTempCheck,temperature:e.temperature,taskDoneBy:e.taskDoneBy,notes:e.notes,createdAt:e.createdAt,updatedAt:e.updatedAt,status:e.status,unixTimestamp:Math.floor(new Date(e.createdAt).getTime()/1e3)};return await fetch(sm,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),{success:!0}}catch(t){return console.error("Error saving delivery to Google Sheets:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}async function TM(e){try{const t={id:e.id,deliveryDate:e.deliveryDate,supplierName:e.supplierName,supplierContact:e.supplierContact,batchLotId:e.batchLotId,typeOfFood:e.typeOfFood,quantity:e.quantity,unit:e.unit,requiresTempCheck:e.requiresTempCheck,temperature:e.temperature,taskDoneBy:e.taskDoneBy,notes:e.notes,createdAt:e.createdAt,updatedAt:new Date().toISOString(),status:"deleted",unixTimestamp:Math.floor(new Date(e.createdAt).getTime()/1e3)};return await fetch(sm,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),{success:!0}}catch(t){return console.error("Error deleting delivery from Google Sheets:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}const Hj=_e()(Le((e,t)=>({records:[],isLoading:!1,lastFetchTime:null,fetchError:null,fetchFromGoogleSheets:async()=>{e({isLoading:!0,fetchError:null});try{const r=await fetch(sm,{method:"GET"});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const s=await r.json();if(s.success&&s.data)e({records:s.data,lastFetchTime:new Date().toISOString(),fetchError:null});else throw new Error(s.error||"Failed to fetch deliveries")}catch(r){console.error("Error fetching deliveries from Google Sheets:",r),e({fetchError:r instanceof Error?r.message:"Unknown error"})}finally{e({isLoading:!1})}},addRecord:r=>e(s=>({records:[r,...s.records]})),updateRecord:(r,s)=>e(a=>({records:a.records.map(o=>o.id===r?{...o,...s,updatedAt:new Date().toISOString()}:o)})),deleteRecord:r=>e(s=>({records:s.records.map(a=>a.id===r?{...a,status:"deleted",updatedAt:new Date().toISOString()}:a)})),getRecords:()=>t().records.filter(s=>s.status!=="deleted").sort((s,a)=>new Date(a.deliveryDate).getTime()-new Date(s.deliveryDate).getTime()),getRecordById:r=>t().records.find(s=>s.id===r)}),{name:"taquero-supplier-deliveries"})),Mh=e=>{const[t,r,s]=e.split("-");return`${s}/${r}/${t}`},tc=e=>{const[t,r,s]=e.split("/");return`${s}-${r}-${t}`},EM=["kg","L","units","boxes","trays"];function MM({open:e,onClose:t,onSuccess:r,editingRecord:s}){const{currentUser:a}=Ie(),{addRecord:o,updateRecord:i}=Hj(),[l,c]=d.useState(1),[u,h]=d.useState(""),[m,g]=d.useState(""),[j,w]=d.useState(""),[v,p]=d.useState(""),[f,x]=d.useState(""),[y,N]=d.useState(""),[b,T]=d.useState("kg"),[D,E]=d.useState(null),[S,C]=d.useState(""),[R,k]=d.useState(!1),[M,$]=d.useState(""),[I,B]=d.useState(""),[z,A]=d.useState(!1),F=!!s,W=4,L=l/W*100;d.useEffect(()=>{var G;s&&e&&(h(s.supplierName),g(s.supplierContact),w(Mh(s.deliveryDate)),p(s.batchLotId||""),x(s.typeOfFood),N(s.quantity.toString()),T(s.unit),E(s.requiresTempCheck),C(((G=s.temperature)==null?void 0:G.toString())||""),B(s.notes||""))},[s,e]),d.useEffect(()=>{if(e&&!s){const G=Mh(new Date().toISOString().split("T")[0]);w(G)}},[e,s]),d.useEffect(()=>{e||setTimeout(()=>{O()},200)},[e]);const O=()=>{c(1),h(""),g(""),w(""),p(""),x(""),N(""),T("kg"),E(null),C(""),B(""),k(!1),$("")},H=()=>{z||t()},J=()=>{l<W&&c(l+1)},me=()=>{l>1&&c(l-1)};d.useEffect(()=>{if(D&&S){const G=parseFloat(S);isNaN(G)||(G>=0&&G>5?(k(!0),$(" Cold food should be stored at 5C or below")):G<0&&G>-18?(k(!0),$(" Frozen food should be stored at -18C or below")):(k(!1),$("")))}else k(!1),$("")},[S,D]);const he=async()=>{if(!a){alert("Error: No user logged in");return}A(!0);try{if(F&&s){const G={...s,deliveryDate:tc(j),supplierName:u.trim(),supplierContact:m.trim(),batchLotId:v.trim()||void 0,typeOfFood:f.trim(),quantity:parseFloat(y),unit:b,requiresTempCheck:D,temperature:D?parseFloat(S):void 0,notes:I.trim()||void 0,updatedAt:new Date().toISOString()};await Eh(G),i(s.id,{deliveryDate:tc(j),supplierName:u.trim(),supplierContact:m.trim(),batchLotId:v.trim()||void 0,typeOfFood:f.trim(),quantity:parseFloat(y),unit:b,requiresTempCheck:D,temperature:D?parseFloat(S):void 0,notes:I.trim()||void 0})}else{const Ut={id:`delivery-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,deliveryDate:tc(j),supplierName:u.trim(),supplierContact:m.trim(),batchLotId:v.trim()||void 0,typeOfFood:f.trim(),quantity:parseFloat(y),unit:b,requiresTempCheck:D,temperature:D?parseFloat(S):void 0,taskDoneBy:a.name,notes:I.trim()||void 0,createdAt:new Date().toISOString(),status:"active"};await Eh(Ut),o(Ut)}r==null||r(),O(),t()}catch(G){console.error("Error saving delivery record:",G),alert("Error saving delivery record. Please try again.")}finally{A(!1)}},ye=u.trim().length>0&&m.trim().length>0,zt=j.length>0&&f.trim().length>0&&y.trim().length>0&&!isNaN(parseFloat(y))&&parseFloat(y)>0,We=D!==null&&(!D||S.trim().length>0&&!isNaN(parseFloat(S))),Wt=G=>new Date(G).toLocaleDateString("en-NZ",{day:"numeric",month:"long",year:"numeric"});return n.jsx(Pe,{open:e,onOpenChange:H,children:n.jsxs(De,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx(Te,{children:n.jsx(Ee,{className:"text-2xl",children:F?"Edit Delivery Record":"Record Supplier Delivery"})}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[n.jsxs("span",{children:["Step ",l," of ",W]}),n.jsxs("span",{children:[Math.round(L),"% complete"]})]}),n.jsx("div",{className:"w-full bg-secondary rounded-full h-2",children:n.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:`${L}%`}})})]}),l===1&&n.jsx("div",{className:"space-y-6 py-4",children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Supplier Details"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Enter the name and contact details of the supplier"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"supplierName",children:"Supplier Name"}),n.jsx(Y,{id:"supplierName",value:u,onChange:G=>h(G.target.value),placeholder:"e.g., Farmods, Fresh Foods Ltd",className:"h-16 text-xl"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"supplierContact",children:"Supplier Contact Details"}),n.jsx(Y,{id:"supplierContact",value:m,onChange:G=>g(G.target.value),placeholder:"e.g., South Farm Townsville, Ph: 09-123-4567",className:"h-16 text-xl"})]})]})]})}),l===2&&n.jsx("div",{className:"space-y-6 py-4",children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Delivery Details"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Record what was delivered and when"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"deliveryDate",children:"Delivery Date"}),n.jsx(Fe,{value:j,onChange:w,placeholder:"DD/MM/YYYY"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"batchLotId",children:"Batch / Lot ID (optional)"}),n.jsx(Y,{id:"batchLotId",value:v,onChange:G=>p(G.target.value),placeholder:"e.g., 4251708",className:"h-16 text-xl"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Found on delivery invoice or product label"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"typeOfFood",children:"Type of Food"}),n.jsx(Y,{id:"typeOfFood",value:f,onChange:G=>x(G.target.value),placeholder:"e.g., fresh chicken breast, vegetables, milk",className:"h-16 text-xl"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"quantity",children:"Quantity"}),n.jsx(Y,{id:"quantity",type:"number",step:"0.01",min:"0",value:y,onChange:G=>N(G.target.value),placeholder:"e.g., 5",className:"h-16 text-xl"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"unit",children:"Unit"}),n.jsx("select",{id:"unit",value:b,onChange:G=>T(G.target.value),className:"flex h-16 w-full rounded-md border border-input bg-background px-3 py-2 text-xl ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",children:EM.map(G=>n.jsx("option",{value:G,children:G},G))})]})]})]})]})}),l===3&&n.jsx("div",{className:"space-y-6 py-4",children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Temperature Check"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Does this food require temperature control?"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsx(V,{className:`p-6 cursor-pointer transition-all border-2 ${D===!0?"border-primary bg-primary/10":"border-border hover:border-primary/50"}`,onClick:()=>E(!0),children:n.jsxs("div",{className:"flex flex-col items-center gap-3 text-center",children:[n.jsx(He,{className:"h-12 w-12"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-lg",children:"YES"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Cold, frozen, or hot food"})]})]})}),n.jsx(V,{className:`p-6 cursor-pointer transition-all border-2 ${D===!1?"border-primary bg-primary/10":"border-border hover:border-primary/50"}`,onClick:()=>E(!1),children:n.jsxs("div",{className:"flex flex-col items-center gap-3 text-center",children:[n.jsx(rS,{className:"h-12 w-12"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-lg",children:"NO"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Shelf-stable food"})]})]})})]}),D===!0&&n.jsxs("div",{className:"space-y-2 pt-4",children:[n.jsx(_,{htmlFor:"temperature",children:"Temperature (C)"}),n.jsx(Y,{id:"temperature",type:"number",step:"0.1",value:S,onChange:G=>C(G.target.value),placeholder:"e.g., 4",className:"h-16 text-xl"}),R&&n.jsxs("div",{className:"flex items-start gap-2 p-4 bg-yellow-500/10 border border-yellow-500/20 rounded-lg mt-3",children:[n.jsx(Zn,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-500 flex-shrink-0 mt-0.5"}),n.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-400",children:M})]})]})]})}),l===4&&n.jsx("div",{className:"space-y-6 py-4",children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Review & Submit"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Please review the delivery details before submitting"}),n.jsx("div",{className:"space-y-4 p-4 bg-secondary/50 rounded-lg",children:n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Delivery Date"}),n.jsx("p",{className:"font-medium",children:Wt(j)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Supplier"}),n.jsx("p",{className:"font-medium",children:u})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Contact"}),n.jsx("p",{className:"font-medium",children:m})]}),v&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Batch/Lot ID"}),n.jsx("p",{className:"font-medium",children:v})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Type of Food"}),n.jsx("p",{className:"font-medium",children:f})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Quantity"}),n.jsxs("p",{className:"font-medium",children:[y," ",b]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Temperature Check"}),n.jsx("p",{className:"font-medium",children:D?`${S}C`:"Not required"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Task Done By"}),n.jsx("p",{className:"font-medium",children:(a==null?void 0:a.name)||"Unknown"})]})]})}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"notes",children:"Additional Notes (optional)"}),n.jsx(ce,{id:"notes",value:I,onChange:G=>B(G.target.value),placeholder:"Any additional information about this delivery...",className:"text-base min-h-[100px]"})]})]})}),n.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[n.jsx(P,{variant:"outline",onClick:l===1?H:me,disabled:z,children:l===1?"Cancel":"Back"}),l<W?n.jsx(P,{onClick:J,disabled:l===1&&!ye||l===2&&!zt||l===3&&!We,children:"Next"}):n.jsx(P,{onClick:he,disabled:z,children:z?n.jsxs(n.Fragment,{children:[n.jsx(ke,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save Delivery"})]})]})})}function RM(){const{records:e,isLoading:t,fetchFromGoogleSheets:r,deleteRecord:s}=Hj(),[a,o]=d.useState([]),[i,l]=d.useState(!1),[c,u]=d.useState(null),[h,m]=d.useState(new Set),[g,j]=d.useState(!1),[w,v]=d.useState(null);d.useEffect(()=>{r()},[r]);const p=(C,R="success")=>{const k=Date.now().toString();o(M=>[...M,{id:k,message:C,type:R}]),setTimeout(()=>{o(M=>M.filter($=>$.id!==k))},3e3)},f=()=>{p("Delivery record saved successfully!"),r()},x=C=>{u(C),l(!0)},y=C=>{v(C),j(!0)},N=async()=>{if(w)try{await TM(w),s(w.id),p("Delivery record deleted successfully!"),j(!1),v(null)}catch(C){console.error("Error deleting delivery:",C),p("Error deleting delivery record","error")}},b=C=>{m(R=>{const k=new Set(R);return k.has(C)?k.delete(C):k.add(C),k})},T=()=>{l(!1),u(null)},D=C=>new Date(C).toLocaleDateString("en-NZ",{day:"numeric",month:"long",year:"numeric"}),E=C=>new Date(C).toLocaleString("en-NZ",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}),S=[...e].filter(C=>C.status!=="deleted").sort((C,R)=>new Date(R.deliveryDate).getTime()-new Date(C.deliveryDate).getTime()).slice(0,20);return n.jsxs("div",{className:"space-y-8 max-w-7xl mx-auto",children:[n.jsxs("div",{className:"space-y-2 text-center md:text-left",children:[n.jsxs("h2",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[n.jsx(xa,{className:"h-8 w-8"}),"Trusted Supplier Deliveries"]}),n.jsx("p",{className:"text-muted-foreground text-lg",children:"Record all deliveries from suppliers for food safety compliance and traceability"})]}),n.jsxs(P,{size:"lg",onClick:()=>l(!0),className:"h-12 px-6 min-h-[48px] w-full sm:w-auto",children:[n.jsx(oe,{className:"h-5 w-5 mr-2"}),"Record New Delivery"]}),t&&n.jsxs("div",{className:"flex flex-col items-center justify-center p-8 space-y-3",children:[n.jsx(ke,{className:"h-8 w-8 animate-spin text-muted-foreground"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Fetching Data"})]}),!t&&S.length>0&&n.jsxs(V,{children:[n.jsx(ee,{children:n.jsx(te,{children:"Recent Deliveries"})}),n.jsx(K,{children:n.jsx("div",{className:"space-y-2",children:S.map((C,R)=>{const k=h.has(C.id);return n.jsxs("div",{className:"border rounded-lg overflow-hidden transition-all duration-200 hover:border-primary/50",style:{animationDelay:`${R*50}ms`},children:[n.jsxs("div",{className:"flex items-center justify-between p-4 cursor-pointer bg-card hover:bg-muted/50 transition-colors",onClick:()=>b(C.id),children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[n.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center transition-colors ${k?"bg-primary text-primary-foreground":"bg-primary/10"}`,children:n.jsx(xa,{className:`h-5 w-5 ${k?"":"text-primary"}`})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"font-semibold text-lg truncate",children:C.typeOfFood.length<=30?`${C.typeOfFood} from ${C.supplierName}`:`Order from ${C.supplierName}`}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[D(C.deliveryDate),C.requiresTempCheck&&`  ${C.temperature}C`]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[n.jsx(P,{variant:"ghost",size:"sm",onClick:M=>{M.stopPropagation(),x(C)},className:"h-9 w-9 p-0",children:n.jsx(Lt,{className:"h-4 w-4"})}),n.jsx(P,{variant:"ghost",size:"sm",onClick:M=>{M.stopPropagation(),y(C)},className:"h-9 w-9 p-0",children:n.jsx(Mt,{className:"h-4 w-4 text-destructive"})}),n.jsx(P,{variant:"ghost",size:"sm",className:"h-9 w-9 p-0",children:k?n.jsx(Bt,{className:"h-5 w-5"}):n.jsx(Et,{className:"h-5 w-5"})})]})]}),k&&n.jsxs("div",{className:"border-t bg-muted/30 p-4 space-y-4 animate-in fade-in slide-in-from-top-2 duration-200",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:"Items Received"}),n.jsx("p",{className:"text-sm whitespace-pre-line leading-relaxed",children:C.typeOfFood})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:"Quantity"}),n.jsxs("p",{className:"text-sm",children:[C.quantity," ",C.unit]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:"Received By"}),n.jsx("p",{className:"text-sm",children:C.taskDoneBy})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:"Supplier Contact"}),n.jsx("p",{className:"text-sm",children:C.supplierContact})]}),C.batchLotId&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:"Batch/Lot ID"}),n.jsx("p",{className:"text-sm font-mono",children:C.batchLotId})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:"Temperature Check"}),n.jsx("p",{className:"text-sm",children:C.requiresTempCheck?`Required: ${C.temperature}C`:"Not required"})]}),C.notes&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:"Notes"}),n.jsx("p",{className:"text-sm whitespace-pre-line leading-relaxed",children:C.notes})]}),n.jsx("div",{className:"pt-2 border-t",children:n.jsxs("div",{className:"text-xs text-muted-foreground",children:[n.jsxs("p",{children:["Recorded: ",E(C.createdAt)]}),C.updatedAt&&n.jsxs("p",{className:"mt-1",children:["Last updated: ",E(C.updatedAt)]})]})})]})]},C.id)})})})]}),!t&&S.length===0&&n.jsx(V,{children:n.jsxs(K,{className:"flex flex-col items-center justify-center p-12",children:[n.jsx(xa,{className:"h-16 w-16 text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No delivery records yet"}),n.jsx("p",{className:"text-muted-foreground text-center mb-6",children:"Start recording supplier deliveries for traceability"}),n.jsxs(P,{onClick:()=>l(!0),children:[n.jsx(oe,{className:"mr-2 h-5 w-5"}),"Record First Delivery"]})]})}),n.jsx(MM,{open:i,onClose:T,onSuccess:f,editingRecord:c}),n.jsx(jt,{open:g,onOpenChange:j,children:n.jsxs(at,{children:[n.jsxs(ot,{children:[n.jsx(lt,{children:"Delete Delivery Record?"}),n.jsx(ct,{children:"Are you sure you want to delete this delivery record? This action cannot be undone."})]}),n.jsxs(it,{children:[n.jsx(ut,{children:"Cancel"}),n.jsx(dt,{onClick:N,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})}),n.jsx("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col gap-2",children:a.map(C=>n.jsx("div",{className:`px-4 py-3 rounded-lg shadow-lg ${C.type==="success"?"bg-green-600 text-white":"bg-red-600 text-white"} animate-in slide-in-from-bottom-5`,children:C.message},C.id))})]})}const am="https://script.google.com/macros/s/AKfycbzijEByks2fbcUU-JsyJmPfmv7AoPz4XtqjZ-IpD92AYHI1iRkFqnFc9WMJitb5TSZT8Q/exec";async function Rh(e){try{const t={id:e.id,checkDate:e.checkDate,typeOfFood:e.typeOfFood,temperature:e.temperature,taskDoneBy:e.taskDoneBy,notes:e.notes,createdAt:e.createdAt,updatedAt:e.updatedAt,status:e.status,unixTimestamp:Math.floor(new Date(e.createdAt).getTime()/1e3)};return await fetch(am,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),{success:!0}}catch(t){return console.error("Error saving transport temp check to Google Sheets:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}async function PM(e){try{const t={id:e.id,checkDate:e.checkDate,typeOfFood:e.typeOfFood,temperature:e.temperature,taskDoneBy:e.taskDoneBy,notes:e.notes,createdAt:e.createdAt,updatedAt:new Date().toISOString(),status:"deleted",unixTimestamp:Math.floor(new Date(e.createdAt).getTime()/1e3)};return await fetch(am,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),{success:!0}}catch(t){return console.error("Error deleting transport temp check from Google Sheets:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}const Vj=_e()(Le((e,t)=>({records:[],isLoading:!1,lastFetchTime:null,fetchError:null,fetchFromGoogleSheets:async()=>{e({isLoading:!0,fetchError:null});try{const r=await fetch(am,{method:"GET"});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const s=await r.json();if(s.success&&s.data)e({records:s.data,lastFetchTime:new Date().toISOString(),fetchError:null});else throw new Error(s.error||"Failed to fetch transport temp checks")}catch(r){console.error("Error fetching transport temp checks from Google Sheets:",r),e({fetchError:r instanceof Error?r.message:"Unknown error"})}finally{e({isLoading:!1})}},addRecord:r=>e(s=>({records:[r,...s.records]})),updateRecord:(r,s)=>e(a=>({records:a.records.map(o=>o.id===r?{...o,...s,updatedAt:new Date().toISOString()}:o)})),deleteRecord:r=>e(s=>({records:s.records.map(a=>a.id===r?{...a,status:"deleted",updatedAt:new Date().toISOString()}:a)})),getRecords:()=>t().records.filter(s=>s.status!=="deleted").sort((s,a)=>new Date(a.checkDate).getTime()-new Date(s.checkDate).getTime()),getRecordById:r=>t().records.find(s=>s.id===r)}),{name:"taquero-transport-temp-checks"}));function AM({open:e,onClose:t,onSuccess:r,editingRecord:s}){const{currentUser:a}=Ie(),{addRecord:o,updateRecord:i}=Vj(),[l,c]=d.useState(1),[u,h]=d.useState(""),[m,g]=d.useState(""),[j,w]=d.useState(""),[v,p]=d.useState(!1),[f,x]=d.useState(""),[y,N]=d.useState("warning"),[b,T]=d.useState(""),[D,E]=d.useState(!1),S=!!s,C=3,R=l/C*100,k=O=>{const[H,J,me]=O.split("-");return`${me}/${J}/${H}`},M=O=>{const[H,J,me]=O.split("/");return`${me}-${J}-${H}`};d.useEffect(()=>{s&&e&&(h(k(s.checkDate)),g(s.typeOfFood),w(s.temperature.toString()),T(s.notes||""))},[s,e]),d.useEffect(()=>{if(e&&!s){const O=new Date().toISOString().split("T")[0];h(k(O))}},[e,s]),d.useEffect(()=>{e||setTimeout(()=>{$()},200)},[e]);const $=()=>{c(1),h(""),g(""),w(""),T(""),p(!1),x(""),N("warning")},I=()=>{D||t()},B=()=>{l<C&&c(l+1)},z=()=>{l>1&&c(l-1)};d.useEffect(()=>{if(j){const O=parseFloat(j);isNaN(O)||(O>8?(p(!0),N("danger"),x(" Temperature is unsafe (>8C). According to 2/4 hour rule, food should be discarded.")):O>5?(p(!0),N("warning"),x(" Temperature is borderline (5-8C). Monitor closely.")):(p(!1),x("")))}else p(!1),x("")},[j]);const A=async()=>{if(!a){alert("Error: No user logged in");return}E(!0);try{if(S&&s){const O={...s,checkDate:M(u),typeOfFood:m.trim(),temperature:parseFloat(j),notes:b.trim()||void 0,updatedAt:new Date().toISOString()};await Rh(O),i(s.id,{checkDate:M(u),typeOfFood:m.trim(),temperature:parseFloat(j),notes:b.trim()||void 0})}else{const H={id:`transport-temp-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,checkDate:M(u),typeOfFood:m.trim(),temperature:parseFloat(j),taskDoneBy:a.name,notes:b.trim()||void 0,createdAt:new Date().toISOString(),status:"active"};await Rh(H),o(H)}r==null||r(),$(),t()}catch(O){console.error("Error saving transport temp check:",O),alert("Error saving temperature check. Please try again.")}finally{E(!1)}},F=u.length>0&&m.trim().length>0,W=j.trim().length>0&&!isNaN(parseFloat(j)),L=O=>new Date(O).toLocaleDateString("en-NZ",{day:"numeric",month:"long",year:"numeric"});return n.jsx(Pe,{open:e,onOpenChange:I,children:n.jsxs(De,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx(Te,{children:n.jsx(Ee,{className:"text-2xl",children:S?"Edit Temperature Check":"Record Transport Temperature Check"})}),n.jsxs("div",{className:"flex items-start gap-2 p-4 bg-blue-500/10 border border-blue-500/20 rounded-lg",children:[n.jsx(Vb,{className:"h-5 w-5 text-blue-600 dark:text-blue-500 flex-shrink-0 mt-0.5"}),n.jsx("div",{className:"text-sm",children:n.jsx("p",{className:"font-medium text-blue-700 dark:text-blue-400",children:"Only for food transported for more than 4 hours"})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[n.jsxs("span",{children:["Step ",l," of ",C]}),n.jsxs("span",{children:[Math.round(R),"% complete"]})]}),n.jsx("div",{className:"w-full bg-secondary rounded-full h-2",children:n.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:`${R}%`}})})]}),l===1&&n.jsx("div",{className:"space-y-6 py-4",children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Food Details"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Enter the date and type of food being transported"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"checkDate",children:"Date"}),n.jsx(Fe,{value:u,onChange:h,placeholder:"DD/MM/YYYY"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"typeOfFood",children:"List the transported food"}),n.jsx(Y,{id:"typeOfFood",value:m,onChange:O=>g(O.target.value),placeholder:"e.g., milk, yoghurt, meat, prepared meals",className:"h-16 text-xl"})]})]})]})}),l===2&&n.jsx("div",{className:"space-y-6 py-4",children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Temperature Check"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Record the temperature after more than 4 hours out of temperature control"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"temperature",children:"Temperature (C)"}),n.jsx(Y,{id:"temperature",type:"number",step:"0.1",value:j,onChange:O=>w(O.target.value),placeholder:"e.g., 4.5",className:"h-16 text-xl"})]}),v&&y==="danger"&&n.jsx("div",{className:"flex items-start gap-2 p-4 border rounded-lg mt-3 bg-red-500/10 border-red-500/20",children:n.jsx("p",{className:"text-sm text-red-700 dark:text-red-400 font-medium",children:"Food Temperature is unsafe"})}),n.jsxs("div",{className:"mt-4 p-4 bg-secondary/50 rounded-lg",children:[n.jsx("p",{className:"text-sm font-medium mb-2",children:"Temperature References"}),n.jsxs("ul",{className:"text-sm space-y-1 text-muted-foreground",children:[n.jsx("li",{children:" 5C: Safe temperature"}),n.jsx("li",{children:" 5-8C: Borderline - monitor closely"}),n.jsx("li",{children:" >8C: Unsafe - should be discarded"})]})]})]})}),l===3&&n.jsx("div",{className:"space-y-6 py-4",children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Review & Submit"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Please review the temperature check details before submitting"}),n.jsx("div",{className:"space-y-4 p-4 bg-secondary/50 rounded-lg",children:n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Date"}),n.jsx("p",{className:"font-medium",children:L(u)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Type of Food"}),n.jsx("p",{className:"font-medium",children:m})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Temperature"}),n.jsxs("p",{className:"font-medium",children:[j,"C"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Checked By"}),n.jsx("p",{className:"font-medium",children:(a==null?void 0:a.name)||"Unknown"})]})]})}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"notes",children:"Additional Notes (optional)"}),n.jsx(ce,{id:"notes",value:b,onChange:O=>T(O.target.value),placeholder:"Any additional information about this temperature check...",className:"text-base min-h-[100px]"})]})]})}),n.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[n.jsx(P,{variant:"outline",onClick:l===1?I:z,disabled:D,children:l===1?"Cancel":"Back"}),l<C?n.jsx(P,{onClick:B,disabled:l===1&&!F||l===2&&!W,children:"Next"}):n.jsx(P,{onClick:A,disabled:D,children:D?n.jsxs(n.Fragment,{children:[n.jsx(ke,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save Check"})]})]})})}function OM(){const{records:e,isLoading:t,fetchFromGoogleSheets:r,deleteRecord:s}=Vj(),[a,o]=d.useState([]),[i,l]=d.useState(!1),[c,u]=d.useState(null),[h,m]=d.useState(new Set),[g,j]=d.useState(!1),[w,v]=d.useState(null);d.useEffect(()=>{r()},[r]);const p=(k,M="success")=>{const $=Date.now().toString();o(I=>[...I,{id:$,message:k,type:M}]),setTimeout(()=>{o(I=>I.filter(B=>B.id!==$))},3e3)},f=()=>{p("Temperature check saved successfully!"),r()},x=k=>{u(k),l(!0)},y=k=>{v(k),j(!0)},N=async()=>{if(w)try{await PM(w),s(w.id),p("Temperature check deleted successfully!"),j(!1),v(null)}catch(k){console.error("Error deleting temp check:",k),p("Error deleting temperature check","error")}},b=k=>{m(M=>{const $=new Set(M);return $.has(k)?$.delete(k):$.add(k),$})},T=()=>{l(!1),u(null)},D=k=>new Date(k).toLocaleDateString("en-NZ",{day:"numeric",month:"long",year:"numeric"}),E=k=>new Date(k).toLocaleString("en-NZ",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}),S=k=>k<=5?"safe":k<=8?"borderline":"unsafe",C=k=>{switch(k){case"safe":return"bg-green-500";case"borderline":return"bg-yellow-500";case"unsafe":return"bg-red-500"}},R=[...e].filter(k=>k.status!=="deleted").sort((k,M)=>new Date(M.checkDate).getTime()-new Date(k.checkDate).getTime()).slice(0,20);return n.jsxs("div",{className:"space-y-8 max-w-7xl mx-auto",children:[n.jsxs("div",{className:"space-y-2 text-center md:text-left",children:[n.jsxs("h2",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[n.jsx(hn,{className:"h-8 w-8"}),"Transported Food Temperature Checks"]}),n.jsx("p",{className:"text-muted-foreground text-lg",children:"Record temperature checks for food transported for more than 4 hours"})]}),n.jsxs(P,{size:"lg",className:"w-full md:w-auto",onClick:()=>l(!0),children:[n.jsx(oe,{className:"h-5 w-5 mr-2"}),"Record Temperature Check"]}),t&&n.jsxs("div",{className:"flex flex-col items-center justify-center p-8 space-y-3",children:[n.jsx(ke,{className:"h-8 w-8 animate-spin text-muted-foreground"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading temperature checks"})]}),!t&&R.length>0&&n.jsxs(V,{children:[n.jsx(ee,{children:n.jsx(te,{children:"Recent Temperature Checks"})}),n.jsx(K,{children:n.jsx("div",{className:"space-y-2",children:R.map((k,M)=>{const $=h.has(k.id),I=S(k.temperature);return n.jsxs("div",{className:"border rounded-lg overflow-hidden transition-all duration-200 hover:border-primary/50",style:{animationDelay:`${M*50}ms`},children:[n.jsxs("div",{className:"flex items-center justify-between p-4 bg-card hover:bg-muted/50 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0 cursor-pointer",onClick:()=>b(k.id),children:[n.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center transition-colors ${$?"bg-primary text-primary-foreground":"bg-primary/10"}`,children:n.jsx(hn,{className:`h-5 w-5 ${$?"":"text-primary"}`})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h3",{className:"font-semibold text-lg truncate",children:["Transport from ",D(k.checkDate)]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[k.typeOfFood,"  ",k.temperature,"C"]})]}),n.jsx("div",{className:`h-3 w-3 rounded-full flex-shrink-0 ${C(I)}`})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[n.jsx(P,{variant:"ghost",size:"sm",onClick:B=>{B.stopPropagation(),x(k)},className:"h-9 w-9 p-0",children:n.jsx(Lt,{className:"h-4 w-4"})}),n.jsx(P,{variant:"ghost",size:"sm",onClick:B=>{B.stopPropagation(),y(k)},className:"h-9 w-9 p-0 text-destructive hover:text-destructive",children:n.jsx(Mt,{className:"h-4 w-4"})}),n.jsx(P,{variant:"ghost",size:"sm",onClick:()=>b(k.id),className:"h-9 w-9 p-0",children:$?n.jsx(Bt,{className:"h-5 w-5"}):n.jsx(Et,{className:"h-5 w-5"})})]})]}),$&&n.jsxs("div",{className:"border-t bg-muted/30 p-4 space-y-4 animate-in fade-in slide-in-from-top-2 duration-200",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:"Food Items"}),n.jsx("p",{className:"text-sm whitespace-pre-line leading-relaxed",children:k.typeOfFood})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:"Temperature"}),n.jsxs("p",{className:"text-sm",children:[k.temperature,"C"]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:"Status"}),n.jsxs("p",{className:"text-sm",children:[I==="safe"&&"Safe (5C)",I==="borderline"&&"Borderline (5-8C)",I==="unsafe"&&"Unsafe (>8C) - Should be discarded"]})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:"Checked By"}),n.jsx("p",{className:"text-sm",children:k.taskDoneBy})]}),k.notes&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:"Notes"}),n.jsx("p",{className:"text-sm whitespace-pre-line leading-relaxed",children:k.notes})]}),n.jsxs("div",{className:"pt-2 border-t text-xs text-muted-foreground space-y-1",children:[n.jsxs("p",{children:["Recorded: ",E(k.createdAt)]}),k.updatedAt&&n.jsxs("p",{children:["Last updated: ",E(k.updatedAt)]})]})]})]},k.id)})})})]}),!t&&R.length===0&&n.jsx(V,{children:n.jsxs(K,{className:"flex flex-col items-center justify-center p-12",children:[n.jsx(hn,{className:"h-16 w-16 text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No temperature checks yet"}),n.jsx("p",{className:"text-muted-foreground text-center mb-6",children:"Start tracking transported food temperature checks"}),n.jsxs(P,{onClick:()=>l(!0),children:[n.jsx(oe,{className:"mr-2 h-5 w-5"}),"Add First Check"]})]})}),n.jsx(AM,{open:i,onClose:T,onSuccess:f,editingRecord:c}),n.jsx(jt,{open:g,onOpenChange:j,children:n.jsxs(at,{children:[n.jsxs(ot,{children:[n.jsx(lt,{children:"Delete Temperature Check?"}),n.jsx(ct,{children:"Are you sure you want to delete this temperature check record? This action cannot be undone."})]}),n.jsxs(it,{children:[n.jsx(ut,{children:"Cancel"}),n.jsx(dt,{onClick:N,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})}),n.jsx("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col gap-2",children:a.map(k=>n.jsx("div",{className:`px-4 py-3 rounded-lg shadow-lg ${k.type==="success"?"bg-green-600 text-white":"bg-red-600 text-white"} animate-in slide-in-from-bottom-5`,children:k.message},k.id))})]})}const om="https://script.google.com/macros/s/AKfycbwFXF0DwiXO2zziIBv3EQQoOC8Drhjht4N-1EVHizPORaIZL26JFsx6JfVehnrnRrpC/exec";async function Ph(e){try{const r={action:"addRecord",data:[Math.floor(new Date(e.createdAt).getTime()/1e3),e.id,e.businessName,e.contactDetails,e.productSupplied,e.quantity,e.unit,e.dateSupplied,e.taskDoneBy,e.notes||"",e.createdAt,e.updatedAt||"",e.status]};return await fetch(om,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),{success:!0}}catch(t){return console.error("Error saving B2B sale to Google Sheets:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}async function IM(e){try{const r={action:"updateRecord",data:[Math.floor(new Date(e.createdAt).getTime()/1e3),e.id,e.businessName,e.contactDetails,e.productSupplied,e.quantity,e.unit,e.dateSupplied,e.taskDoneBy,e.notes||"",e.createdAt,new Date().toISOString(),"deleted"]};return await fetch(om,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),{success:!0}}catch(t){return console.error("Error deleting B2B sale from Google Sheets:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}const qj=_e()(Le((e,t)=>({records:[],isLoading:!1,lastFetchTime:null,fetchError:null,fetchFromGoogleSheets:async()=>{e({isLoading:!0,fetchError:null});try{const r=await fetch(om,{method:"GET"});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const s=await r.json();if(s.success&&s.data)e({records:s.data,lastFetchTime:new Date().toISOString(),fetchError:null});else throw new Error(s.error||"Failed to fetch B2B sales")}catch(r){console.error("Error fetching B2B sales from Google Sheets:",r),e({fetchError:r instanceof Error?r.message:"Unknown error"})}finally{e({isLoading:!1})}},addRecord:r=>e(s=>({records:[r,...s.records]})),updateRecord:(r,s)=>e(a=>({records:a.records.map(o=>o.id===r?{...o,...s,updatedAt:new Date().toISOString()}:o)})),deleteRecord:r=>e(s=>({records:s.records.map(a=>a.id===r?{...a,status:"deleted",updatedAt:new Date().toISOString()}:a)})),getRecords:()=>t().records.filter(s=>s.status!=="deleted").sort((s,a)=>new Date(a.dateSupplied).getTime()-new Date(s.dateSupplied).getTime()),getRecordById:r=>t().records.find(s=>s.id===r)}),{name:"taquero-b2b-sales"})),FM=["units","kg","L","boxes","trays","dozen"];function _M({open:e,onClose:t,onSuccess:r,editingRecord:s}){const{currentUser:a}=Ie(),{addRecord:o,updateRecord:i}=qj(),[l,c]=d.useState(1),[u,h]=d.useState(""),[m,g]=d.useState(""),[j,w]=d.useState(""),[v,p]=d.useState(""),[f,x]=d.useState("units"),[y,N]=d.useState(""),[b,T]=d.useState(""),[D,E]=d.useState(!1),S=!!s,C=4,R=l/C*100,k=H=>{const[J,me,he]=H.split("-");return`${he}/${me}/${J}`},M=H=>{const[J,me,he]=H.split("/");return`${he}-${me}-${J}`};d.useEffect(()=>{s&&e&&(h(s.businessName),g(s.contactDetails),w(s.productSupplied),p(s.quantity.toString()),x(s.unit),N(k(s.dateSupplied)),T(s.notes||""))},[s,e]),d.useEffect(()=>{if(e&&!s){const H=new Date().toISOString().split("T")[0];N(k(H))}},[e,s]),d.useEffect(()=>{e||setTimeout(()=>{$()},200)},[e]);const $=()=>{c(1),h(""),g(""),w(""),p(""),x("units"),N(""),T("")},I=()=>{D||t()},B=()=>{l<C&&c(l+1)},z=()=>{l>1&&c(l-1)},A=async()=>{if(!a){alert("Error: No user logged in");return}E(!0);try{if(S&&s){const H={...s,businessName:u.trim(),contactDetails:m.trim(),productSupplied:j.trim(),quantity:parseFloat(v),unit:f,dateSupplied:M(y),notes:b.trim()||void 0,updatedAt:new Date().toISOString()};await Ph(H),i(s.id,{businessName:u.trim(),contactDetails:m.trim(),productSupplied:j.trim(),quantity:parseFloat(v),unit:f,dateSupplied:M(y),notes:b.trim()||void 0})}else{const J={id:`b2b-sale-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,businessName:u.trim(),contactDetails:m.trim(),productSupplied:j.trim(),quantity:parseFloat(v),unit:f,dateSupplied:M(y),taskDoneBy:a.name,notes:b.trim()||void 0,createdAt:new Date().toISOString(),status:"active"};await Ph(J),o(J)}r==null||r(),$(),t()}catch(H){console.error("Error saving B2B sale:",H),alert("Error saving B2B sale record. Please try again.")}finally{E(!1)}},F=u.trim().length>0&&m.trim().length>0,W=j.trim().length>0&&v.trim().length>0&&!isNaN(parseFloat(v))&&parseFloat(v)>0,L=y.length>0,O=H=>new Date(H).toLocaleDateString("en-NZ",{day:"numeric",month:"long",year:"numeric"});return n.jsx(Pe,{open:e,onOpenChange:I,children:n.jsxs(De,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx(Te,{children:n.jsx(Ee,{className:"text-2xl",children:S?"Edit B2B Sale Record":"Record Business Sale"})}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[n.jsxs("span",{children:["Step ",l," of ",C]}),n.jsxs("span",{children:[Math.round(R),"% complete"]})]}),n.jsx("div",{className:"w-full bg-secondary rounded-full h-2",children:n.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:`${R}%`}})})]}),l===1&&n.jsx("div",{className:"space-y-6 py-4",children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Business Details"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Enter the name and contact details of the business customer"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"businessName",children:"Business Name"}),n.jsx(Y,{id:"businessName",value:u,onChange:H=>h(H.target.value),placeholder:"e.g., PJ's Burger Truck",className:"h-16 text-xl"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"contactDetails",children:"Contact Details"}),n.jsx(ce,{id:"contactDetails",value:m,onChange:H=>g(H.target.value),placeholder:`Address, phone, email
e.g., 123 Main Street, Auckland. 027 345 789`,className:"text-base min-h-[100px]"})]})]})]})}),l===2&&n.jsx("div",{className:"space-y-6 py-4",children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Product Details"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Enter what product you supplied and how much"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"productSupplied",children:"Product Supplied"}),n.jsx(Y,{id:"productSupplied",value:j,onChange:H=>w(H.target.value),placeholder:"e.g., burger buns, pastries, sauces",className:"h-16 text-xl"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"quantity",children:"Quantity"}),n.jsx(Y,{id:"quantity",type:"number",step:"0.01",min:"0",value:v,onChange:H=>p(H.target.value),placeholder:"e.g., 200",className:"h-16 text-xl"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"unit",children:"Unit"}),n.jsx("select",{id:"unit",value:f,onChange:H=>x(H.target.value),className:"flex h-16 w-full rounded-md border border-input bg-background px-3 py-2 text-xl ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",children:FM.map(H=>n.jsx("option",{value:H,children:H},H))})]})]})]})]})}),l===3&&n.jsx("div",{className:"space-y-6 py-4",children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Supply Date"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"When was this product supplied to the business?"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"dateSupplied",children:"Date Supplied"}),n.jsx(Fe,{value:y,onChange:N,placeholder:"DD/MM/YYYY"})]})]})}),l===4&&n.jsx("div",{className:"space-y-6 py-4",children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Review & Submit"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Please review the B2B sale details before submitting"}),n.jsx("div",{className:"space-y-4 p-4 bg-secondary/50 rounded-lg",children:n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Business Name"}),n.jsx("p",{className:"font-medium",children:u})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Date Supplied"}),n.jsx("p",{className:"font-medium",children:O(y)})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Contact Details"}),n.jsx("p",{className:"font-medium text-sm whitespace-pre-line",children:m})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Product Supplied"}),n.jsx("p",{className:"font-medium",children:j})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Quantity"}),n.jsxs("p",{className:"font-medium",children:[v," ",f]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Task Done By"}),n.jsx("p",{className:"font-medium",children:(a==null?void 0:a.name)||"Unknown"})]})]})}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"notes",children:"Additional Notes (optional)"}),n.jsx(ce,{id:"notes",value:b,onChange:H=>T(H.target.value),placeholder:"Any additional information about this sale...",className:"text-base min-h-[100px]"})]})]})}),n.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[n.jsx(P,{variant:"outline",onClick:l===1?I:z,disabled:D,children:l===1?"Cancel":"Back"}),l<C?n.jsx(P,{onClick:B,disabled:l===1&&!F||l===2&&!W||l===3&&!L,children:"Next"}):n.jsx(P,{onClick:A,disabled:D,children:D?n.jsxs(n.Fragment,{children:[n.jsx(ke,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save Sale"})]})]})})}function LM(){const{records:e,isLoading:t,fetchFromGoogleSheets:r,deleteRecord:s}=qj(),[a,o]=d.useState([]),[i,l]=d.useState(!1),[c,u]=d.useState(null),[h,m]=d.useState(new Set),[g,j]=d.useState(!1),[w,v]=d.useState(null);d.useEffect(()=>{r()},[r]);const p=(C,R="success")=>{const k=Date.now().toString();o(M=>[...M,{id:k,message:C,type:R}]),setTimeout(()=>{o(M=>M.filter($=>$.id!==k))},3e3)},f=()=>{p("B2B sale recorded successfully!"),r()},x=C=>{u(C),l(!0)},y=C=>{v(C),j(!0)},N=async()=>{if(w)try{await IM(w),s(w.id),p("B2B sale deleted successfully!"),j(!1),v(null)}catch(C){console.error("Error deleting B2B sale:",C),p("Error deleting B2B sale","error")}},b=C=>{m(R=>{const k=new Set(R);return k.has(C)?k.delete(C):k.add(C),k})},T=()=>{l(!1),u(null)},D=C=>new Date(C).toLocaleDateString("en-NZ",{day:"numeric",month:"long",year:"numeric"}),E=C=>new Date(C).toLocaleString("en-NZ",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}),S=[...e].filter(C=>C.status!=="deleted").sort((C,R)=>new Date(R.createdAt).getTime()-new Date(C.createdAt).getTime()).slice(0,20);return n.jsxs("div",{className:"space-y-8 max-w-7xl mx-auto",children:[n.jsxs("div",{className:"space-y-2 text-center md:text-left",children:[n.jsxs("h2",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[n.jsx(Er,{className:"h-8 w-8"}),"Selling Food to Other Businesses"]}),n.jsx("p",{className:"text-muted-foreground text-lg",children:"Track food supplied to business customers for traceability and recall purposes"})]}),n.jsxs(P,{size:"lg",onClick:()=>l(!0),className:"h-12 px-6 min-h-[48px] w-full sm:w-auto",children:[n.jsx(oe,{className:"h-5 w-5 mr-2"}),"Record Business Sale"]}),t&&n.jsxs("div",{className:"flex flex-col items-center justify-center p-8 space-y-3",children:[n.jsx(ke,{className:"h-8 w-8 animate-spin text-muted-foreground"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Fetching Data"})]}),!t&&S.length>0&&n.jsxs(V,{children:[n.jsx(ee,{children:n.jsx(te,{children:"Recent B2B Sales"})}),n.jsx(K,{children:n.jsx("div",{className:"space-y-2",children:S.map((C,R)=>{const k=h.has(C.id);return n.jsxs("div",{className:"border rounded-lg overflow-hidden transition-all duration-200 hover:border-primary/50",style:{animationDelay:`${R*50}ms`},children:[n.jsxs("div",{className:"flex items-center justify-between p-4 cursor-pointer bg-card hover:bg-muted/50 transition-colors",onClick:()=>b(C.id),children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[n.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center transition-colors ${k?"bg-primary text-primary-foreground":"bg-primary/10"}`,children:n.jsx(Er,{className:`h-5 w-5 ${k?"":"text-primary"}`})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"font-semibold text-lg truncate",children:C.productSupplied.length<=20?`${C.productSupplied} sale to ${C.businessName}`:`Sale to ${C.businessName}`}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[D(C.dateSupplied),"  ",C.quantity," ",C.unit]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[n.jsx(P,{variant:"ghost",size:"sm",onClick:M=>{M.stopPropagation(),x(C)},className:"h-9 w-9 p-0",children:n.jsx(Lt,{className:"h-4 w-4"})}),n.jsx(P,{variant:"ghost",size:"sm",onClick:M=>{M.stopPropagation(),y(C)},className:"h-9 w-9 p-0",children:n.jsx(Mt,{className:"h-4 w-4 text-destructive"})}),n.jsx(P,{variant:"ghost",size:"sm",className:"h-9 w-9 p-0",children:k?n.jsx(Bt,{className:"h-5 w-5"}):n.jsx(Et,{className:"h-5 w-5"})})]})]}),k&&n.jsxs("div",{className:"border-t bg-muted/30 p-4 space-y-4 animate-in fade-in slide-in-from-top-2 duration-200",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:"Product Supplied"}),n.jsx("p",{className:"text-sm",children:C.productSupplied})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:"Quantity"}),n.jsxs("p",{className:"text-sm",children:[C.quantity," ",C.unit]})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:"Contact Details"}),n.jsx("p",{className:"text-sm whitespace-pre-line leading-relaxed",children:C.contactDetails})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:"Recorded By"}),n.jsx("p",{className:"text-sm",children:C.taskDoneBy})]}),C.notes&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:"Notes"}),n.jsx("p",{className:"text-sm whitespace-pre-line leading-relaxed",children:C.notes})]}),n.jsx("div",{className:"pt-2 border-t",children:n.jsxs("div",{className:"text-xs text-muted-foreground",children:[n.jsxs("p",{children:["Recorded: ",E(C.createdAt)]}),C.updatedAt&&n.jsxs("p",{className:"mt-1",children:["Last updated: ",E(C.updatedAt)]})]})})]})]},C.id)})})})]}),!t&&S.length===0&&n.jsx(V,{children:n.jsxs(K,{className:"flex flex-col items-center justify-center p-12",children:[n.jsx(Er,{className:"h-16 w-16 text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No B2B sales yet"}),n.jsx("p",{className:"text-muted-foreground text-center mb-6",children:"Start tracking food supplied to business customers"}),n.jsxs(P,{onClick:()=>l(!0),children:[n.jsx(oe,{className:"mr-2 h-5 w-5"}),"Record First Sale"]})]})}),n.jsx(_M,{open:i,onClose:T,onSuccess:f,editingRecord:c}),n.jsx(jt,{open:g,onOpenChange:j,children:n.jsxs(at,{children:[n.jsxs(ot,{children:[n.jsx(lt,{children:"Delete B2B Sale Record?"}),n.jsx(ct,{children:"Are you sure you want to delete this B2B sale record? This action cannot be undone."})]}),n.jsxs(it,{children:[n.jsx(ut,{children:"Cancel"}),n.jsx(dt,{onClick:N,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})}),n.jsx("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col gap-2",children:a.map(C=>n.jsx("div",{className:`px-4 py-3 rounded-lg shadow-lg ${C.type==="success"?"bg-green-600 text-white":"bg-red-600 text-white"} animate-in slide-in-from-bottom-5`,children:C.message},C.id))})]})}const im="https://script.google.com/macros/s/AKfycbwO0Sj8BLlHAORdv-_3HIZ3yc5LKUpMZ9ZmO3HdPygJFGYHRfa03-Giz7OGU4SrwSYJ/exec";async function Ah(e){try{const t={id:e.id,cleaningTask:e.cleaningTask,dateCompleted:e.dateCompleted,cleaningMethod:e.cleaningMethod,completedBy:e.completedBy,notes:e.notes,createdAt:e.createdAt,updatedAt:e.updatedAt,status:e.status,unixTimestamp:Math.floor(new Date(e.createdAt).getTime()/1e3)};return await fetch(im,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),{success:!0}}catch(t){return console.error("Error saving cleaning record to Google Sheets:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}async function $M(e){try{const t={id:e.id,cleaningTask:e.cleaningTask,dateCompleted:e.dateCompleted,cleaningMethod:e.cleaningMethod,completedBy:e.completedBy,notes:e.notes,createdAt:e.createdAt,updatedAt:new Date().toISOString(),status:"deleted",unixTimestamp:Math.floor(new Date(e.createdAt).getTime()/1e3)};return await fetch(im,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),{success:!0}}catch(t){return console.error("Error deleting cleaning record from Google Sheets:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}const Kj=_e()(Le((e,t)=>({records:[],isLoading:!1,lastFetchTime:null,fetchError:null,fetchFromGoogleSheets:async()=>{e({isLoading:!0,fetchError:null});try{const r=await fetch(im,{method:"GET"});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const s=await r.json();if(s.success&&s.data)e({records:s.data,lastFetchTime:new Date().toISOString(),fetchError:null});else throw new Error(s.error||"Failed to fetch cleaning records")}catch(r){console.error("Error fetching cleaning records from Google Sheets:",r),e({fetchError:r instanceof Error?r.message:"Unknown error"})}finally{e({isLoading:!1})}},addRecord:r=>e(s=>({records:[r,...s.records]})),updateRecord:(r,s)=>e(a=>({records:a.records.map(o=>o.id===r?{...o,...s,updatedAt:new Date().toISOString()}:o)})),deleteRecord:r=>e(s=>({records:s.records.map(a=>a.id===r?{...a,status:"deleted",updatedAt:new Date().toISOString()}:a)})),getRecords:()=>t().records.filter(s=>s.status!=="deleted").sort((s,a)=>new Date(a.dateCompleted).getTime()-new Date(s.dateCompleted).getTime()),getRecordById:r=>t().records.find(s=>s.id===r)}),{name:"taquero-cleaning-closing"})),nc=e=>{const[t,r,s]=e.split("-");return`${s}/${r}/${t}`},rc=e=>{const[t,r,s]=e.split("/");return`${s}-${r}-${t}`};function BM({open:e,onClose:t,onSuccess:r,editingRecord:s}){const[a,o]=d.useState(1),{addRecord:i,updateRecord:l}=Kj(z=>({addRecord:z.addRecord,updateRecord:z.updateRecord})),[c,u]=d.useState(""),[h,m]=d.useState(""),[g,j]=d.useState(nc(new Date().toISOString().split("T")[0])),[w,v]=d.useState(""),[p,f]=d.useState(""),[x,y]=d.useState(!1),[N,b]=d.useState(!1),T=!!s,D=2,E=a/D*100;d.useEffect(()=>{s&&e&&(u(s.cleaningTask),m(s.cleaningMethod),j(nc(s.dateCompleted)),v(s.completedBy),f(s.notes||""))},[s,e]);const S=()=>{o(1),u(""),m(""),j(nc(new Date().toISOString().split("T")[0])),v(""),f(""),y(!1)},C=()=>{x&&!window.confirm("You have unsaved data. Are you sure you want to close?")||(S(),t())},R=()=>c.trim().length>0&&h.trim().length>0,k=()=>w.trim().length>0,M=()=>{if(a===1&&!R()){alert("Please fill in what was cleaned and how it was cleaned.");return}a===1&&y(!0),a<D&&o(a+1)},$=()=>{a>1&&o(a-1)},I=z=>new Date(z).toLocaleDateString("en-NZ",{day:"numeric",month:"long",year:"numeric"}),B=async()=>{b(!0);try{if(T&&s){const z={...s,cleaningTask:c,dateCompleted:rc(g),cleaningMethod:h,completedBy:w,notes:p.trim().length>0?p:void 0,updatedAt:new Date().toISOString()};l(s.id,{cleaningTask:c,dateCompleted:rc(g),cleaningMethod:h,completedBy:w,notes:p.trim().length>0?p:void 0,updatedAt:new Date().toISOString()}),await Ah(z)}else{const A={id:`cleaning-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,cleaningTask:c,dateCompleted:rc(g),cleaningMethod:h,completedBy:w,notes:p.trim().length>0?p:void 0,createdAt:new Date().toISOString(),status:"active"};i(A),await Ah(A)}S(),r==null||r(),t()}catch(z){console.error("Error saving cleaning record:",z),alert("Error saving record. Please try again.")}finally{b(!1)}};return n.jsx(Pe,{open:e,onOpenChange:C,children:n.jsxs(De,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx(Te,{children:n.jsx(Ee,{children:T?"Edit Cleaning Record":"Add Cleaning Record"})}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[n.jsxs("span",{children:["Step ",a," of ",D]}),n.jsxs("span",{children:[Math.round(E),"%"]})]}),n.jsx($e,{value:E,className:"w-full"})]}),a===1&&n.jsxs(V,{children:[n.jsxs(ee,{children:[n.jsxs(te,{className:"flex items-center gap-2",children:[n.jsx(hs,{className:"h-5 w-5"}),"Cleaning Details"]}),n.jsx(Ce,{children:"What was cleaned and how?"})]}),n.jsxs(K,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(_,{htmlFor:"cleaningTask",children:["What was cleaned? ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(Y,{id:"cleaningTask",placeholder:"e.g., Preparation benches, Floor, Equipment",value:c,onChange:z=>u(z.target.value)}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Examples: Preparation benches, Floor mopping, Equipment, Fridge exterior, Sinks"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(_,{htmlFor:"cleaningMethod",children:["How was it cleaned? ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(ce,{id:"cleaningMethod",placeholder:"Describe the cleaning method...",value:h,onChange:z=>m(z.target.value),rows:4}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Example: Clean debris, wipe with hot soapy water, dry with paper towels, apply spray sanitiser"})]})]})]}),a===2&&n.jsxs(V,{children:[n.jsxs(ee,{children:[n.jsx(te,{children:"Record Details"}),n.jsx(Ce,{children:"Date and creator information"})]}),n.jsxs(K,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"dateCompleted",children:"Date"}),n.jsx(Fe,{value:g,onChange:j,placeholder:"DD/MM/YYYY"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(_,{htmlFor:"completedBy",children:["Created By ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(Y,{id:"completedBy",placeholder:"Your name",value:w,onChange:z=>v(z.target.value)})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"notes",children:"Notes (Optional)"}),n.jsx(ce,{id:"notes",placeholder:"Any additional notes...",value:p,onChange:z=>f(z.target.value),rows:3})]}),n.jsxs("div",{className:"rounded-lg border bg-muted/50 p-4 space-y-2",children:[n.jsx("p",{className:"text-sm font-semibold",children:"Review:"}),n.jsxs("div",{className:"text-sm space-y-1",children:[n.jsxs("p",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Task:"})," ",c]}),n.jsxs("p",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Method:"})," ",h]}),n.jsxs("p",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Date:"})," ",I(g)]})]})]})]})]}),n.jsxs("div",{className:"flex justify-between gap-4",children:[n.jsx(P,{variant:"outline",onClick:a===1?C:$,children:a===1?"Cancel":"Back"}),a<D?n.jsx(P,{onClick:M,children:"Next"}):n.jsx(P,{onClick:B,disabled:!k()||N,children:N?"Saving...":"Save Cleaning Record"})]})]})]})})}function zM(){const{records:e,isLoading:t,fetchFromGoogleSheets:r,deleteRecord:s}=Kj(),[a,o]=d.useState([]),[i,l]=d.useState(!1),[c,u]=d.useState(null),[h,m]=d.useState(new Set),[g,j]=d.useState(!1),[w,v]=d.useState(null);d.useEffect(()=>{r()},[r]);const p=(S,C="success")=>{const R=Date.now().toString();o(k=>[...k,{id:R,message:S,type:C}]),setTimeout(()=>{o(k=>k.filter(M=>M.id!==R))},3e3)},f=async()=>{p("Cleaning procedure saved successfully!"),await r()},x=S=>{u(S),l(!0)},y=S=>{v(S),j(!0)},N=async()=>{if(w)try{await $M(w),s(w.id),p("Cleaning procedure deleted successfully!"),j(!1),v(null),await r()}catch(S){console.error("Error deleting cleaning record:",S),p("Error deleting cleaning record","error")}},b=S=>{m(C=>{const R=new Set(C);return R.has(S)?R.delete(S):R.add(S),R})},T=()=>{l(!1),u(null)},D=S=>new Date(S).toLocaleDateString("en-NZ",{day:"numeric",month:"long",year:"numeric"}),E=e.filter(S=>S.status==="active").slice(0,20);return n.jsxs("div",{className:"container mx-auto p-6 max-w-6xl space-y-6",children:[n.jsxs("div",{className:"space-y-2 text-center md:text-left",children:[n.jsxs("h2",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[n.jsx(hs,{className:"h-8 w-8"}),"Cleaning & Closing"]}),n.jsx("p",{className:"text-muted-foreground text-lg",children:"Cleaning and closing procedures"})]}),n.jsxs(P,{size:"lg",onClick:()=>l(!0),className:"h-12 px-6 min-h-[48px] w-full sm:w-auto",children:[n.jsx(oe,{className:"h-5 w-5 mr-2"}),"Add Cleaning Procedure"]}),n.jsx(BM,{open:i,onClose:T,onSuccess:f,editingRecord:c}),t&&n.jsxs("div",{className:"flex flex-col items-center justify-center p-8 space-y-3",children:[n.jsx(ke,{className:"h-8 w-8 animate-spin text-muted-foreground"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Fetching Data"})]}),!t&&E.length>0&&n.jsxs(V,{children:[n.jsx(ee,{children:n.jsx(te,{children:"Registered Cleaning Procedures"})}),n.jsx(K,{children:n.jsx("div",{className:"space-y-2",children:E.map((S,C)=>{const R=h.has(S.id);return n.jsxs("div",{className:"border rounded-lg overflow-hidden transition-all duration-200 hover:border-primary/50",style:{animationDelay:`${C*50}ms`},children:[n.jsxs("div",{className:"flex items-center justify-between p-4 cursor-pointer bg-card hover:bg-muted/50 transition-colors",onClick:()=>b(S.id),children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[n.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center transition-colors ${R?"bg-primary text-primary-foreground":"bg-primary/10"}`,children:n.jsx(hs,{className:`h-5 w-5 ${R?"":"text-primary"}`})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"font-semibold text-lg truncate",children:S.cleaningTask}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Created by ",S.completedBy,"  ",D(S.dateCompleted)]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[n.jsx(P,{variant:"ghost",size:"sm",onClick:k=>{k.stopPropagation(),x(S)},className:"h-9 w-9 p-0",children:n.jsx(Lt,{className:"h-4 w-4"})}),n.jsx(P,{variant:"ghost",size:"sm",onClick:k=>{k.stopPropagation(),y(S)},className:"h-9 w-9 p-0",children:n.jsx(Mt,{className:"h-4 w-4 text-destructive"})}),n.jsx(P,{variant:"ghost",size:"sm",className:"h-9 w-9 p-0",children:R?n.jsx(Bt,{className:"h-5 w-5"}):n.jsx(Et,{className:"h-5 w-5"})})]})]}),R&&n.jsxs("div",{className:"border-t bg-muted/30 p-4 space-y-4 animate-in fade-in slide-in-from-top-2 duration-200",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:"Cleaning Method"}),n.jsx("p",{className:"text-sm whitespace-pre-wrap leading-relaxed",children:S.cleaningMethod})]}),S.notes&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:"Additional Notes"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:S.notes})]})]})]},S.id)})})})]}),!t&&E.length===0&&n.jsx(V,{children:n.jsxs(K,{className:"flex flex-col items-center justify-center p-12",children:[n.jsx(hs,{className:"h-16 w-16 text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No cleaning procedures yet"}),n.jsx("p",{className:"text-muted-foreground text-center mb-6",children:"Start documenting procedures for recordkeeping"}),n.jsxs(P,{onClick:()=>l(!0),children:[n.jsx(oe,{className:"mr-2 h-5 w-5"}),"Add First Cleaning Procedure"]})]})}),n.jsx(jt,{open:g,onOpenChange:j,children:n.jsxs(at,{children:[n.jsxs(ot,{children:[n.jsx(lt,{children:"Delete Cleaning Record?"}),n.jsxs(ct,{children:['This will permanently delete the cleaning record for "',w==null?void 0:w.cleaningTask,'". This action cannot be undone.']})]}),n.jsxs(it,{children:[n.jsx(ut,{children:"Cancel"}),n.jsx(dt,{onClick:N,className:"bg-destructive hover:bg-destructive/90",children:"Delete"})]})]})}),n.jsx("div",{className:"fixed bottom-4 right-4 space-y-2 z-50",children:a.map(S=>n.jsx("div",{className:`p-4 rounded-lg shadow-lg ${S.type==="success"?"bg-green-500":"bg-red-500"} text-white`,children:S.message},S.id))})]})}const lm="https://script.google.com/macros/s/AKfycbxRjOXZMvklsqZSv5N0uBP1pt4i5N12YX0k4IpphABdzEMNSIDoNEpP-pffj0FGb_Jy/exec";async function Oh(e){try{const r={action:"addRecord",data:[Math.floor(new Date(e.createdAt).getTime()/1e3),e.id,e.equipmentName,e.dateCompleted,e.performedBy,e.maintenanceDescription,e.checkingFrequency||"",e.notes||"",e.createdAt,e.updatedAt||"",e.status]};return await fetch(lm,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),{success:!0}}catch(t){return console.error("Error saving maintenance record to Google Sheets:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}async function WM(e){try{const r={action:"updateRecord",data:[Math.floor(new Date(e.createdAt).getTime()/1e3),e.id,e.equipmentName,e.dateCompleted,e.performedBy,e.maintenanceDescription,e.checkingFrequency||"",e.notes||"",e.createdAt,new Date().toISOString(),"deleted"]};return await fetch(lm,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),{success:!0}}catch(t){return console.error("Error deleting maintenance record from Google Sheets:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}const Qj=_e()(Le((e,t)=>({records:[],isLoading:!1,lastFetchTime:null,fetchError:null,fetchFromGoogleSheets:async()=>{e({isLoading:!0,fetchError:null});try{const r=await fetch(lm,{method:"GET"});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const s=await r.json();if(s.success&&s.data)e({records:s.data,lastFetchTime:new Date().toISOString(),fetchError:null});else throw new Error(s.error||"Failed to fetch maintenance records")}catch(r){console.error("Error fetching maintenance records from Google Sheets:",r),e({fetchError:r instanceof Error?r.message:"Unknown error"})}finally{e({isLoading:!1})}},addRecord:r=>e(s=>({records:[r,...s.records]})),updateRecord:(r,s)=>e(a=>({records:a.records.map(o=>o.id===r?{...o,...s,updatedAt:new Date().toISOString()}:o)})),deleteRecord:r=>e(s=>({records:s.records.map(a=>a.id===r?{...a,status:"deleted",updatedAt:new Date().toISOString()}:a)})),getRecords:()=>t().records.filter(s=>s.status!=="deleted").sort((s,a)=>new Date(a.dateCompleted).getTime()-new Date(s.dateCompleted).getTime()),getRecordById:r=>t().records.find(s=>s.id===r)}),{name:"taquero-equipment-maintenance"}));function UM({open:e,onClose:t,onSuccess:r,editingRecord:s}){const[a,o]=d.useState(1),{addRecord:i,updateRecord:l}=Qj(L=>({addRecord:L.addRecord,updateRecord:L.updateRecord})),c=L=>{const[O,H,J]=L.split("-");return`${J}/${H}/${O}`},u=L=>{const[O,H,J]=L.split("/");return`${J}-${H}-${O}`},[h,m]=d.useState(""),[g,j]=d.useState(""),[w,v]=d.useState(c(new Date().toISOString().split("T")[0])),[p,f]=d.useState(""),[x,y]=d.useState(""),[N,b]=d.useState(""),[T,D]=d.useState(!1),[E,S]=d.useState(!1),C=!!s,R=2,k=a/R*100;d.useEffect(()=>{s&&e&&(m(s.equipmentName),j(s.maintenanceDescription),v(c(s.dateCompleted)),f(s.performedBy),y(s.checkingFrequency||""),b(s.notes||""))},[s,e]);const M=()=>{o(1),m(""),j(""),v(c(new Date().toISOString().split("T")[0])),f(""),y(""),b(""),D(!1)},$=()=>{T&&!window.confirm("You have unsaved data. Are you sure you want to close?")||(M(),t())},I=()=>h.trim().length>0&&g.trim().length>0,B=()=>p.trim().length>0,z=()=>{if(a===1&&!I()){alert("Please fill in equipment name and maintenance description.");return}a===1&&D(!0),a<R&&o(a+1)},A=()=>{a>1&&o(a-1)},F=L=>new Date(L).toLocaleDateString("en-NZ",{day:"numeric",month:"long",year:"numeric"}),W=async()=>{if(!B()){alert("Please enter who performed the maintenance.");return}S(!0);try{if(C&&s){const L={...s,equipmentName:h,dateCompleted:u(w),performedBy:p,maintenanceDescription:g,checkingFrequency:x.trim().length>0?x:void 0,notes:N.trim().length>0?N:void 0,updatedAt:new Date().toISOString()};l(s.id,{equipmentName:h,dateCompleted:u(w),performedBy:p,maintenanceDescription:g,checkingFrequency:x.trim().length>0?x:void 0,notes:N.trim().length>0?N:void 0,updatedAt:new Date().toISOString()}),await Oh(L)}else{const O={id:`maintenance-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,equipmentName:h,dateCompleted:u(w),performedBy:p,maintenanceDescription:g,checkingFrequency:x.trim().length>0?x:void 0,notes:N.trim().length>0?N:void 0,createdAt:new Date().toISOString(),status:"active"};i(O),await Oh(O)}M(),r==null||r(),t()}catch(L){console.error("Error saving maintenance record:",L),alert("Error saving record. Please try again.")}finally{S(!1)}};return n.jsx(Pe,{open:e,onOpenChange:$,children:n.jsxs(De,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx(Te,{children:n.jsx(Ee,{children:C?"Edit Maintenance Record":"Add Maintenance Record"})}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[n.jsxs("span",{children:["Step ",a," of ",R]}),n.jsxs("span",{children:[Math.round(k),"%"]})]}),n.jsx($e,{value:k,className:"w-full"})]}),a===1&&n.jsxs(V,{children:[n.jsxs(ee,{children:[n.jsxs(te,{className:"flex items-center gap-2",children:[n.jsx(ps,{className:"h-5 w-5"}),"Equipment & Maintenance Details"]}),n.jsx(Ce,{children:"What was serviced and what was done?"})]}),n.jsxs(K,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(_,{htmlFor:"equipmentName",children:["Equipment/Item Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(Y,{id:"equipmentName",placeholder:"e.g., Grease Trap, Fridge #1, Water Filter",value:h,onChange:L=>m(L.target.value)}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Examples: Grease Trap, Fridge, Freezer, Oven, Extractor Fan, Water Filter, Fire Extinguisher"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(_,{htmlFor:"maintenanceDescription",children:["Maintenance Description ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(ce,{id:"maintenanceDescription",placeholder:"Describe what maintenance/repair was done...",value:g,onChange:L=>j(L.target.value),rows:4}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Example: Full service and clean out of passive grease trap, Temperature calibration check, Filter replacement"})]})]})]}),a===2&&n.jsxs(V,{children:[n.jsxs(ee,{children:[n.jsx(te,{children:"Completion Details"}),n.jsx(Ce,{children:"When and who performed the maintenance"})]}),n.jsxs(K,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(_,{htmlFor:"dateCompleted",children:["Date Completed ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(Fe,{value:w,onChange:v})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(_,{htmlFor:"performedBy",children:["Performed By ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(Y,{id:"performedBy",placeholder:"Service provider or staff name",value:p,onChange:L=>f(L.target.value)}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"e.g., Greg's Grease Trap Services, Staff, John Smith"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"checkingFrequency",children:"Checking Frequency (Optional)"}),n.jsx(Y,{id:"checkingFrequency",placeholder:"e.g., 6 monthly, Monthly, Quarterly",value:x,onChange:L=>y(L.target.value)}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"How often this maintenance should be done (for reference)"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"notes",children:"Notes (Optional)"}),n.jsx(ce,{id:"notes",placeholder:"Any additional notes...",value:N,onChange:L=>b(L.target.value),rows:3})]}),n.jsxs("div",{className:"rounded-lg border bg-muted/50 p-4 space-y-2",children:[n.jsx("p",{className:"text-sm font-semibold",children:"Review:"}),n.jsxs("div",{className:"text-sm space-y-1",children:[n.jsxs("p",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Equipment:"})," ",h]}),n.jsxs("p",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Maintenance:"})," ",g]}),n.jsxs("p",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Date:"})," ",F(w)]}),x&&n.jsxs("p",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Frequency:"})," ",x]})]})]})]})]}),n.jsxs("div",{className:"flex justify-between gap-4",children:[n.jsx(P,{variant:"outline",onClick:a===1?$:A,children:a===1?"Cancel":"Back"}),a<R?n.jsx(P,{onClick:z,children:"Next"}):n.jsx(P,{onClick:W,disabled:!B()||E,children:E?"Saving...":"Save Maintenance Record"})]})]})]})})}function YM(){const{records:e,isLoading:t,fetchFromGoogleSheets:r,deleteRecord:s}=Qj(),[a,o]=d.useState([]),[i,l]=d.useState(!1),[c,u]=d.useState(null),[h,m]=d.useState(new Set),[g,j]=d.useState(!1),[w,v]=d.useState(null);d.useEffect(()=>{r()},[r]);const p=(S,C="success")=>{const R=Date.now().toString();o(k=>[...k,{id:R,message:S,type:C}]),setTimeout(()=>{o(k=>k.filter(M=>M.id!==R))},3e3)},f=()=>{p("Maintenance record saved successfully!"),r()},x=S=>{u(S),l(!0)},y=S=>{v(S),j(!0)},N=async()=>{if(w)try{await WM(w),s(w.id),p("Maintenance record deleted successfully!"),j(!1),v(null)}catch(S){console.error("Error deleting maintenance record:",S),p("Error deleting maintenance record","error")}},b=S=>{m(C=>{const R=new Set(C);return R.has(S)?R.delete(S):R.add(S),R})},T=()=>{l(!1),u(null)},D=S=>new Date(S).toLocaleDateString("en-NZ",{day:"numeric",month:"long",year:"numeric"}),E=e.filter(S=>S.status==="active").slice(0,20);return n.jsxs("div",{className:"container mx-auto p-6 max-w-6xl space-y-6",children:[n.jsxs("div",{className:"space-y-2 text-center md:text-left",children:[n.jsxs("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[n.jsx(ps,{className:"h-8 w-8"}),"Equipment Maintenance"]}),n.jsx("p",{className:"text-muted-foreground text-lg",children:"Equipment repair Records"})]}),n.jsxs(P,{size:"lg",onClick:()=>l(!0),className:"h-12 px-6 min-h-[48px] w-full sm:w-auto",children:[n.jsx(oe,{className:"h-5 w-5 mr-2"}),"Add Maintenance Record"]}),n.jsx(UM,{open:i,onClose:T,onSuccess:f,editingRecord:c}),t&&n.jsxs("div",{className:"flex flex-col items-center justify-center p-8 space-y-3",children:[n.jsx(ke,{className:"h-8 w-8 animate-spin text-muted-foreground"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Fetching Data"})]}),!t&&E.length>0&&n.jsxs(V,{children:[n.jsx(ee,{children:n.jsx(te,{children:"Maintenance Records"})}),n.jsx(K,{children:n.jsx("div",{className:"space-y-2",children:E.map((S,C)=>{const R=h.has(S.id);return n.jsxs("div",{className:"border rounded-lg overflow-hidden transition-all duration-200 hover:border-primary/50",style:{animationDelay:`${C*50}ms`},children:[n.jsxs("div",{className:"flex items-center justify-between p-4 cursor-pointer bg-card hover:bg-muted/50 transition-colors",onClick:()=>b(S.id),children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[n.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center transition-colors ${R?"bg-primary text-primary-foreground":"bg-primary/10"}`,children:n.jsx(ps,{className:`h-5 w-5 ${R?"":"text-primary"}`})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"font-semibold text-lg truncate",children:S.equipmentName}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[D(S.dateCompleted),"  ",S.performedBy,S.checkingFrequency&&`  ${S.checkingFrequency}`]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[n.jsx(P,{variant:"ghost",size:"sm",onClick:k=>{k.stopPropagation(),x(S)},className:"h-9 w-9 p-0",children:n.jsx(Lt,{className:"h-4 w-4"})}),n.jsx(P,{variant:"ghost",size:"sm",onClick:k=>{k.stopPropagation(),y(S)},className:"h-9 w-9 p-0",children:n.jsx(Mt,{className:"h-4 w-4 text-destructive"})}),n.jsx(P,{variant:"ghost",size:"sm",className:"h-9 w-9 p-0",children:R?n.jsx(Bt,{className:"h-5 w-5"}):n.jsx(Et,{className:"h-5 w-5"})})]})]}),R&&n.jsxs("div",{className:"border-t bg-muted/30 p-4 space-y-4 animate-in fade-in slide-in-from-top-2 duration-200",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:"Maintenance Description"}),n.jsx("p",{className:"text-sm whitespace-pre-wrap leading-relaxed",children:S.maintenanceDescription})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-2",children:[S.checkingFrequency&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:"Checking Frequency"}),n.jsx("p",{className:"text-sm font-medium mt-1",children:S.checkingFrequency})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:"Performed By"}),n.jsx("p",{className:"text-sm font-medium mt-1",children:S.performedBy})]})]}),S.notes&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:"Additional Notes"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:S.notes})]})]})]},S.id)})})})]}),!t&&E.length===0&&n.jsx(V,{children:n.jsxs(K,{className:"flex flex-col items-center justify-center p-12",children:[n.jsx(ps,{className:"h-16 w-16 text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No maintenance records yet"}),n.jsx("p",{className:"text-muted-foreground text-center mb-6",children:"Start tracking equipment maintenance to ensure food safety"}),n.jsxs(P,{onClick:()=>l(!0),children:[n.jsx(oe,{className:"mr-2 h-5 w-5"}),"Add First Maintenance Record"]})]})}),n.jsx(jt,{open:g,onOpenChange:j,children:n.jsxs(at,{children:[n.jsxs(ot,{children:[n.jsx(lt,{children:"Delete Maintenance Record?"}),n.jsxs(ct,{children:['This will permanently delete the maintenance record for "',w==null?void 0:w.equipmentName,'". This action cannot be undone.']})]}),n.jsxs(it,{children:[n.jsx(ut,{children:"Cancel"}),n.jsx(dt,{onClick:N,className:"bg-destructive hover:bg-destructive/90",children:"Delete"})]})]})}),n.jsx("div",{className:"fixed bottom-4 right-4 space-y-2 z-50",children:a.map(S=>n.jsx("div",{className:`p-4 rounded-lg shadow-lg ${S.type==="success"?"bg-green-500":"bg-red-500"} text-white`,children:S.message},S.id))})]})}const GM="modulepreload",HM=function(e){return"/"+e},Ih={},VM=function(t,r,s){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=HM(c),c in Ih)return;Ih[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":GM,u||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),u)return new Promise((g,j)=>{m.addEventListener("load",g),m.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return a.then(i=>{for(const l of i||[])l.status==="rejected"&&o(l.reason);return t().catch(o)})},cm="https://script.google.com/macros/s/AKfycbzU0Uo5khxjHvPXYhhhKBD1qCQ2Oc92YUfindWbmqHhX92Xgh9KWkn8o47p8zcWnv4b/exec";async function Zj(e){try{const t={id:e.id,incidentDate:e.incidentDate,personResponsible:e.personResponsible,staffInvolved:e.staffInvolved,category:e.category,whatWentWrong:e.whatWentWrong,whatDidToFix:e.whatDidToFix,preventiveAction:e.preventiveAction,severity:e.severity,incidentStatus:e.incidentStatus,followUpDate:e.followUpDate,notes:e.notes,createdAt:e.createdAt,updatedAt:e.updatedAt,status:e.status,unixTimestamp:Math.floor(new Date(e.createdAt).getTime()/1e3)};return await fetch(cm,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),{success:!0}}catch(t){return console.error("Error saving incident record to Google Sheets:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}async function Xj(e){try{const t={id:e.id,incidentDate:e.incidentDate,personResponsible:e.personResponsible,staffInvolved:e.staffInvolved,category:e.category,whatWentWrong:e.whatWentWrong,whatDidToFix:e.whatDidToFix,preventiveAction:e.preventiveAction,severity:e.severity,incidentStatus:e.incidentStatus,followUpDate:e.followUpDate,notes:e.notes,createdAt:e.createdAt,updatedAt:new Date().toISOString(),status:"deleted",unixTimestamp:Math.floor(new Date(e.createdAt).getTime()/1e3)};return await fetch(cm,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),{success:!0}}catch(t){return console.error("Error deleting incident record from Google Sheets:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}const Di=_e()(Le((e,t)=>({records:[],isLoading:!1,lastFetchTime:null,fetchError:null,fetchFromGoogleSheets:async()=>{e({isLoading:!0,fetchError:null});try{const r=await fetch(cm,{method:"GET"});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const s=await r.json();if(s.success&&s.data)e({records:s.data,lastFetchTime:new Date().toISOString(),fetchError:null});else throw new Error(s.error||"Failed to fetch incident records")}catch(r){console.error("Error fetching incident records from Google Sheets:",r),e({fetchError:r instanceof Error?r.message:"Unknown error"})}finally{e({isLoading:!1})}},addRecord:r=>e(s=>({records:[r,...s.records]})),updateRecord:(r,s)=>e(a=>({records:a.records.map(o=>o.id===r?{...o,...s,updatedAt:new Date().toISOString()}:o)})),deleteRecord:r=>e(s=>({records:s.records.map(a=>a.id===r?{...a,status:"deleted",updatedAt:new Date().toISOString()}:a)})),getRecords:()=>t().records.filter(s=>s.status!=="deleted").sort((s,a)=>new Date(a.incidentDate).getTime()-new Date(s.incidentDate).getTime()),getRecordById:r=>t().records.find(s=>s.id===r)}),{name:"taquero-incidents"})),qM=Object.freeze(Object.defineProperty({__proto__:null,deleteIncidentRecordFromGoogleSheets:Xj,saveIncidentRecordToGoogleSheets:Zj,useIncidentsStore:Di},Symbol.toStringTag,{value:"Module"})),Fh=[{value:"equipment-failure",label:"Equipment Failure"},{value:"temperature-issue",label:"Temperature Issue"},{value:"contamination",label:"Contamination"},{value:"supplier-problem",label:"Supplier Problem"},{value:"staff-error",label:"Staff Error"},{value:"facility-issue",label:"Facility Issue"},{value:"other",label:"Other"}],KM=e=>{const[t,r,s]=e.split("-");return`${s}/${r}/${t}`},_h=e=>{const[t,r,s]=e.split("/");return`${s}-${r}-${t}`};function QM({onComplete:e,onCancel:t}){var W;const[r,s]=d.useState(1),a=Di(L=>L.addRecord),[o,i]=d.useState(KM(new Date().toISOString().split("T")[0])),[l,c]=d.useState(""),[u,h]=d.useState(""),[m,g]=d.useState(""),[j,w]=d.useState("equipment-failure"),[v,p]=d.useState(""),[f,x]=d.useState(""),[y,N]=d.useState("moderate"),[b,T]=d.useState(""),[D,E]=d.useState(""),S=5,C=r/S*100,R=()=>l.trim().length>0,k=()=>m.trim().length>=10,M=()=>v.trim().length>=10,$=()=>f.trim().length>=10,I=()=>{if(r===1&&!R()){alert("Please enter who is responsible for reporting this incident.");return}if(r===2&&!k()){alert("Please describe what went wrong (at least 10 characters).");return}if(r===3&&!M()){alert("Please describe what you did to fix it (at least 10 characters).");return}if(r===4&&!$()){alert("Please describe preventive actions (at least 10 characters).");return}r<S&&s(r+1)},B=()=>{r>1&&s(r-1)},z=L=>new Date(L).toLocaleDateString("en-NZ",{day:"numeric",month:"long",year:"numeric"}),A=L=>{switch(L){case"minor":return" Minor";case"moderate":return" Moderate";case"major":return" Major"}},F=async()=>{const O={id:`incident-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,incidentDate:_h(o),personResponsible:l,staffInvolved:u.trim().length>0?u:l,category:j,whatWentWrong:m,whatDidToFix:v,preventiveAction:f,severity:y,incidentStatus:"open",followUpDate:b.trim().length>0?_h(b):void 0,notes:D.trim().length>0?D:void 0,createdAt:new Date().toISOString(),status:"active"};a(O),Zj(O),e()};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[n.jsxs("span",{children:["Step ",r," of ",S]}),n.jsxs("span",{children:[Math.round(C),"%"]})]}),n.jsx($e,{value:C,className:"w-full"})]}),r===1&&n.jsxs(V,{children:[n.jsxs(ee,{children:[n.jsxs(te,{className:"flex items-center gap-2",children:[n.jsx(Zn,{className:"h-5 w-5"}),"Incident Details"]}),n.jsx(Ce,{children:"When did it happen and who was involved?"})]}),n.jsxs(K,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(_,{htmlFor:"incidentDate",children:["Incident Date ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(Fe,{value:o,onChange:i,placeholder:"DD/MM/YYYY"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(_,{htmlFor:"personResponsible",children:["Person Responsible (Who Noticed/Reported) ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(Y,{id:"personResponsible",placeholder:"Staff name",value:l,onChange:L=>c(L.target.value)})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"staffInvolved",children:"Staff Involved (Optional)"}),n.jsx(Y,{id:"staffInvolved",placeholder:"e.g., Richard Thomas, John Johnson",value:u,onChange:L=>h(L.target.value)}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Comma-separated list of staff involved (leave blank if same as reporter)"})]})]})]}),r===2&&n.jsxs(V,{children:[n.jsxs(ee,{children:[n.jsx(te,{children:"What Went Wrong?"}),n.jsx(Ce,{children:"Describe the incident"})]}),n.jsxs(K,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(_,{htmlFor:"whatWentWrong",children:["Description ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(ce,{id:"whatWentWrong",placeholder:"Describe what went wrong...",value:m,onChange:L=>g(L.target.value),rows:4}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Example: Fridge 2 on permanent defrost, Food left out too long, Cross-contamination incident"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(_,{children:["Category ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:"grid grid-cols-2 gap-2",children:Fh.map(L=>n.jsx(P,{type:"button",variant:j===L.value?"default":"outline",onClick:()=>w(L.value),className:"h-auto py-3",children:L.label},L.value))})]})]})]}),r===3&&n.jsxs(V,{children:[n.jsxs(ee,{children:[n.jsx(te,{children:"Immediate Fix"}),n.jsx(Ce,{children:"What did you do to fix it?"})]}),n.jsx(K,{className:"space-y-4",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs(_,{htmlFor:"whatDidToFix",children:["Corrective Action Taken ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(ce,{id:"whatDidToFix",placeholder:"Describe what you did to fix it...",value:v,onChange:L=>p(L.target.value),rows:4}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Examples: Called sparky, Moved food to backup fridge, Threw out affected food, Increased cooking time"})]})})]}),r===4&&n.jsxs(V,{children:[n.jsxs(ee,{children:[n.jsx(te,{children:"Preventive Action"}),n.jsx(Ce,{children:"What will you do to stop it happening again?"})]}),n.jsx(K,{className:"space-y-4",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs(_,{htmlFor:"preventiveAction",children:["Prevention Strategy ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(ce,{id:"preventiveAction",placeholder:"Describe what you'll do to prevent this...",value:f,onChange:L=>x(L.target.value),rows:4}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Examples: Added to cleaning schedule, Retrain staff on procedure, Change supplier, Update process"})]})})]}),r===5&&n.jsxs(V,{children:[n.jsxs(ee,{children:[n.jsx(te,{children:"Severity & Follow-up"}),n.jsx(Ce,{children:"Impact level and next steps"})]}),n.jsxs(K,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(_,{children:["Severity ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(P,{type:"button",variant:y==="minor"?"default":"outline",onClick:()=>N("minor"),className:"w-full h-auto py-4 px-4 flex items-start justify-start text-left",children:n.jsxs("div",{className:"flex items-start gap-3 w-full",children:[n.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-green-500 flex items-center justify-center mt-0.5",children:n.jsx("div",{className:"w-3 h-3 rounded-full bg-white"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-semibold",children:"Minor"}),n.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"No food affected"})]})]})}),n.jsx(P,{type:"button",variant:y==="moderate"?"default":"outline",onClick:()=>N("moderate"),className:"w-full h-auto py-4 px-4 flex items-start justify-start text-left",children:n.jsxs("div",{className:"flex items-start gap-3 w-full",children:[n.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-yellow-500 flex items-center justify-center mt-0.5",children:n.jsx("div",{className:"w-3 h-3 rounded-full bg-white"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-semibold",children:"Moderate"}),n.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Food affected but safe"})]})]})}),n.jsx(P,{type:"button",variant:y==="major"?"default":"outline",onClick:()=>N("major"),className:"w-full h-auto py-4 px-4 flex items-start justify-start text-left",children:n.jsxs("div",{className:"flex items-start gap-3 w-full",children:[n.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-red-500 flex items-center justify-center mt-0.5",children:n.jsx("div",{className:"w-3 h-3 rounded-full bg-white"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-semibold",children:"Major"}),n.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Unsafe food produced"})]})]})})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"followUpDate",children:"Follow-up Date (Optional)"}),n.jsx(Fe,{value:b,onChange:T,placeholder:"DD/MM/YYYY"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Date to verify corrective action (e.g., check in 1 week)"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"notes",children:"Additional Notes (Optional)"}),n.jsx(ce,{id:"notes",placeholder:"Any additional notes...",value:D,onChange:L=>E(L.target.value),rows:3})]}),n.jsxs("div",{className:"rounded-lg border bg-muted/50 p-4 space-y-2",children:[n.jsx("p",{className:"text-sm font-semibold",children:"Review:"}),n.jsxs("div",{className:"text-sm space-y-1",children:[n.jsxs("p",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Date:"})," ",z(o)]}),n.jsxs("p",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Reported by:"})," ",l]}),n.jsxs("p",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Category:"})," ",(W=Fh.find(L=>L.value===j))==null?void 0:W.label]}),n.jsxs("p",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Severity:"})," ",A(y)]})]})]})]})]}),n.jsxs("div",{className:"flex justify-between gap-4",children:[n.jsx(P,{variant:"outline",onClick:r===1?t:B,children:r===1?"Cancel":"Back"}),r<S?n.jsx(P,{onClick:I,children:"Next"}):n.jsx(P,{onClick:F,children:"Save Incident Report"})]})]})}function ZM(){const{records:e,isLoading:t,fetchFromGoogleSheets:r,deleteRecord:s}=Di(),[a,o]=d.useState([]),[i,l]=d.useState(!1),[c,u]=d.useState(null),[h,m]=d.useState(new Set),[g,j]=d.useState(!1),[w,v]=d.useState(null);d.useEffect(()=>{r()},[r]);const p=(M,$="success")=>{const I=Date.now().toString();o(B=>[...B,{id:I,message:M,type:$}]),setTimeout(()=>{o(B=>B.filter(z=>z.id!==I))},3e3)},f=()=>{p("Incident report saved successfully!"),r()},x=M=>{u(M),l(!0)},y=M=>{v(M),j(!0)},N=async()=>{if(w)try{await Xj(w),s(w.id),p("Incident report deleted successfully!"),j(!1),v(null)}catch(M){console.error("Error deleting incident report:",M),p("Error deleting incident report","error")}},b=async M=>{try{const{updateRecord:$}=Di.getState(),{saveIncidentRecordToGoogleSheets:I}=await VM(async()=>{const{saveIncidentRecordToGoogleSheets:z}=await Promise.resolve().then(()=>qM);return{saveIncidentRecordToGoogleSheets:z}},void 0),B={...M,incidentStatus:"resolved",updatedAt:new Date().toISOString()};await I(B),$(M.id,{incidentStatus:"resolved",updatedAt:B.updatedAt}),p("Incident marked as resolved!"),await r()}catch($){console.error("Error marking incident as resolved:",$),p("Error updating incident status","error")}},T=M=>{m($=>{const I=new Set($);return I.has(M)?I.delete(M):I.add(M),I})},D=()=>{l(!1),u(null)},E=M=>new Date(M).toLocaleDateString("en-NZ",{day:"numeric",month:"long",year:"numeric"}),S=M=>{switch(M){case"minor":return"bg-green-500";case"moderate":return"bg-yellow-500";case"major":return"bg-red-500"}},C=M=>{switch(M){case"minor":return"Minor";case"moderate":return"Moderate";case"major":return"Major"}},R=M=>({"equipment-failure":"Equipment Failure","temperature-issue":"Temperature Issue",contamination:"Contamination","supplier-problem":"Supplier Problem","staff-error":"Staff Error","facility-issue":"Facility Issue",other:"Other"})[M],k=e.filter(M=>M.status==="active").slice(0,30);return n.jsxs("div",{className:"container mx-auto p-6 max-w-6xl space-y-6",children:[n.jsxs("div",{className:"space-y-2 text-center md:text-left",children:[n.jsxs("h2",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[n.jsx(Zn,{className:"h-8 w-8 text-red-500"}),"When Something Goes Wrong"]}),n.jsx("p",{className:"text-muted-foreground text-lg",children:"Critical incident log for food safety issues and corrective actions"})]}),n.jsxs(P,{size:"lg",onClick:()=>l(!0),variant:"destructive",className:"h-12 px-6 min-h-[48px] w-full sm:w-auto",children:[n.jsx(oe,{className:"h-5 w-5 mr-2"}),"Report Incident"]}),n.jsx(Pe,{open:i,onOpenChange:M=>!M&&D(),children:n.jsxs(De,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[n.jsx(Te,{children:n.jsxs(Ee,{className:"text-2xl flex items-center gap-2",children:[n.jsx(Zn,{className:"h-6 w-6 text-red-500"}),c?"Edit":"Report"," Incident"]})}),n.jsx(QM,{onComplete:()=>{D(),f()},onCancel:D})]})}),t&&n.jsxs("div",{className:"flex flex-col items-center justify-center p-8 space-y-3",children:[n.jsx(ke,{className:"h-8 w-8 animate-spin text-muted-foreground"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading incidents"})]}),!t&&k.length>0&&n.jsxs(V,{children:[n.jsx(ee,{children:n.jsx(te,{children:"Recent Incidents"})}),n.jsx(K,{children:n.jsx("div",{className:"space-y-2",children:k.map((M,$)=>{const I=h.has(M.id);return n.jsxs("div",{className:"border rounded-lg overflow-hidden transition-all duration-200 hover:border-primary/50",style:{animationDelay:`${$*50}ms`},children:[n.jsxs("div",{className:"flex items-center justify-between p-4 bg-card hover:bg-muted/50 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0 cursor-pointer",onClick:()=>T(M.id),children:[n.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center transition-colors ${I?"bg-red-500 text-white":"bg-red-500/10"}`,children:n.jsx(Zn,{className:`h-5 w-5 ${I?"":"text-red-500"}`})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h3",{className:"font-semibold text-lg truncate",children:R(M.category)}),M.followUpDate&&n.jsx(il,{variant:M.incidentStatus==="resolved"?"default":"destructive",className:"text-xs",children:M.incidentStatus==="resolved"?" Resolved":"Open"})]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[E(M.incidentDate),"  ",C(M.severity)]})]}),n.jsx("div",{className:`h-3 w-3 rounded-full flex-shrink-0 ${S(M.severity)}`})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[n.jsx(P,{variant:"ghost",size:"sm",onClick:B=>{B.stopPropagation(),x(M)},className:"h-9 w-9 p-0",children:n.jsx(Lt,{className:"h-4 w-4"})}),n.jsx(P,{variant:"ghost",size:"sm",onClick:B=>{B.stopPropagation(),y(M)},className:"h-9 w-9 p-0 text-destructive hover:text-destructive",children:n.jsx(Mt,{className:"h-4 w-4"})}),n.jsx(P,{variant:"ghost",size:"sm",onClick:()=>T(M.id),className:"h-9 w-9 p-0",children:I?n.jsx(Bt,{className:"h-5 w-5"}):n.jsx(Et,{className:"h-5 w-5"})})]})]}),I&&n.jsxs("div",{className:"border-t bg-muted/30 p-4 space-y-4 animate-in fade-in slide-in-from-top-2 duration-200",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:"What Went Wrong"}),n.jsx("p",{className:"text-sm whitespace-pre-line leading-relaxed",children:M.whatWentWrong})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:"Corrective Action Taken"}),n.jsx("p",{className:"text-sm whitespace-pre-line leading-relaxed",children:M.whatDidToFix})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:"Preventive Action"}),n.jsx("p",{className:"text-sm whitespace-pre-line leading-relaxed",children:M.preventiveAction})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:"Person Responsible"}),n.jsx("p",{className:"text-sm",children:M.personResponsible})]}),M.staffInvolved&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:"Staff Involved"}),n.jsx("p",{className:"text-sm",children:M.staffInvolved})]})]}),M.followUpDate&&n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:"Follow-up Date"}),n.jsx("p",{className:"text-sm",children:E(M.followUpDate)})]}),M.incidentStatus!=="resolved"&&n.jsx(P,{onClick:B=>{B.stopPropagation(),b(M)},variant:"default",size:"sm",className:"w-full bg-green-600 hover:bg-green-700",children:" Mark Follow-up Complete"})]}),M.notes&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:"Notes"}),n.jsx("p",{className:"text-sm whitespace-pre-line leading-relaxed",children:M.notes})]}),n.jsxs("div",{className:"pt-2 border-t text-xs text-muted-foreground space-y-1",children:[n.jsxs("p",{children:["Reported: ",E(M.createdAt)]}),M.updatedAt&&n.jsxs("p",{children:["Last updated: ",E(M.updatedAt)]})]})]})]},M.id)})})})]}),!t&&k.length===0&&n.jsx(V,{children:n.jsxs(K,{className:"flex flex-col items-center justify-center p-12",children:[n.jsx(Zn,{className:"h-16 w-16 text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No incident reports yet"}),n.jsx("p",{className:"text-muted-foreground text-center mb-6",children:"Report incidents to track issues, fixes, and preventive actions"}),n.jsxs(P,{onClick:()=>l(!0),variant:"destructive",children:[n.jsx(oe,{className:"mr-2 h-5 w-5"}),"Report First Incident"]})]})}),n.jsx(jt,{open:g,onOpenChange:j,children:n.jsxs(at,{children:[n.jsxs(ot,{children:[n.jsx(lt,{children:"Delete Incident Report?"}),n.jsx(ct,{children:"This will permanently delete this incident report. This action cannot be undone."})]}),n.jsxs(it,{children:[n.jsx(ut,{children:"Cancel"}),n.jsx(dt,{onClick:N,className:"bg-destructive hover:bg-destructive/90",children:"Delete"})]})]})}),n.jsx("div",{className:"fixed bottom-4 right-4 space-y-2 z-50",children:a.map(M=>n.jsx("div",{className:`p-4 rounded-lg shadow-lg ${M.type==="success"?"bg-green-500":"bg-red-500"} text-white`,children:M.message},M.id))})]})}const ul=d.forwardRef(({className:e,...t},r)=>n.jsx("div",{className:"relative w-full overflow-auto",children:n.jsx("table",{ref:r,className:X("w-full caption-bottom text-sm",e),...t})}));ul.displayName="Table";const ml=d.forwardRef(({className:e,...t},r)=>n.jsx("thead",{ref:r,className:X("[&_tr]:border-b",e),...t}));ml.displayName="TableHeader";const fl=d.forwardRef(({className:e,...t},r)=>n.jsx("tbody",{ref:r,className:X("[&_tr:last-child]:border-0",e),...t}));fl.displayName="TableBody";const XM=d.forwardRef(({className:e,...t},r)=>n.jsx("tfoot",{ref:r,className:X("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));XM.displayName="TableFooter";const ir=d.forwardRef(({className:e,...t},r)=>n.jsx("tr",{ref:r,className:X("border-b transition-all duration-200 ease-in-out hover:bg-muted/50 data-[state=selected]:bg-muted hover:shadow-sm",e),...t}));ir.displayName="TableRow";const qe=d.forwardRef(({className:e,...t},r)=>n.jsx("th",{ref:r,className:X("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));qe.displayName="TableHead";const Ue=d.forwardRef(({className:e,...t},r)=>n.jsx("td",{ref:r,className:X("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));Ue.displayName="TableCell";const JM=d.forwardRef(({className:e,...t},r)=>n.jsx("caption",{ref:r,className:X("mt-4 text-sm text-muted-foreground",e),...t}));JM.displayName="TableCaption";const dm="https://script.google.com/macros/s/AKfycbxp2QQhGeF1dgQgqBsOkC5b01iLP6YPrfhaSX7yvJ6CGC2aevDL9Aa_7mnD4Nf0wOrfBg/exec";async function e4(e){try{const t={id:e.id,traceDate:e.traceDate,productType:e.productType,brand:e.brand,batchLotInfo:e.batchLotInfo,supplierName:e.supplierName,supplierContact:e.supplierContact,manufacturerName:e.manufacturerName,manufacturerContact:e.manufacturerContact,dateReceived:e.dateReceived,performedBy:e.performedBy,otherInfo:e.otherInfo,createdAt:e.createdAt,updatedAt:e.updatedAt,status:e.status,unixTimestamp:Math.floor(new Date(e.createdAt).getTime()/1e3)};return await fetch(dm,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),{success:!0}}catch(t){return console.error("Error saving traceability record to Google Sheets:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}async function t4(e){try{const t={id:e.id,traceDate:e.traceDate,productType:e.productType,brand:e.brand,batchLotInfo:e.batchLotInfo,supplierName:e.supplierName,supplierContact:e.supplierContact,manufacturerName:e.manufacturerName,manufacturerContact:e.manufacturerContact,dateReceived:e.dateReceived,performedBy:e.performedBy,otherInfo:e.otherInfo,createdAt:e.createdAt,updatedAt:new Date().toISOString(),status:"deleted",unixTimestamp:Math.floor(new Date(e.createdAt).getTime()/1e3)};return await fetch(dm,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),{success:!0}}catch(t){return console.error("Error deleting traceability record from Google Sheets:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}const sa=_e()(Le((e,t)=>({records:[],isLoading:!1,lastFetchTime:null,fetchError:null,fetchFromGoogleSheets:async()=>{e({isLoading:!0,fetchError:null});try{const r=await fetch(dm,{method:"GET"});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const s=await r.json();if(s.success&&s.data)e({records:s.data,lastFetchTime:new Date().toISOString(),fetchError:null});else throw new Error(s.error||"Failed to fetch traceability records")}catch(r){console.error("Error fetching traceability records from Google Sheets:",r),e({fetchError:r instanceof Error?r.message:"Unknown error"})}finally{e({isLoading:!1})}},addRecord:r=>e(s=>({records:[r,...s.records]})),updateRecord:(r,s)=>e(a=>({records:a.records.map(o=>o.id===r?{...o,...s,updatedAt:new Date().toISOString()}:o)})),deleteRecord:r=>e(s=>({records:s.records.map(a=>a.id===r?{...a,status:"deleted",updatedAt:new Date().toISOString()}:a)})),getRecords:()=>t().records.filter(s=>s.status!=="deleted").sort((s,a)=>new Date(a.traceDate).getTime()-new Date(s.traceDate).getTime()),getRecordById:r=>t().records.find(s=>s.id===r)}),{name:"taquero-traceability"})),n4=e=>{const[t,r,s]=e.split("-");return`${s}/${r}/${t}`},Lh=e=>{const[t,r,s]=e.split("/");return`${s}-${r}-${t}`};function r4({onComplete:e,onCancel:t}){const[r,s]=d.useState(1),a=sa(O=>O.addRecord),[o,i]=d.useState(n4(new Date().toISOString().split("T")[0])),[l,c]=d.useState(""),[u,h]=d.useState(""),[m,g]=d.useState(""),[j,w]=d.useState(""),[v,p]=d.useState(""),[f,x]=d.useState(!0),[y,N]=d.useState(""),[b,T]=d.useState(""),[D,E]=d.useState(""),[S,C]=d.useState(""),[R,k]=d.useState(""),M=3,$=r/M*100,I=()=>o.trim().length>0&&l.trim().length>0&&u.trim().length>0&&m.trim().length>0,B=()=>{const O=j.trim().length>0&&v.trim().length>0;return f?O:O&&y.trim().length>0&&b.trim().length>0},z=()=>S.trim().length>0,A=()=>r===1?I():r===2?B():r===3?z():!1,F=()=>{A()&&r<M&&s(r+1)},W=()=>{r>1&&s(r-1)},L=async()=>{if(!A())return;const H={id:`trace-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,traceDate:Lh(o),productType:l,brand:u,batchLotInfo:m,supplierName:j,supplierContact:v,manufacturerName:f?j:y,manufacturerContact:f?v:b,dateReceived:D.trim().length>0?Lh(D):void 0,performedBy:S,otherInfo:R.trim().length>0?R:void 0,createdAt:new Date().toISOString(),status:"active"};a(H),await e4(H),e()};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Step ",r," of ",M]})}),n.jsx($e,{value:$,className:"h-2"})]}),r===1&&n.jsxs(V,{children:[n.jsxs(ee,{children:[n.jsx(te,{children:"Product Information"}),n.jsx(Ce,{children:"Details about the product being traced"})]}),n.jsxs(K,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"traceDate",children:"Date of Trace Exercise *"}),n.jsx(Fe,{value:o,onChange:i,placeholder:"DD/MM/YYYY"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"productType",children:"Product Type *"}),n.jsx(Y,{id:"productType",placeholder:"e.g., Dumpling wrapper, Beef mince, Chicken breast",value:l,onChange:O=>c(O.target.value),required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"brand",children:"Brand *"}),n.jsx(Y,{id:"brand",placeholder:"e.g., Ying Yang, Tegel, Anchor",value:u,onChange:O=>h(O.target.value),required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"batchLotInfo",children:"Batch / Lot Information *"}),n.jsx(Y,{id:"batchLotInfo",placeholder:"e.g., SGH117801, Batch #2024-0712",value:m,onChange:O=>g(O.target.value),required:!0})]})]})]}),r===2&&n.jsxs(V,{children:[n.jsxs(ee,{children:[n.jsx(te,{children:"Supplier & Manufacturer"}),n.jsx(Ce,{children:"Contact details for supplier and manufacturer"})]}),n.jsxs(K,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"supplierName",children:"Supplier Name *"}),n.jsx(Y,{id:"supplierName",placeholder:"e.g., Ying Yang Manufacturing Co",value:j,onChange:O=>w(O.target.value),required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"supplierContact",children:"Supplier Contact Details *"}),n.jsx(ce,{id:"supplierContact",placeholder:`Phone, email, address
e.g., +86 23445657
alanlee@yingyang.co.cn`,value:v,onChange:O=>p(O.target.value),rows:3,required:!0})]}),n.jsxs("div",{className:"flex items-center space-x-2 py-2",children:[n.jsx(Ya,{id:"sameAsSupplier",checked:f,onCheckedChange:O=>x(O===!0)}),n.jsx(_,{htmlFor:"sameAsSupplier",className:"font-normal cursor-pointer",children:"Manufacturer is the same as supplier"})]}),!f&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"manufacturerName",children:"Manufacturer Name *"}),n.jsx(Y,{id:"manufacturerName",placeholder:"e.g., Ying Yang Manufacturing Co, Shanghai",value:y,onChange:O=>N(O.target.value),required:!f})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"manufacturerContact",children:"Manufacturer Contact Details *"}),n.jsx(ce,{id:"manufacturerContact",placeholder:`Contact person, phone, email
e.g., Mr Alan Lee, owner
tel +86 23445657
Email: alanlee@yingyang.co.cn`,value:b,onChange:O=>T(O.target.value),rows:4,required:!f})]})]})]})]}),r===3&&n.jsxs(V,{children:[n.jsxs(ee,{children:[n.jsx(te,{children:"Additional Details"}),n.jsx(Ce,{children:"Additional information about the trace exercise"})]}),n.jsxs(K,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"dateReceived",children:"Date Product Received"}),n.jsx(Fe,{value:D,onChange:E,placeholder:"DD/MM/YYYY"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Optional: When was this product received?"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"performedBy",children:"Trace Performed By *"}),n.jsx(Y,{id:"performedBy",placeholder:"Person who performed this trace",value:S,onChange:O=>C(O.target.value),required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"otherInfo",children:"Other Information"}),n.jsx(ce,{id:"otherInfo",placeholder:`Additional details such as:
- Certificates of registration
- Registration numbers
- Transportation details
- Product specifications
- Compliance with NZ Food Standards`,value:R,onChange:O=>k(O.target.value),rows:8}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Optional: Certificates, registration, transportation, specifications, etc."})]}),n.jsxs("div",{className:"pt-4 border-t",children:[n.jsx("h4",{className:"font-medium mb-2",children:"Review Summary"}),n.jsxs("div",{className:"space-y-1 text-sm text-muted-foreground",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Product:"})," ",l," (",u,")"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Batch:"})," ",m]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Supplier:"})," ",j]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Date:"})," ",new Date(o).toLocaleDateString()]})]})]})]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsxs(P,{type:"button",variant:"outline",onClick:r===1?t:W,children:[n.jsx(Qi,{className:"w-4 h-4 mr-2"}),r===1?"Cancel":"Back"]}),r<M?n.jsxs(P,{onClick:F,disabled:!A(),children:["Next",n.jsx(Fs,{className:"w-4 h-4 ml-2"})]}):n.jsxs(P,{onClick:L,disabled:!A(),children:[n.jsx(_g,{className:"w-4 h-4 mr-2"}),"Save Trace Record"]})]})]})}function s4(){const[e,t]=d.useState(!1),[r,s]=d.useState(new Set),a=sa(h=>h.getRecords()),o=sa(h=>h.deleteRecord),i=sa(h=>h.fetchFromGoogleSheets),l=sa(h=>h.isLoading);d.useEffect(()=>{i()},[i]);const c=async h=>{window.confirm("Are you sure you want to delete this traceability record?")&&(o(h.id),await t4(h))},u=h=>{const m=new Set(r);m.has(h)?m.delete(h):m.add(h),s(m)};return n.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Trace Your Food"}),n.jsx("p",{className:"text-muted-foreground mt-2",children:"Document traceability exercises from supplier to customer"})]}),n.jsxs(P,{onClick:()=>t(!0),children:[n.jsx(oe,{className:"w-4 h-4 mr-2"}),"Add Trace Record"]})]}),n.jsxs(V,{children:[n.jsxs(ee,{children:[n.jsx(te,{children:"Traceability Exercise Log"}),n.jsx(Ce,{children:'MPI requires proof of "one step back, one step forward" traceability for recalls'})]}),n.jsx(K,{children:l?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading records..."}):a.length===0?n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(xu,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"No traceability records yet"}),n.jsx("p",{className:"text-sm",children:"Start by adding your first trace exercise"})]}):n.jsxs(ul,{children:[n.jsx(ml,{children:n.jsxs(ir,{children:[n.jsx(qe,{className:"w-12"}),n.jsx(qe,{children:"Date"}),n.jsx(qe,{children:"Product"}),n.jsx(qe,{children:"Brand"}),n.jsx(qe,{children:"Batch/Lot"}),n.jsx(qe,{children:"Supplier"}),n.jsx(qe,{children:"Performed By"}),n.jsx(qe,{className:"w-24",children:"Actions"})]})}),n.jsx(fl,{children:a.map(h=>{const m=r.has(h.id);return n.jsxs(n.Fragment,{children:[n.jsxs(ir,{className:"cursor-pointer hover:bg-muted/50",children:[n.jsx(Ue,{onClick:()=>u(h.id),children:m?n.jsx(Et,{className:"w-4 h-4"}):n.jsx(Fs,{className:"w-4 h-4"})}),n.jsx(Ue,{onClick:()=>u(h.id),children:new Date(h.traceDate).toLocaleDateString()}),n.jsx(Ue,{onClick:()=>u(h.id),children:h.productType}),n.jsx(Ue,{onClick:()=>u(h.id),children:h.brand}),n.jsx(Ue,{onClick:()=>u(h.id),children:n.jsx(il,{variant:"outline",children:h.batchLotInfo})}),n.jsx(Ue,{onClick:()=>u(h.id),children:h.supplierName}),n.jsx(Ue,{onClick:()=>u(h.id),children:h.performedBy}),n.jsx(Ue,{children:n.jsx(P,{variant:"ghost",size:"icon",onClick:g=>{g.stopPropagation(),c(h)},children:n.jsx(Mt,{className:"w-4 h-4 text-destructive"})})})]},h.id),m&&n.jsx(ir,{children:n.jsx(Ue,{colSpan:8,className:"bg-muted/30",children:n.jsxs("div",{className:"p-4 space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Supplier Details"}),n.jsxs("div",{className:"space-y-1 text-sm",children:[n.jsxs("p",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Name:"})," ",h.supplierName]}),n.jsxs("p",{className:"whitespace-pre-wrap",children:[n.jsx("span",{className:"text-muted-foreground",children:"Contact:"}),n.jsx("br",{}),h.supplierContact]})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Manufacturer Details"}),n.jsxs("div",{className:"space-y-1 text-sm",children:[n.jsxs("p",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Name:"})," ",h.manufacturerName]}),n.jsxs("p",{className:"whitespace-pre-wrap",children:[n.jsx("span",{className:"text-muted-foreground",children:"Contact:"}),n.jsx("br",{}),h.manufacturerContact]})]})]})]}),h.dateReceived&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Date Received"}),n.jsx("p",{className:"text-sm",children:new Date(h.dateReceived).toLocaleDateString()})]}),h.otherInfo&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Other Information"}),n.jsx("p",{className:"text-sm whitespace-pre-wrap",children:h.otherInfo})]}),n.jsx("div",{className:"pt-2 border-t text-xs text-muted-foreground",children:n.jsxs("p",{children:["Record created: ",new Date(h.createdAt).toLocaleString()]})})]})})},`${h.id}-details`)]})})})]})})]}),n.jsx(Pe,{open:e,onOpenChange:t,children:n.jsxs(De,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsxs(Te,{children:[n.jsx(Ee,{children:"Add Traceability Record"}),n.jsx(Hu,{children:"Document a product trace from supplier to customer for MPI compliance"})]}),n.jsx(r4,{onComplete:()=>t(!1),onCancel:()=>t(!1)})]})})]})}const um="https://script.google.com/macros/s/AKfycbzzGSSfovn3OofuDeeVNVdmJnvjT6vcMkBSiG1Lg1rLJBpZxhRP2CQawD-xzIsup7qc/exec";async function a4(e){try{const t={unixTimestamp:Math.floor(new Date(e.createdAt).getTime()/1e3),id:e.id,customerName:e.customerName,customerContact:e.customerContact,purchaseDate:e.purchaseDate,purchaseTime:e.purchaseTime,foodItem:e.foodItem,batchLotNumber:e.batchLotNumber,complaintDescription:e.complaintDescription,complaintType:e.complaintType,causeInvestigation:e.causeInvestigation,actionTakenImmediate:e.actionTakenImmediate,actionTakenPreventive:e.actionTakenPreventive,resolvedBy:e.resolvedBy,resolutionDate:e.resolutionDate,complaintStatus:e.complaintStatus,linkedIncidentId:e.linkedIncidentId,notes:e.notes,createdAt:e.createdAt,updatedAt:e.updatedAt,status:e.status};return await fetch(um,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),{success:!0}}catch(t){return console.error("Error saving complaint record to Google Sheets:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}async function o4(e){try{const t={unixTimestamp:Math.floor(new Date(e.createdAt).getTime()/1e3),id:e.id,customerName:e.customerName,customerContact:e.customerContact,purchaseDate:e.purchaseDate,purchaseTime:e.purchaseTime,foodItem:e.foodItem,batchLotNumber:e.batchLotNumber,complaintDescription:e.complaintDescription,complaintType:e.complaintType,causeInvestigation:e.causeInvestigation,actionTakenImmediate:e.actionTakenImmediate,actionTakenPreventive:e.actionTakenPreventive,resolvedBy:e.resolvedBy,resolutionDate:e.resolutionDate,complaintStatus:e.complaintStatus,linkedIncidentId:e.linkedIncidentId,notes:e.notes,createdAt:e.createdAt,updatedAt:new Date().toISOString(),status:"deleted"};return await fetch(um,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),{success:!0}}catch(t){return console.error("Error deleting complaint record from Google Sheets:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}const aa=_e()(Le((e,t)=>({records:[],isLoading:!1,lastFetchTime:null,fetchError:null,fetchFromGoogleSheets:async()=>{e({isLoading:!0,fetchError:null});try{const r=await fetch(um,{method:"GET"});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const s=await r.json();if(s.success&&s.data)e({records:s.data,lastFetchTime:new Date().toISOString(),fetchError:null});else throw new Error(s.error||"Failed to fetch complaint records")}catch(r){console.error("Error fetching complaint records from Google Sheets:",r),e({fetchError:r instanceof Error?r.message:"Unknown error"})}finally{e({isLoading:!1})}},addRecord:r=>e(s=>({records:[r,...s.records]})),updateRecord:(r,s)=>e(a=>({records:a.records.map(o=>o.id===r?{...o,...s,updatedAt:new Date().toISOString()}:o)})),deleteRecord:r=>e(s=>({records:s.records.map(a=>a.id===r?{...a,status:"deleted",updatedAt:new Date().toISOString()}:a)})),getRecords:()=>t().records.filter(s=>s.status!=="deleted").sort((s,a)=>new Date(a.purchaseDate).getTime()-new Date(s.purchaseDate).getTime()),getRecordById:r=>t().records.find(s=>s.id===r)}),{name:"taquero-complaints"})),i4=e=>{const[t,r,s]=e.split("-");return`${s}/${r}/${t}`},l4=e=>{const[t,r,s]=e.split("/");return`${s}-${r}-${t}`};function c4({onComplete:e,onCancel:t}){const[r,s]=d.useState(1),[a,o]=d.useState(!1),i=aa(G=>G.addRecord),l=Ie(G=>G.currentUser),[c,u]=d.useState(""),[h,m]=d.useState(""),[g,j]=d.useState(i4(new Date().toISOString().split("T")[0])),[w,v]=d.useState(""),[p,f]=d.useState(""),[x,y]=d.useState(""),[N,b]=d.useState(""),[T,D]=d.useState(void 0),[E,S]=d.useState(""),[C,R]=d.useState(""),[k,M]=d.useState(""),[$,I]=d.useState((l==null?void 0:l.name)||""),[B,z]=d.useState(""),A=6,F=r/A*100,W=["Illness/Sickness","Foreign Object","Quality Issue","Temperature Issue","Allergen Issue","Other"],L=()=>c.trim().length>0&&h.trim().length>0,O=()=>g.trim().length>0&&w.trim().length>0&&p.trim().length>0,H=()=>N.trim().length>0,J=()=>E.trim().length>0,me=()=>C.trim().length>0&&k.trim().length>0,he=()=>$.trim().length>0,ye=()=>r===1?L():r===2?O():r===3?H():r===4?J():r===5?me():r===6?he():!1,zt=()=>{ye()&&r<A&&s(r+1)},We=()=>{r>1&&s(r-1)},Wt=async()=>{if(!(!ye()||a)){o(!0);try{const Ut={id:`complaint-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,customerName:c,customerContact:h,purchaseDate:l4(g),purchaseTime:w,foodItem:p,batchLotNumber:x.trim().length>0?x:void 0,complaintDescription:N,complaintType:T,causeInvestigation:E,actionTakenImmediate:C,actionTakenPreventive:k,resolvedBy:$,resolutionDate:new Date().toISOString().split("T")[0],complaintStatus:"Under Investigation",notes:B.trim().length>0?B:void 0,createdAt:new Date().toISOString(),status:"active"};i(Ut),await a4(Ut),e()}catch(G){console.error("Error saving complaint:",G),o(!1)}}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Step ",r," of ",A]})}),n.jsx($e,{value:F,className:"h-2"})]}),r===1&&n.jsxs(V,{children:[n.jsxs(ee,{children:[n.jsx(te,{children:"Customer Information"}),n.jsx(Ce,{children:"Who made the complaint?"})]}),n.jsxs(K,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"customerName",children:"Customer Name *"}),n.jsx(Y,{id:"customerName",className:"h-16 text-xl",placeholder:"e.g., Fred Smith",value:c,onChange:G=>u(G.target.value),required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"customerContact",children:"Customer Contact Details *"}),n.jsx(Y,{id:"customerContact",className:"h-16 text-xl",placeholder:"e.g., +64 23 456 789 or email@example.com",value:h,onChange:G=>m(G.target.value),required:!0})]})]})]}),r===2&&n.jsxs(V,{children:[n.jsxs(ee,{children:[n.jsx(te,{children:"Purchase Details"}),n.jsx(Ce,{children:"When and what did they purchase?"})]}),n.jsxs(K,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"purchaseDate",children:"Date of Purchase *"}),n.jsx(Fe,{value:g,onChange:j,placeholder:"DD/MM/YYYY"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"purchaseTime",children:"Time of Purchase *"}),n.jsx(Y,{id:"purchaseTime",placeholder:"e.g., 12:30 PM, Lunch time",value:w,onChange:G=>v(G.target.value),required:!0}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Approximate time is fine"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"foodItem",children:"Food Item Purchased *"}),n.jsx(Y,{id:"foodItem",placeholder:"e.g., Mince and cheese pie",value:p,onChange:G=>f(G.target.value),required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"batchLotNumber",children:"Batch / Lot Number"}),n.jsx(Y,{id:"batchLotNumber",placeholder:"e.g., Batch made Monday morning (if known)",value:x,onChange:G=>y(G.target.value)}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Optional: If known"})]})]})]}),r===3&&n.jsxs(V,{children:[n.jsxs(ee,{children:[n.jsx(te,{children:"Complaint Description"}),n.jsx(Ce,{children:"What is the complaint?"})]}),n.jsxs(K,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"complaintDescription",children:"Complaint *"}),n.jsx(ce,{id:"complaintDescription",placeholder:`e.g., Claims pie made them sick

Describe what the customer reported...`,value:N,onChange:G=>b(G.target.value),rows:6,required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{children:"Complaint Type (Optional Helper)"}),n.jsx("div",{className:"grid grid-cols-2 gap-2",children:W.map(G=>n.jsx(V,{className:`cursor-pointer transition-colors ${T===G?"border-primary bg-primary/10":"hover:bg-muted/50"}`,onClick:()=>D(G),children:n.jsx(K,{className:"p-4",children:n.jsx("p",{className:"text-sm font-medium",children:G})})},G))})]})]})]}),r===4&&n.jsxs(V,{children:[n.jsxs(ee,{children:[n.jsx(te,{children:"Investigation & Cause"}),n.jsx(Ce,{children:"What did you find? What caused the problem?"})]}),n.jsx(K,{className:"space-y-4",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"causeInvestigation",children:"Cause of the Problem *"}),n.jsx(ce,{id:"causeInvestigation",placeholder:`e.g., See investigation below. Does not appear to be caused by us

What records did you check?
What did you find?
Was it your fault or not?`,value:E,onChange:G=>S(G.target.value),rows:8,required:!0}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Document your investigation: What records you checked, what you found, conclusion"})]})})]}),r===5&&n.jsxs(V,{children:[n.jsxs(ee,{children:[n.jsx(te,{children:"Actions Taken"}),n.jsx(Ce,{children:"What did you do immediately? What will you do to prevent it?"})]}),n.jsxs(K,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"actionTakenImmediate",children:"Immediate Action Taken *"}),n.jsx(ce,{id:"actionTakenImmediate",placeholder:`e.g., Apologized to customer
Offered refund
Checked batch records
Reviewed our procedures with customer`,value:C,onChange:G=>R(G.target.value),rows:5,required:!0}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"What you did right away to address the complaint"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"actionTakenPreventive",children:"Preventive Action *"}),n.jsx(ce,{id:"actionTakenPreventive",placeholder:`e.g., Retrain staff on proper cooking temps
Update our cooking checklist
Increase monitoring frequency
Review supplier quality`,value:k,onChange:G=>M(G.target.value),rows:5,required:!0}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"What you'll do to prevent this happening again"})]})]})]}),r===6&&n.jsxs(V,{children:[n.jsxs(ee,{children:[n.jsx(te,{children:"Resolution"}),n.jsx(Ce,{children:"Who managed this complaint?"})]}),n.jsxs(K,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"resolvedBy",children:"Managed By or Resolved By *"}),n.jsx(Y,{id:"resolvedBy",placeholder:"Staff name",value:$,onChange:G=>I(G.target.value),required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(_,{htmlFor:"notes",children:"Additional Notes"}),n.jsx(ce,{id:"notes",placeholder:"Any additional information...",value:B,onChange:G=>z(G.target.value),rows:4})]}),n.jsxs("div",{className:"pt-4 border-t",children:[n.jsx("h4",{className:"font-medium mb-2",children:"Review Summary"}),n.jsxs("div",{className:"space-y-1 text-sm text-muted-foreground",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Customer:"})," ",c]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Food:"})," ",p]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Date:"})," ",new Date(g).toLocaleDateString()," at ",w]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Managed By:"})," ",$]})]})]})]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsxs(P,{type:"button",variant:"outline",onClick:r===1?t:We,children:[n.jsx(Qi,{className:"w-4 h-4 mr-2"}),r===1?"Cancel":"Back"]}),r<A?n.jsxs(P,{onClick:zt,disabled:!ye(),children:["Next",n.jsx(Fs,{className:"w-4 h-4 ml-2"})]}):n.jsx(P,{onClick:Wt,disabled:!ye()||a,children:a?n.jsxs(n.Fragment,{children:[n.jsx(ke,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(_g,{className:"w-4 h-4 mr-2"}),"Save Complaint"]})})]})]})}function d4(){const[e,t]=d.useState(!1),[r,s]=d.useState(new Set),[a,o]=d.useState(!1),[i,l]=d.useState(null),c=aa(p=>p.getRecords()),u=aa(p=>p.deleteRecord),h=aa(p=>p.fetchFromGoogleSheets),m=aa(p=>p.isLoading);d.useEffect(()=>{h()},[h]);const g=p=>{l(p),o(!0)},j=async()=>{i&&(u(i.id),await o4(i),o(!1),l(null))},w=p=>{const f=new Set(r);f.has(p)?f.delete(p):f.add(p),s(f)},v=p=>new Date(p).toLocaleDateString("en-NZ",{day:"numeric",month:"long",year:"numeric"});return n.jsxs("div",{className:"container mx-auto p-6 max-w-6xl space-y-6",children:[n.jsxs("div",{className:"space-y-2 text-center md:text-left",children:[n.jsxs("h2",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[n.jsx(Wo,{className:"h-8 w-8 text-red-500"}),"Customer Complaints Information"]}),n.jsx("p",{className:"text-muted-foreground text-lg",children:"Document complaints that customers expressed to you"})]}),n.jsxs(P,{size:"lg",onClick:()=>t(!0),variant:"destructive",className:"h-12 px-6 min-h-[48px] w-full sm:w-auto",children:[n.jsx(oe,{className:"h-5 w-5 mr-2"}),"Add Complaint"]}),m&&n.jsxs("div",{className:"flex flex-col items-center justify-center p-8 space-y-3",children:[n.jsx(ke,{className:"h-8 w-8 animate-spin text-muted-foreground"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Fetching Data"})]}),!m&&c.length>0&&n.jsxs(V,{children:[n.jsx(ee,{children:n.jsx(te,{children:"Complaint Records"})}),n.jsx(K,{children:n.jsx("div",{className:"space-y-2",children:c.map((p,f)=>{const x=r.has(p.id);return n.jsxs("div",{className:"border rounded-lg overflow-hidden transition-all duration-200 hover:border-primary/50",style:{animationDelay:`${f*50}ms`},children:[n.jsxs("div",{className:"flex items-center justify-between p-4 bg-card hover:bg-muted/50 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0 cursor-pointer",onClick:()=>w(p.id),children:[n.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center transition-colors ${x?"bg-red-500 text-white":"bg-red-500/10"}`,children:n.jsx(Wo,{className:`h-5 w-5 ${x?"":"text-red-500"}`})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h3",{className:"font-semibold text-lg truncate",children:[p.customerName," - ",p.foodItem]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[v(p.purchaseDate),"  ",p.complaintStatus]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[n.jsx(P,{variant:"ghost",size:"sm",onClick:y=>{y.stopPropagation(),g(p)},className:"h-9 w-9 p-0 text-destructive hover:text-destructive",children:n.jsx(Mt,{className:"h-4 w-4"})}),n.jsx(P,{variant:"ghost",size:"sm",onClick:()=>w(p.id),className:"h-9 w-9 p-0",children:x?n.jsx(Bt,{className:"h-5 w-5"}):n.jsx(Et,{className:"h-5 w-5"})})]})]}),x&&n.jsxs("div",{className:"border-t bg-muted/30 p-4 space-y-4 animate-in fade-in slide-in-from-top-2 duration-200",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:"Complaint"}),n.jsx("p",{className:"text-sm whitespace-pre-line leading-relaxed",children:p.complaintDescription})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:"Customer Contact"}),n.jsx("p",{className:"text-sm",children:p.customerContact})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:"Purchase Time"}),n.jsx("p",{className:"text-sm",children:p.purchaseTime})]})]}),p.batchLotNumber&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:"Batch/Lot Number"}),n.jsx("p",{className:"text-sm font-mono",children:p.batchLotNumber})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:"Investigation & Cause"}),n.jsx("p",{className:"text-sm whitespace-pre-line leading-relaxed",children:p.causeInvestigation})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:"Immediate Action"}),n.jsx("p",{className:"text-sm whitespace-pre-line leading-relaxed",children:p.actionTakenImmediate})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:"Preventive Action"}),n.jsx("p",{className:"text-sm whitespace-pre-line leading-relaxed",children:p.actionTakenPreventive})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:"Resolved By"}),n.jsxs("p",{className:"text-sm",children:[p.resolvedBy," on ",v(p.resolutionDate)]})]}),p.notes&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2 text-sm uppercase tracking-wide text-muted-foreground",children:"Additional Notes"}),n.jsx("p",{className:"text-sm whitespace-pre-line leading-relaxed",children:p.notes})]}),n.jsx("div",{className:"pt-2 border-t text-xs text-muted-foreground space-y-1",children:n.jsxs("p",{children:["Recorded: ",v(p.createdAt)]})})]})]},p.id)})})})]}),!m&&c.length===0&&n.jsx(V,{children:n.jsxs(K,{className:"flex flex-col items-center justify-center p-12",children:[n.jsx(Wo,{className:"h-16 w-16 text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No complaint records yet"}),n.jsx("p",{className:"text-muted-foreground text-center mb-6",children:"Start documenting customer complaints for MPI compliance"}),n.jsxs(P,{onClick:()=>t(!0),variant:"destructive",children:[n.jsx(oe,{className:"mr-2 h-5 w-5"}),"Add First Complaint"]})]})}),n.jsx(Pe,{open:e,onOpenChange:t,children:n.jsxs(De,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsxs(Te,{children:[n.jsx(Ee,{children:"Add Customer Complaint"}),n.jsx(Hu,{children:"Document the complaint, investigation, and resolution for MPI compliance"})]}),n.jsx(c4,{onComplete:()=>t(!1),onCancel:()=>t(!1)})]})}),n.jsx(jt,{open:a,onOpenChange:o,children:n.jsxs(at,{children:[n.jsxs(ot,{children:[n.jsx(lt,{children:"Delete Complaint Record?"}),n.jsx(ct,{children:"This will permanently delete this customer complaint record. This action cannot be undone."})]}),n.jsxs(it,{children:[n.jsx(ut,{children:"Cancel"}),n.jsx(dt,{onClick:j,className:"bg-destructive hover:bg-destructive/90",children:"Delete"})]})]})})]})}const $h=()=>typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,Xs="https://script.google.com/macros/s/AKfycbzUX1FIp1LkGstKP0j2sVs-VUPpDRoJ2D9lnwwT8-bP9MuSNfwPBuocJ5ob0Xym5QTz/exec",Ur=_e()(Le((e,t)=>({staffMembers:[],isLoading:!1,isSyncing:!1,lastSyncTime:null,syncError:null,setLoading:r=>{e({isLoading:r})},setSyncing:r=>{e({isSyncing:r})},fetchFromGoogleSheets:async()=>{if(console.log(" fetchFromGoogleSheets called"),Xs.includes("YOUR_DEPLOYMENT_ID")){console.warn("Google Sheets webhook not configured yet");return}console.log(" Fetching from:",Xs),e({isLoading:!0,syncError:null});try{const r=await fetch(Xs,{method:"GET"});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const s=await r.json();if(s.success&&s.data)e({staffMembers:s.data,lastSyncTime:new Date().toISOString(),syncError:null});else throw new Error(s.error||"Failed to fetch data")}catch(r){console.error("Error fetching from Google Sheets:",r),e({syncError:r instanceof Error?r.message:"Unknown error"})}finally{e({isLoading:!1})}},syncToGoogleSheets:async(r,s)=>{if(Xs.includes("YOUR_DEPLOYMENT_ID")){console.warn("Google Sheets webhook not configured yet");return}e({isSyncing:!0});try{const a=new URLSearchParams;a.append("action",r),a.append("data",JSON.stringify(s)),a.append("timestamp",new Date().toISOString());const o=await fetch(Xs,{method:"POST",body:a});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const i=await o.json();if(i.success)e({lastSyncTime:new Date().toISOString(),syncError:null});else throw new Error(i.error||"Sync failed")}catch(a){console.error("Google Sheets sync error:",a),e({syncError:a instanceof Error?a.message:"Sync failed"})}finally{e({isSyncing:!1})}},addStaffMember:async r=>{const s={...r,id:$h(),createdAt:new Date().toISOString(),trainingRecords:[]};e(a=>({staffMembers:[...a.staffMembers,s]})),await t().syncToGoogleSheets("addStaff",s)},updateStaffMember:async(r,s)=>{e(o=>({staffMembers:o.staffMembers.map(i=>i.id===r?{...i,...s}:i)}));const a=t().staffMembers.find(o=>o.id===r);a&&await t().syncToGoogleSheets("updateStaff",a)},deleteStaffMember:async r=>{const s=t().staffMembers.find(a=>a.id===r);e(a=>({staffMembers:a.staffMembers.filter(o=>o.id!==r)})),s&&await t().syncToGoogleSheets("deleteStaff",{id:r})},addTrainingRecord:async(r,s)=>{const a={...s,id:$h(),staffId:r};e(o=>({staffMembers:o.staffMembers.map(i=>i.id===r?{...i,trainingRecords:[a,...i.trainingRecords]}:i)})),await t().syncToGoogleSheets("addTraining",a)},updateTrainingRecord:async(r,s,a)=>{e(l=>({staffMembers:l.staffMembers.map(c=>c.id===r?{...c,trainingRecords:c.trainingRecords.map(u=>u.id===s?{...u,...a}:u)}:c)}));const o=t().staffMembers.find(l=>l.id===r),i=o==null?void 0:o.trainingRecords.find(l=>l.id===s);i&&await t().syncToGoogleSheets("updateTraining",i)},deleteTrainingRecord:async(r,s)=>{e(a=>({staffMembers:a.staffMembers.map(o=>o.id===r?{...o,trainingRecords:o.trainingRecords.filter(i=>i.id!==s)}:o)})),await t().syncToGoogleSheets("deleteTraining",{id:s,staffId:r})},getStaffMember:r=>t().staffMembers.find(s=>s.id===r)}),{name:"taquero-staff-training"}));function u4(e,t){const r=x4(t);return"formatToParts"in r?f4(r,e):h4(r,e)}const m4={year:0,month:1,day:2,hour:3,minute:4,second:5};function f4(e,t){try{const r=e.formatToParts(t),s=[];for(let a=0;a<r.length;a++){const o=m4[r[a].type];o!==void 0&&(s[o]=parseInt(r[a].value,10))}return s}catch(r){if(r instanceof RangeError)return[NaN];throw r}}function h4(e,t){const r=e.format(t),s=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(r);return[parseInt(s[3],10),parseInt(s[1],10),parseInt(s[2],10),parseInt(s[4],10),parseInt(s[5],10),parseInt(s[6],10)]}const sc={},Bh=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),p4=Bh==="06/25/2014, 00:00:00"||Bh==="06/25/2014 00:00:00";function x4(e){return sc[e]||(sc[e]=p4?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})),sc[e]}function Jj(e,t,r,s,a,o,i){const l=new Date(0);return l.setUTCFullYear(e,t,r),l.setUTCHours(s,a,o,i),l}const zh=36e5,g4=6e4,ac={timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function ew(e,t,r){if(!e)return 0;let s=ac.timezoneZ.exec(e);if(s)return 0;let a,o;if(s=ac.timezoneHH.exec(e),s)return a=parseInt(s[1],10),Wh(a)?-(a*zh):NaN;if(s=ac.timezoneHHMM.exec(e),s){a=parseInt(s[2],10);const i=parseInt(s[3],10);return Wh(a,i)?(o=Math.abs(a)*zh+i*g4,s[1]==="+"?-o:o):NaN}if(j4(e)){t=new Date(t||Date.now());const i=r?t:v4(t),l=hd(i,e);return-(r?l:y4(t,l,e))}return NaN}function v4(e){return Jj(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function hd(e,t){const r=u4(e,t),s=Jj(r[0],r[1]-1,r[2],r[3]%24,r[4],r[5],0).getTime();let a=e.getTime();const o=a%1e3;return a-=o>=0?o:1e3+o,s-a}function y4(e,t,r){let a=e.getTime()-t;const o=hd(new Date(a),r);if(t===o)return t;a-=o-t;const i=hd(new Date(a),r);return o===i?o:Math.max(o,i)}function Wh(e,t){return-23<=e&&e<=23&&(t==null||0<=t&&t<=59)}const Uh={};function j4(e){if(Uh[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),Uh[e]=!0,!0}catch{return!1}}function Yh(e){const t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+e-+t}const w4=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,oc=36e5,Gh=6e4,N4=2,rt={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:w4};function b4(e,t={}){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(e===null)return new Date(NaN);const r=t.additionalDigits==null?N4:Number(t.additionalDigits);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]")return new Date(e.getTime());if(typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]")return new Date(e);if(Object.prototype.toString.call(e)!=="[object String]")return new Date(NaN);const s=S4(e),{year:a,restDateString:o}=C4(s.date,r),i=k4(o,a);if(i===null||isNaN(i.getTime()))return new Date(NaN);if(i){const l=i.getTime();let c=0,u;if(s.time&&(c=D4(s.time),c===null||isNaN(c)))return new Date(NaN);if(s.timeZone||t.timeZone){if(u=ew(s.timeZone||t.timeZone,new Date(l+c)),isNaN(u))return new Date(NaN)}else u=Yh(new Date(l+c)),u=Yh(new Date(l+c+u));return new Date(l+c+u)}else return new Date(NaN)}function S4(e){const t={};let r=rt.dateTimePattern.exec(e),s;if(r?(t.date=r[1],s=r[3]):(r=rt.datePattern.exec(e),r?(t.date=r[1],s=r[2]):(t.date=null,s=e)),s){const a=rt.timeZone.exec(s);a?(t.time=s.replace(a[1],""),t.timeZone=a[1].trim()):t.time=s}return t}function C4(e,t){if(e){const r=rt.YYY[t],s=rt.YYYYY[t];let a=rt.YYYY.exec(e)||s.exec(e);if(a){const o=a[1];return{year:parseInt(o,10),restDateString:e.slice(o.length)}}if(a=rt.YY.exec(e)||r.exec(e),a){const o=a[1];return{year:parseInt(o,10)*100,restDateString:e.slice(o.length)}}}return{year:null}}function k4(e,t){if(t===null)return null;let r,s,a;if(!e||!e.length)return r=new Date(0),r.setUTCFullYear(t),r;let o=rt.MM.exec(e);if(o)return r=new Date(0),s=parseInt(o[1],10)-1,Vh(t,s)?(r.setUTCFullYear(t,s),r):new Date(NaN);if(o=rt.DDD.exec(e),o){r=new Date(0);const i=parseInt(o[1],10);return M4(t,i)?(r.setUTCFullYear(t,0,i),r):new Date(NaN)}if(o=rt.MMDD.exec(e),o){r=new Date(0),s=parseInt(o[1],10)-1;const i=parseInt(o[2],10);return Vh(t,s,i)?(r.setUTCFullYear(t,s,i),r):new Date(NaN)}if(o=rt.Www.exec(e),o)return a=parseInt(o[1],10)-1,qh(a)?Hh(t,a):new Date(NaN);if(o=rt.WwwD.exec(e),o){a=parseInt(o[1],10)-1;const i=parseInt(o[2],10)-1;return qh(a,i)?Hh(t,a,i):new Date(NaN)}return null}function D4(e){let t,r,s=rt.HH.exec(e);if(s)return t=parseFloat(s[1].replace(",",".")),ic(t)?t%24*oc:NaN;if(s=rt.HHMM.exec(e),s)return t=parseInt(s[1],10),r=parseFloat(s[2].replace(",",".")),ic(t,r)?t%24*oc+r*Gh:NaN;if(s=rt.HHMMSS.exec(e),s){t=parseInt(s[1],10),r=parseInt(s[2],10);const a=parseFloat(s[3].replace(",","."));return ic(t,r,a)?t%24*oc+r*Gh+a*1e3:NaN}return null}function Hh(e,t,r){t=t||0,r=r||0;const s=new Date(0);s.setUTCFullYear(e,0,4);const a=s.getUTCDay()||7,o=t*7+r+1-a;return s.setUTCDate(s.getUTCDate()+o),s}const T4=[31,28,31,30,31,30,31,31,30,31,30,31],E4=[31,29,31,30,31,30,31,31,30,31,30,31];function tw(e){return e%400===0||e%4===0&&e%100!==0}function Vh(e,t,r){if(t<0||t>11)return!1;if(r!=null){if(r<1)return!1;const s=tw(e);if(s&&r>E4[t]||!s&&r>T4[t])return!1}return!0}function M4(e,t){if(t<1)return!1;const r=tw(e);return!(r&&t>366||!r&&t>365)}function qh(e,t){return!(e<0||e>52||t!=null&&(t<0||t>6))}function ic(e,t,r){return!(e<0||e>=25||t!=null&&(t<0||t>=60)||r!=null&&(r<0||r>=60))}function mm(e,t,r){e=b4(e,r);const s=ew(t,e,!0),a=new Date(e.getTime()-s),o=new Date(0);return o.setFullYear(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()),o.setHours(a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds()),o}const fm="Pacific/Auckland";function Ga(e){try{const t=typeof e=="string"?new Date(e):e,r=mm(t,fm);return Cn(r,"dd/MM/yyyy")}catch(t){return console.error("Error formatting date:",t),"Invalid date"}}function lc(){const t=mm(new Date,fm);return Cn(t,"yyyy-MM-dd")}function R4(){const t=mm(new Date,fm);return Cn(t,"dd MMMM yyyy, HH:mm")}function P4(){const{staffMembers:e}=Ur();return e.length===0?null:n.jsx(n.Fragment,{children:n.jsxs(V,{className:"mt-8",children:[n.jsx(ee,{children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:n.jsx(Ig,{className:"h-5 w-5 text-primary"})}),n.jsxs("div",{children:[n.jsx(te,{children:"Training Records - All Staff"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Official records for health inspector review"})]})]})}),n.jsxs(K,{children:[n.jsx("div",{className:"space-y-8",children:e.map(t=>n.jsxs("div",{className:"space-y-4 pb-8 border-b last:border-0 last:pb-0",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-xl font-semibold",children:t.name}),n.jsxs("span",{className:"text-sm text-muted-foreground",children:[t.trainingRecords.length," training record",t.trainingRecords.length!==1?"s":""]})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Position:"})," ",n.jsx("span",{className:"font-medium",children:t.position})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Start Date:"})," ",n.jsx("span",{className:"font-medium",children:t.createdAt?Ga(t.createdAt):"N/A"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Email:"})," ",n.jsx("span",{className:"font-medium",children:t.email||"Not provided"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Phone:"})," ",n.jsx("span",{className:"font-medium",children:t.phone||"Not provided"})]})]})]}),t.trainingRecords.length>0?n.jsx("div",{className:"rounded-md border",children:n.jsxs(ul,{children:[n.jsx(ml,{children:n.jsxs(ir,{children:[n.jsx(qe,{className:"w-[50%]",children:"Topic (Part of plan covered)"}),n.jsx(qe,{className:"text-center w-[20%]",children:"Staff's name"}),n.jsx(qe,{className:"text-center w-[15%]",children:"Trainer initials"}),n.jsx(qe,{className:"text-center w-[15%]",children:"Date"})]})}),n.jsx(fl,{children:t.trainingRecords.map(r=>n.jsxs(ir,{children:[n.jsx(Ue,{className:"font-medium",children:n.jsxs("div",{children:[n.jsx("div",{children:r.topic.split("(")[0].trim()}),r.topic.includes("(")&&n.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["(",r.topic.split("(")[1]]})]})}),n.jsx(Ue,{className:"text-center",children:n.jsx("span",{className:"font-mono font-bold text-lg",children:t.initials})}),n.jsx(Ue,{className:"text-center",children:n.jsx("span",{className:"font-mono font-bold text-base",children:r.trainerInitials})}),n.jsx(Ue,{className:"text-center",children:Ga(r.date)})]},r.id))})]})}):n.jsx("div",{className:"text-center py-8 text-muted-foreground border rounded-md",children:"No training records yet"})]},t.id))}),n.jsx("div",{className:"mt-6 pt-6 border-t text-xs text-muted-foreground",children:n.jsxs("p",{children:["Generated: ",R4()]})})]})]})})}function A4(){const e=$t(),{staffMembers:t,isLoading:r,fetchFromGoogleSheets:s,deleteStaffMember:a}=Ur(),[o,i]=d.useState(new Set),[l,c]=d.useState(!1),[u,h]=d.useState(null);d.useEffect(()=>{s()},[s]);const m=()=>{e("/module/staff-training/add")},g=f=>{i(x=>{const y=new Set(x);return y.has(f)?y.delete(f):y.add(f),y})},j=f=>{e(`/module/staff-training/${f}`)},w=(f,x)=>{x.stopPropagation(),e(`/module/staff-training/${f}`)},v=(f,x,y)=>{y.stopPropagation(),h({id:f,name:x}),c(!0)},p=async()=>{if(u)try{await a(u.id),c(!1),h(null),await s()}catch(f){console.error("Error deleting staff member:",f),alert("Error deleting staff member. Please try again.")}};return r?n.jsxs("div",{className:"flex flex-col items-center justify-center p-8 space-y-3",children:[n.jsx(ke,{className:"h-8 w-8 animate-spin text-muted-foreground"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Fetching Data"})]}):t.length===0?n.jsx("div",{className:"max-w-md mx-auto px-4",children:n.jsxs("div",{className:"text-center space-y-6 py-12",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsx("h3",{className:"text-2xl font-semibold",children:"No Staff Members Yet"}),n.jsx("p",{className:"text-muted-foreground text-base",children:"Get started by adding your first team member"})]}),n.jsxs(P,{size:"lg",onClick:m,className:"h-14 px-8 text-base font-medium min-h-[56px] w-full sm:w-auto",style:{touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:[n.jsx(oe,{className:"h-5 w-5 mr-2"}),"Add Staff Member"]})]})}):n.jsxs("div",{className:"space-y-6 max-w-6xl mx-auto px-4",children:[n.jsxs("div",{className:"space-y-2 text-center md:text-left",children:[n.jsxs("h2",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[n.jsx(gu,{className:"h-8 w-8"}),"Staff Training Records"]}),n.jsxs("p",{className:"text-muted-foreground text-lg",children:[t.length," team member",t.length!==1?"s":""]})]}),n.jsxs(P,{size:"lg",onClick:m,className:"h-12 px-6 min-h-[48px] w-full sm:w-auto",children:[n.jsx(oe,{className:"h-5 w-5 mr-2"}),"Add Staff Member"]}),n.jsxs(V,{children:[n.jsx(ee,{children:n.jsx(te,{children:"Team Members"})}),n.jsx(K,{children:n.jsx("div",{className:"space-y-2",children:t.map((f,x)=>{const y=o.has(f.id);return n.jsxs("div",{className:"border rounded-lg overflow-hidden transition-all duration-200 hover:border-primary/50",style:{animationDelay:`${x*50}ms`},children:[n.jsxs("div",{className:"flex items-center justify-between p-4 cursor-pointer bg-card hover:bg-muted/50 transition-colors",onClick:()=>g(f.id),children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[n.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center transition-colors ${y?"bg-primary text-primary-foreground":"bg-primary/10"}`,children:n.jsx(Zi,{className:`h-5 w-5 ${y?"":"text-primary"}`})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"font-semibold text-lg truncate",children:f.name}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[f.position,"  ",f.trainingRecords.length," training record",f.trainingRecords.length!==1?"s":""]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[n.jsx(P,{variant:"ghost",size:"sm",onClick:N=>w(f.id,N),className:"h-9 w-9 p-0",children:n.jsx(Lt,{className:"h-4 w-4"})}),n.jsx(P,{variant:"ghost",size:"sm",onClick:N=>v(f.id,f.name,N),className:"h-9 w-9 p-0",children:n.jsx(Mt,{className:"h-4 w-4 text-destructive"})}),n.jsx(P,{variant:"ghost",size:"sm",className:"h-9 w-9 p-0",children:y?n.jsx(Bt,{className:"h-5 w-5"}):n.jsx(Et,{className:"h-5 w-5"})})]})]}),y&&n.jsxs("div",{className:"border-t bg-muted/30 p-4 space-y-4 animate-in fade-in slide-in-from-top-2 duration-200",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4 pb-4 border-b",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:"Email"}),n.jsx("p",{className:"text-sm font-medium",children:f.email||"Not provided"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:"Phone"}),n.jsx("p",{className:"text-sm font-medium",children:f.phone||"Not provided"})]})]}),n.jsxs("div",{children:[n.jsxs("h4",{className:"font-semibold mb-3 text-sm uppercase tracking-wide text-muted-foreground flex items-center justify-between",children:["Training Records",n.jsxs(P,{size:"sm",variant:"outline",onClick:()=>j(f.id),className:"h-8 px-3",children:[n.jsx(oe,{className:"h-3 w-3 mr-1"}),"Add Record"]})]}),f.trainingRecords.length>0?n.jsx("div",{className:"space-y-2",children:f.trainingRecords.map(N=>n.jsx("div",{className:"bg-background rounded-md p-3 border",children:n.jsx("div",{className:"flex items-start justify-between gap-2",children:n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"font-medium text-sm",children:N.topic.split("(")[0].trim()}),N.topic.includes("(")&&n.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["(",N.topic.split("(")[1]]}),n.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-muted-foreground",children:[n.jsxs("span",{children:["Trainer: ",N.trainerInitials]}),n.jsx("span",{children:""}),n.jsx("span",{children:Ga(N.date)})]})]})})},N.id))}):n.jsx("p",{className:"text-sm text-muted-foreground text-center py-4 bg-background rounded-md border",children:"No training records yet"})]})]})]},f.id)})})})]}),n.jsx(P4,{}),n.jsx(jt,{open:l,onOpenChange:c,children:n.jsxs(at,{children:[n.jsxs(ot,{children:[n.jsx(lt,{children:"Delete Staff Member?"}),n.jsxs(ct,{children:['This will permanently delete "',u==null?void 0:u.name,'" and all their training records. This action cannot be undone.']})]}),n.jsxs(it,{children:[n.jsx(ut,{children:"Cancel"}),n.jsx(dt,{onClick:p,className:"bg-destructive hover:bg-destructive/90",children:"Delete"})]})]})})]})}const pd=new Map;let O4=0;const Ti=new Set;let Mr=[];function I4(e){const t=`toast-${++O4}`,r={...e,id:t};Mr=[...Mr,r],Ti.forEach(a=>a(Mr));const s=setTimeout(()=>{nw(t)},4e3);pd.set(t,s)}function nw(e){const t=pd.get(e);t&&(clearTimeout(t),pd.delete(e)),Mr=Mr.filter(r=>r.id!==e),Ti.forEach(r=>r(Mr))}function hl(){const[e,t]=d.useState(Mr),r=d.useCallback(o=>(Ti.add(o),()=>Ti.delete(o)),[]);d.useState(()=>r(t));const s=d.useCallback(o=>{I4(o)},[]),a=d.useCallback(o=>{nw(o)},[]);return{toast:s,dismiss:a,toasts:e}}function F4({staffId:e,staffName:t,records:r}){const{deleteTrainingRecord:s}=Ur(),{toast:a}=hl(),[o,i]=d.useState(!1),[l,c]=d.useState(null),u=m=>{c(m),i(!0)},h=async()=>{if(l)try{await s(e,l.id),a({title:"Training Record Deleted",description:`Removed training record for ${t}`}),i(!1),c(null)}catch(m){console.error("Error deleting training record:",m),a({title:"Error",description:"Failed to delete training record. Please try again.",variant:"destructive"})}};return r.length===0?n.jsxs("div",{className:"text-center py-12 text-muted-foreground border rounded-md bg-card",children:[n.jsx("p",{className:"text-base",children:"No training records yet"}),n.jsx("p",{className:"text-sm mt-2",children:'Click "Log Training Record" to add a new entry'})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"rounded-md border overflow-hidden",children:n.jsxs(ul,{children:[n.jsx(ml,{children:n.jsxs(ir,{className:"bg-muted/50",children:[n.jsxs(qe,{className:"font-semibold",children:["Topic ",n.jsx("span",{className:"text-xs text-muted-foreground",children:"(Part of plan covered)"})]}),n.jsx(qe,{className:"font-semibold text-center w-32",children:"Trainer Initials"}),n.jsx(qe,{className:"font-semibold w-32",children:"Date"}),n.jsx(qe,{className:"font-semibold text-center w-20",children:"Actions"})]})}),n.jsx(fl,{children:r.map(m=>n.jsxs(ir,{className:"min-h-[60px]",children:[n.jsx(Ue,{className:"font-medium",children:n.jsxs("div",{className:"py-2",children:[m.topic.split("(")[0].trim(),m.topic.includes("(")&&n.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["(",m.topic.split("(")[1]]})]})}),n.jsx(Ue,{className:"text-center font-mono font-semibold",children:m.trainerInitials}),n.jsx(Ue,{children:Ga(m.date)}),n.jsx(Ue,{className:"text-center",children:n.jsx(P,{variant:"ghost",size:"icon",onClick:()=>u(m),className:"h-10 w-10 text-destructive hover:text-destructive hover:bg-destructive/10",style:{touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:n.jsx(Mt,{className:"h-4 w-4"})})})]},m.id))})]})}),n.jsx(jt,{open:o,onOpenChange:i,children:n.jsxs(at,{children:[n.jsxs(ot,{children:[n.jsx(lt,{children:"Delete Training Record?"}),n.jsxs(ct,{children:["Are you sure you want to delete this training record for ",n.jsx("strong",{children:t}),"?",l&&n.jsxs("div",{className:"mt-3 p-3 bg-muted rounded-md text-sm",children:[n.jsxs("div",{children:[n.jsx("strong",{children:"Topic:"})," ",l.topic]}),n.jsxs("div",{className:"mt-1",children:[n.jsx("strong",{children:"Date:"})," ",Ga(l.date)]}),n.jsxs("div",{className:"mt-1",children:[n.jsx("strong",{children:"Trainer:"})," ",l.trainerInitials]})]}),n.jsx("p",{className:"mt-3 text-destructive font-medium",children:"This action cannot be undone."})]})]}),n.jsxs(it,{children:[n.jsx(ut,{children:"Cancel"}),n.jsx(dt,{onClick:h,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete Record"})]})]})})]})}const cc=e=>{const[t,r,s]=e.split("-");return`${s}/${r}/${t}`},_4=e=>{const[t,r,s]=e.split("/");return`${s}-${r}-${t}`};function L4({staffId:e,staffName:t,open:r,onClose:s}){const{addTrainingRecord:a}=Ur(),{toast:o}=hl(),[i,l]=d.useState(""),[c,u]=d.useState(""),[h,m]=d.useState(cc(lc())),[g,j]=d.useState(!1),w=async()=>{if(!i){o({title:"Missing Information",description:"Please select a training topic",variant:"destructive"});return}if(!c||c.length<2||c.length>3){o({title:"Invalid Initials",description:"Trainer initials must be 2-3 characters",variant:"destructive"});return}if(!h){o({title:"Missing Date",description:"Please select a training date",variant:"destructive"});return}j(!0);try{await a(e,{topic:i,trainerInitials:c.toUpperCase(),date:new Date(_4(h)).toISOString()}),o({title:"Training Logged",description:`Training record added for ${t}`}),l(""),u(""),m(cc(lc())),s()}catch(p){console.error("Error adding training record:",p),o({title:"Error",description:"Failed to save training record. Please try again.",variant:"destructive"})}finally{j(!1)}},v=()=>{l(""),u(""),m(cc(lc())),s()};return n.jsx(Pe,{open:r,onOpenChange:v,children:n.jsxs(De,{className:"max-w-2xl",children:[n.jsxs(Te,{children:[n.jsx(Ee,{className:"text-2xl",children:"Log Training Record"}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Recording training for ",n.jsx("span",{className:"font-semibold",children:t})]})]}),n.jsxs("div",{className:"space-y-5 py-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-sm font-medium",children:["Training Topic ",n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsx(Y,{value:i,onChange:p=>l(p.target.value),placeholder:"e.g., Wash hands, Temperature monitoring, When something goes wrong",className:"h-12 text-base"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter any training topic including unexpected situations"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-sm font-medium",children:["Trainer Initials ",n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsx(Y,{value:c,onChange:p=>u(p.target.value.toUpperCase()),placeholder:"e.g., MW or MAW",maxLength:3,className:"h-12 text-base font-mono uppercase"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter 2-3 characters"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-sm font-medium",children:["Date ",n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsx(Fe,{value:h,onChange:m,placeholder:"DD/MM/YYYY"})]})]}),n.jsxs(pj,{className:"gap-3 sm:gap-2",children:[n.jsx(P,{variant:"outline",onClick:v,disabled:g,className:"h-12 px-6 min-h-[48px] text-base",style:{touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:"Cancel"}),n.jsx(P,{onClick:w,disabled:g,className:"h-12 px-8 min-h-[48px] text-base font-medium",style:{touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:g?"Saving...":"Save Training Record"})]})]})})}function $4(){const e=$t(),{staffId:t}=gg(),{getStaffMember:r,updateStaffMember:s,deleteStaffMember:a}=Ur(),{toast:o}=hl(),i=t?r(t):null,[l,c]=d.useState(!1),[u,h]=d.useState((i==null?void 0:i.name)||""),[m,g]=d.useState((i==null?void 0:i.initials)||""),[j,w]=d.useState((i==null?void 0:i.position)||""),[v,p]=d.useState((i==null?void 0:i.email)||""),[f,x]=d.useState((i==null?void 0:i.phone)||""),[y,N]=d.useState(!1),[b,T]=d.useState(!1),[D,E]=d.useState(!1);if(!i||!t)return n.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-12 text-center",children:[n.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Staff Member Not Found"}),n.jsxs(P,{onClick:()=>e("/module/staff-training"),children:[n.jsx(Ts,{className:"h-4 w-4 mr-2"}),"Back to Staff List"]})]});const S=async()=>{if(!u.trim()||!j.trim()){o({title:"Missing Information",description:"Name and position are required",variant:"destructive"});return}if(!m.trim()||m.trim().length!==2){o({title:"Invalid Initials",description:"Staff initials must be exactly 2 letters",variant:"destructive"});return}try{await s(t,{name:u.trim(),initials:m.trim().toUpperCase(),position:j.trim(),email:v.trim()||void 0,phone:f.trim()||void 0}),o({title:"Saved",description:"Staff information updated successfully"}),c(!1)}catch(k){console.error("Error updating staff:",k),o({title:"Error",description:"Failed to update staff information",variant:"destructive"})}},C=()=>{h(i.name),g(i.initials),w(i.position),p(i.email||""),x(i.phone||""),c(!1)},R=async()=>{E(!0);try{await a(t),o({title:"Deleted",description:`${i.name} has been removed`}),e("/module/staff-training")}catch(k){console.error("Error deleting staff:",k),o({title:"Error",description:"Failed to delete staff member",variant:"destructive"}),E(!1)}};return n.jsxs("div",{className:"space-y-6 max-w-4xl mx-auto px-4 pb-8",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(P,{variant:"ghost",size:"icon",onClick:()=>e("/module/staff-training"),className:"h-10 w-10",children:n.jsx(Ts,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-semibold",children:i.name}),n.jsx("p",{className:"text-sm text-muted-foreground",children:i.position})]})]}),n.jsxs(V,{children:[n.jsx(ee,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(te,{children:"Staff Information"}),l?null:n.jsxs(P,{variant:"outline",size:"sm",onClick:()=>c(!0),className:"h-10 px-4",children:[n.jsx(qt,{className:"h-4 w-4 mr-2"}),"Edit"]})]})}),n.jsxs(K,{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-sm font-medium",children:["Name ",n.jsx("span",{className:"text-destructive",children:"*"})]}),l?n.jsx(Y,{value:u,onChange:k=>h(k.target.value),placeholder:"Staff member name",className:"h-11"}):n.jsx("div",{className:"h-11 px-3 py-2 border rounded-md bg-muted/30",children:i.name})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-sm font-medium",children:["Staff Initials ",n.jsx("span",{className:"text-destructive",children:"*"})]}),l?n.jsx(Y,{value:m,onChange:k=>g(k.target.value.toUpperCase()),placeholder:"e.g., HV",maxLength:2,className:"h-11 font-mono uppercase"}):n.jsx("div",{className:"h-11 px-3 py-2 border rounded-md bg-muted/30 font-mono font-bold text-lg",children:i.initials})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-sm font-medium",children:["Position ",n.jsx("span",{className:"text-destructive",children:"*"})]}),l?n.jsx(Y,{value:j,onChange:k=>w(k.target.value),placeholder:"e.g., Kitchen Hand",className:"h-11"}):n.jsx("div",{className:"h-11 px-3 py-2 border rounded-md bg-muted/30",children:i.position})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"Email (optional)"}),l?n.jsx(Y,{type:"email",value:v,onChange:k=>p(k.target.value),placeholder:"email@example.com",className:"h-11"}):n.jsx("div",{className:"h-11 px-3 py-2 border rounded-md bg-muted/30",children:i.email||n.jsx("span",{className:"text-muted-foreground",children:"Not set"})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"Phone (optional)"}),l?n.jsx(Y,{type:"tel",value:f,onChange:k=>x(k.target.value),placeholder:"+64 21 XXX XXXX",className:"h-11"}):n.jsx("div",{className:"h-11 px-3 py-2 border rounded-md bg-muted/30",children:i.phone||n.jsx("span",{className:"text-muted-foreground",children:"Not set"})})]})]}),l&&n.jsxs("div",{className:"flex gap-3 pt-2",children:[n.jsx(P,{onClick:S,className:"h-12 px-6 min-h-[48px] flex-1",style:{touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:"Save Changes"}),n.jsx(P,{variant:"outline",onClick:C,className:"h-12 px-6 min-h-[48px]",style:{touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:"Cancel"})]}),!l&&n.jsx("div",{className:"pt-4 border-t",children:n.jsxs(P,{variant:"destructive",onClick:()=>T(!0),className:"h-11 px-6",style:{touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:[n.jsx(Mt,{className:"h-4 w-4 mr-2"}),"Delete Staff Member"]})})]})]}),n.jsxs(V,{children:[n.jsx(ee,{children:n.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[n.jsx(te,{children:"Training History"}),n.jsxs(P,{onClick:()=>N(!0),className:"h-11 px-5 min-h-[44px]",style:{touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:[n.jsx(oe,{className:"h-4 w-4 mr-2"}),"Log Training"]})]})}),n.jsx(K,{children:n.jsx(F4,{staffId:t,staffName:i.name,records:i.trainingRecords})})]}),n.jsx(L4,{staffId:t,staffName:i.name,open:y,onClose:()=>N(!1)}),n.jsx(jt,{open:b,onOpenChange:T,children:n.jsxs(at,{children:[n.jsxs(ot,{children:[n.jsx(lt,{children:"Delete Staff Member?"}),n.jsxs(ct,{children:["This will permanently delete ",n.jsx("strong",{children:i.name})," and all their training records (",i.trainingRecords.length," record",i.trainingRecords.length!==1?"s":"","). This action cannot be undone."]})]}),n.jsxs(it,{children:[n.jsx(ut,{disabled:D,children:"Cancel"}),n.jsx(dt,{onClick:R,disabled:D,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:D?"Deleting...":"Delete"})]})]})})]})}function B4(){const e=$t(),{addStaffMember:t,staffMembers:r}=Ur(),{toast:s}=hl(),[a,o]=d.useState(""),[i,l]=d.useState(""),[c,u]=d.useState(""),[h,m]=d.useState(""),[g,j]=d.useState(""),[w,v]=d.useState(!1),p=async f=>{if(f.preventDefault(),!a.trim()||!c.trim()){s({title:"Missing Information",description:"Name and position are required",variant:"destructive"});return}if(!i.trim()||i.trim().length!==2){s({title:"Invalid Initials",description:"Staff initials must be exactly 2 letters",variant:"destructive"});return}v(!0);try{await t({name:a.trim(),initials:i.trim().toUpperCase(),position:c.trim(),email:h.trim()||void 0,phone:g.trim()||void 0}),s({title:"Staff Member Added",description:`${a} has been added to the team`}),setTimeout(()=>{const x=r.find(y=>y.name===a.trim());e(x?`/module/staff-training/${x.id}`:"/module/staff-training")},100)}catch(x){console.error("Error adding staff:",x),s({title:"Error",description:"Failed to add staff member. Please try again.",variant:"destructive"}),v(!1)}};return n.jsxs("div",{className:"max-w-2xl mx-auto px-4 pb-8",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx(P,{variant:"ghost",size:"icon",onClick:()=>e("/module/staff-training"),className:"h-10 w-10",children:n.jsx(Ts,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-semibold",children:"Add Staff Member"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Create a new team member profile"})]})]}),n.jsxs(V,{children:[n.jsx(ee,{children:n.jsx(te,{children:"Staff Information"})}),n.jsx(K,{children:n.jsxs("form",{onSubmit:p,className:"space-y-5",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{htmlFor:"name",className:"text-sm font-medium",children:["Name ",n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsx(Y,{id:"name",value:a,onChange:f=>o(f.target.value),placeholder:"Enter staff member's full name",className:"h-12 text-base",disabled:w,autoFocus:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{htmlFor:"initials",className:"text-sm font-medium",children:["Staff Initials ",n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsx(Y,{id:"initials",value:i,onChange:f=>l(f.target.value.toUpperCase()),placeholder:"e.g., HV",maxLength:2,className:"h-12 text-base font-mono uppercase",disabled:w}),n.jsx("p",{className:"text-xs text-muted-foreground",children:'Enter 2 letters (e.g., "HV" for Hugo Verdes)'})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{htmlFor:"position",className:"text-sm font-medium",children:["Position ",n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsx(Y,{id:"position",value:c,onChange:f=>u(f.target.value),placeholder:"e.g., Kitchen Hand, Chef, Manager",className:"h-12 text-base",disabled:w})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{htmlFor:"email",className:"text-sm font-medium",children:"Email (optional)"}),n.jsx(Y,{id:"email",type:"email",value:h,onChange:f=>m(f.target.value),placeholder:"email@example.com",className:"h-12 text-base",disabled:w})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{htmlFor:"phone",className:"text-sm font-medium",children:"Phone (optional)"}),n.jsx(Y,{id:"phone",type:"tel",value:g,onChange:f=>j(f.target.value),placeholder:"+64 21 XXX XXXX",className:"h-12 text-base",disabled:w})]})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx(P,{type:"submit",disabled:w,className:"h-14 px-8 min-h-[56px] text-base font-medium flex-1",style:{touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:w?"Adding...":"Add Staff Member"}),n.jsx(P,{type:"button",variant:"outline",onClick:()=>e("/module/staff-training"),disabled:w,className:"h-14 px-6 min-h-[56px] text-base",style:{touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:"Cancel"})]})]})})]})]})}function z4(){const{staffId:e}=gg(),t=$t(),{getStaffMember:r}=Ur(),s=e?r(e):null;if(!s||!e)return n.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-12 text-center",children:[n.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Staff Member Not Found"}),n.jsxs(P,{onClick:()=>t("/module/staff-training"),children:[n.jsx(Ts,{className:"h-4 w-4 mr-2"}),"Back to Staff List"]})]});const a=s.createdAt?Cn(new Date(s.createdAt),"dd/MM/yyyy"):Cn(new Date,"dd/MM/yyyy");return n.jsxs("div",{className:"min-h-screen",children:[n.jsx("div",{className:"max-w-6xl mx-auto px-4 py-4 bg-background sticky top-0 z-10 border-b",children:n.jsxs(P,{variant:"ghost",size:"sm",onClick:()=>t(`/module/staff-training/${e}`),children:[n.jsx(Ts,{className:"h-4 w-4 mr-2"}),"Back to Staff Detail"]})}),n.jsxs("div",{className:"max-w-6xl mx-auto px-8 py-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("div",{className:"flex items-start justify-between mb-6",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-blue-600 flex items-center justify-center text-white font-bold print:bg-blue-700",children:"MPI"}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 print:text-black",style:{fontFamily:"Tw Cen MT, sans-serif"},children:"Staff training records"}),n.jsx("p",{className:"text-lg text-gray-700 mt-1",children:s.name})]})]}),n.jsxs("div",{className:"text-right text-sm",children:[n.jsx("p",{className:"text-gray-600",children:'See the "Training and'}),n.jsx("p",{className:"text-gray-600",children:'competency" dark blue'}),n.jsx("p",{className:"text-gray-600",children:"card in SS&S"})]})]}),n.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-600 p-4 mb-6 print:bg-gray-100 print:border-gray-800",children:n.jsxs("p",{className:"text-sm text-gray-800 print:text-black",children:[n.jsx("strong",{children:"Staff"})," could include volunteers, family, friends, owner/operators, and managers, who may carry out food related tasks in your business or operation. You do not need to keep training records if you are a sole operator and do not need to keep training records."]})}),n.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Position*"}),n.jsx("div",{className:"border-2 border-gray-300 rounded px-3 py-2 bg-white print:bg-white",children:s.position})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Start date*"}),n.jsx("div",{className:"border-2 border-gray-300 rounded px-3 py-2 bg-white print:bg-white",children:a})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Email*"}),n.jsx("div",{className:"border-2 border-gray-300 rounded px-3 py-2 bg-white print:bg-white",children:s.email||"Not provided"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Phone number*"}),n.jsx("div",{className:"border-2 border-gray-300 rounded px-3 py-2 bg-white print:bg-white",children:s.phone||"Not provided"})]})]})]}),n.jsxs("div",{className:"border-2 border-gray-800 print:border-black",children:[n.jsxs("div",{className:"grid grid-cols-12 bg-blue-700 text-white print:bg-blue-800 print:text-white",children:[n.jsx("div",{className:"col-span-6 p-3 border-r-2 border-white print:border-white font-semibold",children:"Topic (Part of the plan that has been covered)"}),n.jsx("div",{className:"col-span-2 p-3 border-r-2 border-white print:border-white font-semibold text-center",children:"Staff's name"}),n.jsx("div",{className:"col-span-2 p-3 border-r-2 border-white print:border-white font-semibold text-center",children:"Trainer initials"}),n.jsx("div",{className:"col-span-2 p-3 font-semibold text-center",children:"Date"})]}),s.trainingRecords.map((o,i)=>n.jsxs("div",{className:`grid grid-cols-12 border-t-2 border-gray-800 print:border-black ${i%2===0?"bg-blue-50 print:bg-gray-50":"bg-white print:bg-white"}`,children:[n.jsxs("div",{className:"col-span-6 p-3 border-r-2 border-gray-300 print:border-gray-400",children:[n.jsx("div",{className:"font-semibold text-gray-900 print:text-black mb-1",children:o.topic.split("(")[0].trim()}),o.topic.includes("(")&&n.jsxs("div",{className:"text-sm text-gray-600 print:text-gray-700 italic",children:["(",o.topic.split("(")[1]]})]}),n.jsx("div",{className:"col-span-2 p-3 border-r-2 border-gray-300 print:border-gray-400 text-center flex items-center justify-center",children:n.jsx("span",{className:"font-medium",children:s.name})}),n.jsx("div",{className:"col-span-2 p-3 border-r-2 border-gray-300 print:border-gray-400 text-center flex items-center justify-center",children:n.jsx("span",{className:"font-mono font-bold text-lg",children:o.trainerInitials})}),n.jsx("div",{className:"col-span-2 p-3 text-center flex items-center justify-center",children:n.jsx("span",{children:Cn(new Date(o.date),"dd/MM/yyyy")})})]},o.id)),Array.from({length:Math.max(8-s.trainingRecords.length,0)}).map((o,i)=>n.jsxs("div",{className:`grid grid-cols-12 border-t-2 border-gray-800 print:border-black ${(s.trainingRecords.length+i)%2===0?"bg-blue-50 print:bg-gray-50":"bg-white print:bg-white"}`,children:[n.jsx("div",{className:"col-span-6 p-3 border-r-2 border-gray-300 print:border-gray-400 h-16",children:""}),n.jsx("div",{className:"col-span-2 p-3 border-r-2 border-gray-300 print:border-gray-400 h-16",children:""}),n.jsx("div",{className:"col-span-2 p-3 border-r-2 border-gray-300 print:border-gray-400 h-16",children:""}),n.jsx("div",{className:"col-span-2 p-3 h-16",children:""})]},`empty-${i}`))]}),n.jsxs("div",{className:"mt-8 text-xs text-gray-500 print:text-gray-600",children:[n.jsx("p",{children:"Generated by Taquero - Food Safety Management System"}),n.jsxs("p",{children:["Printed: ",Cn(new Date,"dd MMMM yyyy, HH:mm")]}),n.jsx("p",{className:"mt-2",children:"This document complies with MPI Food Control Plan requirements for staff training record keeping."})]})]})]})}function W4(){const{isAuthenticated:e}=Ie(),[t,r]=d.useState([]),s=(i,l="info")=>{const c=Date.now();r(u=>[...u,{id:c,message:i,type:l}])},a=i=>{r(l=>l.filter(c=>c.id!==i))},o=()=>{const i=Ie.getState().currentUser;i&&s(`Welcome, ${i.name}!`,"success")};return e?n.jsxs(C1,{children:[n.jsx(wD,{children:n.jsxs(N1,{children:[n.jsx(ie,{path:"/",element:n.jsx(SD,{})}),n.jsx(ie,{path:"/restaurant",element:n.jsx(CD,{})}),n.jsx(ie,{path:"/restaurant/fcp",element:n.jsx(DD,{})}),n.jsx(ie,{path:"/restaurant/inventory",element:n.jsx(yr,{title:"Inventory Management",description:"Stocktaking & shopping lists"})}),n.jsx(ie,{path:"/restaurant/financial",element:n.jsx(yr,{title:"Financial Data",description:"CSV intake & data visualization"})}),n.jsx(ie,{path:"/restaurant/events",element:n.jsx(yr,{title:"Caravan Events",description:"Event management & scheduling"})}),n.jsx(ie,{path:"/manufacturing",element:n.jsx(kD,{})}),n.jsx(ie,{path:"/manufacturing/fcp",element:n.jsx(TD,{})}),n.jsx(ie,{path:"/manufacturing/traceability",element:n.jsx(s4,{})}),n.jsx(ie,{path:"/manufacturing/b2b",element:n.jsx(yr,{title:"B2B Sales Tracking",description:"Business-to-business orders"})}),n.jsx(ie,{path:"/module/fridge-temps",element:n.jsx(iE,{})}),n.jsx(ie,{path:"/module/staff-training",element:n.jsx(A4,{})}),n.jsx(ie,{path:"/module/staff-training/add",element:n.jsx(B4,{})}),n.jsx(ie,{path:"/module/staff-training/:staffId",element:n.jsx($4,{})}),n.jsx(ie,{path:"/module/staff-training/:staffId/mpi-record",element:n.jsx(z4,{})}),n.jsx(ie,{path:"/module/personal-hygiene",element:n.jsx(uM,{})}),n.jsx(ie,{path:"/module/cleaning-closing",element:n.jsx(zM,{})}),n.jsx(ie,{path:"/module/equipment-maintenance",element:n.jsx(YM,{})}),n.jsx(ie,{path:"/module/cooking-poultry-batch",element:n.jsx(WE,{})}),n.jsx(ie,{path:"/module/proving-method",element:n.jsx(yr,{title:"Proving the Method",description:"Method validation records"})}),n.jsx(ie,{path:"/module/proving-reheating",element:n.jsx(lM,{})}),n.jsx(ie,{path:"/module/proving-time-temp",element:n.jsx(QE,{})}),n.jsx(ie,{path:"/module/proving-cooling",element:n.jsx(rM,{})}),n.jsx(ie,{path:"/module/cooling-batch",element:n.jsx(pM,{})}),n.jsx(ie,{path:"/module/something-wrong",element:n.jsx(ZM,{})}),n.jsx(ie,{path:"/module/customer-complaints",element:n.jsx(d4,{})}),n.jsx(ie,{path:"/module/allergens",element:n.jsx(SM,{})}),n.jsx(ie,{path:"/module/suppliers",element:n.jsx(DM,{})}),n.jsx(ie,{path:"/module/supplier-deliveries",element:n.jsx(RM,{})}),n.jsx(ie,{path:"/module/transport-temp-checks",element:n.jsx(OM,{})}),n.jsx(ie,{path:"/module/b2b-sales",element:n.jsx(LM,{})}),n.jsx(ie,{path:"/module/processes-controls",element:n.jsx(yr,{title:"Processes & Controls",description:"Knowing your processes and controls"})}),n.jsx(ie,{path:"/module/selling-to-businesses",element:n.jsx(yr,{title:"Selling to Businesses",description:"B2B sales documentation"})}),n.jsx(ie,{path:"*",element:n.jsx(j1,{to:"/",replace:!0})})]})}),n.jsx(yn,{children:t.map(i=>n.jsx(vn,{message:i.message,type:i.type,onClose:()=>a(i.id)},i.id))})]}):n.jsx(aS,{onPasswordCorrect:o,onError:i=>s(i,"error")})}document.documentElement.classList.add("dark");dc.createRoot(document.getElementById("root")).render(n.jsx(on.StrictMode,{children:n.jsx(W4,{})}));
